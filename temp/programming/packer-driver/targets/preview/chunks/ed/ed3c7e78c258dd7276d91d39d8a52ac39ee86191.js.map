{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/base/BtnLayer.ts"],"names":["Component","tween","Label","Sprite","_decorator","UITransform","v3","ccclass","property","BtnLayer","type","tooltip","bolInit","intCheckTime","runTime","runTimeLast","onLoad","node","getChildByName","active","setStart","parent","getComponent","spriteFrame","width","height","nodeLight","xscale","yscale","scale","Math","max","show","set","position","to","hide","delay","random","union","repeatForever","start","setStop","stop","update","dt","color","toHEX","toLowerCase"],"mappings":"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","sourcesContent":["import { Component, tween, Label,  Node, Sprite, _decorator, UITransform, v3, Tween } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BtnLayer')\r\nexport class BtnLayer extends Component {\r\n\r\n    bolInit = false\r\n    intCheckTime = 1\r\n    runTime: 0;\r\n    runTimeLast: 0;\r\n    tween: Tween<Node>;\r\n\r\n    @property({ type: Label, tooltip: \"发光\" }) light: Node = null;\r\n\r\n    onLoad() {\r\n        this.bolInit = false;\r\n        this.runTime = 0;\r\n        this.runTimeLast = 0;\r\n        this.intCheckTime = 1;\r\n        this.tween = null;\r\n        this.node.getChildByName(\"light\").active = false\r\n\r\n    }\r\n\r\n    setStart() {\r\n        if (this.node.parent && this.tween == null) {\r\n            this.runTime = 0;\r\n            this.runTimeLast = 0;\r\n            if (this.node.getComponent(Sprite).spriteFrame == null)\r\n                this.node.getComponent(Sprite).spriteFrame = this.node.parent.getComponent(Sprite).spriteFrame;\r\n                \r\n            this.node.getComponent(UITransform).width = this.node.parent.getComponent(UITransform).width;\r\n            this.node.getComponent(UITransform).height = this.node.parent.getComponent(UITransform).height;\r\n\r\n            //光放大\r\n            let nodeLight = this.node.getChildByName(\"light\");\r\n            let xscale = this.node.parent.getComponent(UITransform).width / nodeLight.getComponent(UITransform).width;\r\n            let yscale = this.node.parent.getComponent(UITransform).height / nodeLight.getComponent(UITransform).height;\r\n            let scale = Math.max(xscale, yscale);\r\n            nodeLight.scale = v3(scale,scale,1);\r\n            this.node.getChildByName(\"light\").active =true\r\n\r\n            this.tween = tween(nodeLight).show().set({ position: v3(-(this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0) }).to(0.8, { position: v3((this.node.parent.getComponent(UITransform).width + nodeLight.getComponent(UITransform).width) * 0.5, 0, 0) }).hide().delay(0.2 + Math.random() * 0.5).union().repeatForever();\r\n            this.tween.start();\r\n        }\r\n    }\r\n\r\n    setStop() {\r\n        if (this.tween) {\r\n            this.tween.stop();\r\n            this.tween = null;\r\n            this.node.getChildByName(\"light\").active =false\r\n            this.node.getChildByName(\"light\").position = v3(-(this.node.parent.getComponent(UITransform).width + this.node.getChildByName(\"light\").getComponent(UITransform).width) * 0.5, 0,0);\r\n        }\r\n    };\r\n\r\n    update(dt) {\r\n        this.runTime += dt;\r\n        // if(!this.bolInit)\r\n        // {\r\n        //     this.bolInit = true;\r\n        //     this.setStart();\r\n        // }\r\n        if (this.runTime > this.intCheckTime) {\r\n            this.runTime = 0;\r\n            if (this.node.parent.getComponent(Sprite).color.toHEX(\"#rrggbb\").toLowerCase() == \"ffffff\") {\r\n                this.setStart();\r\n            }\r\n            else this.setStop();\r\n        }\r\n    }\r\n}\r\n\r\n"]}