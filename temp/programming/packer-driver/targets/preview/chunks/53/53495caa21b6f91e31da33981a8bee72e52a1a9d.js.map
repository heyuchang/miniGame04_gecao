{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/tyqSDK/cocos/layer/TyqMoreGameLayer.ts"],"names":["_decorator","tyqSDK","tyqSDKConfig","TyqBaseLayer","ccclass","property","TyqMoreGameLayer","level","isShowBanner","lastBannerShow","onLoad","obj","isBannerAdShowing","hideBannerAd","showCustomHorizontalTopAd","showCustomRectCenterAd","onButtonClick","node","name","onClickBtnGoOn","val","getSwitchValue","paramsKeys","tyq_banner_touch","parseInt","showBannerAd","scheduleOnce","Math","random","unscheduleAllCallbacks","closeLayer","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAeA,MAAAA,U,OAAAA,U;;AACNC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;kCAGjBM,gB,WADZF,OAAO,CAAC,kBAAD,C,gBAAR,MACaE,gBADb;AAAA;AAAA,wCACmD;AAAA;AAAA;AAAA,eAEvCC,KAFuC,GAEvB,CAFuB;AAAA,eAIvCC,YAJuC,GAIf,KAJe;AAAA,eAKvCC,cALuC,GAKb,KALa;AAAA;;AAO/CC,QAAAA,MAAM,GAAG;AACL,gBAAMA,MAAN;AAEA,eAAKH,KAAL,GAAa,KAAKI,GAAL,CAASJ,KAAtB;AAEA,eAAKE,cAAL,GAAsB;AAAA;AAAA,gCAAOG,iBAAP,EAAtB;AACA;AAAA;AAAA,gCAAOC,YAAP;AAEA;AAAA;AAAA,gCAAOC,yBAAP,CAAiC,IAAjC;AACA;AAAA;AAAA,gCAAOC,sBAAP;AACH;;AAEDC,QAAAA,aAAa,CAACC,IAAD,EAAaC,IAAb,EAA2B;AACpC,kBAAQA,IAAR;AACI,iBAAK,SAAL;AACI,mBAAKC,cAAL,CAAoBF,IAApB;AACA;;AACJ;AACI;AALR;AAOH;;AAEDE,QAAAA,cAAc,CAACF,IAAD,EAAa;AACvB,cAAIG,GAAG,GAAG;AAAA;AAAA,gCAAOC,cAAP,CAAsB;AAAA;AAAA,4CAAaC,UAAb,CAAwBC,gBAA9C,CAAV;;AACA,cAAIH,GAAG,IAAI,KAAKb,KAAL,GAAaiB,QAAQ,CAACJ,GAAD,CAAhC,EAAuC;AACnC,gBAAI,CAAC,KAAKZ,YAAV,EAAwB;AACpB,mBAAKA,YAAL,GAAoB,IAApB;AACA;AAAA;AAAA,oCAAOiB,YAAP;AACA,mBAAKC,YAAL,CAAkB,MAAM;AACpB;AAAA;AAAA,sCAAOb,YAAP;AACH,eAFD,EAEG,MAAMc,IAAI,CAACC,MAAL,EAFT;AAGA;AACH;AACJ;;AAED,eAAKC,sBAAL;AACA,eAAKC,UAAL;;AACA,cAAI,KAAKC,EAAT,EAAa;AACT,iBAAKA,EAAL;AACH;;AAED,cAAI,KAAKtB,cAAT,EAAyB;AACrB;AAAA;AAAA,kCAAOgB,YAAP;AACH;AAEJ;;AApD8C,O","sourcesContent":["import { Node, _decorator } from 'cc';\r\nimport { tyqSDK } from '../../tyqSDK';\r\nimport { tyqSDKConfig } from '../../tyqSDKConfig';\r\nimport { TyqBaseLayer } from './TyqBaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('TyqMoreGameLayer')\r\nexport class TyqMoreGameLayer extends TyqBaseLayer {\r\n\r\n    private level: number = 0;\r\n\r\n    private isShowBanner: boolean = false;\r\n    private lastBannerShow: boolean = false;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.level = this.obj.level;\r\n\r\n        this.lastBannerShow = tyqSDK.isBannerAdShowing();\r\n        tyqSDK.hideBannerAd();\r\n\r\n        tyqSDK.showCustomHorizontalTopAd(true);\r\n        tyqSDK.showCustomRectCenterAd();\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            case \"btnGoOn\":\r\n                this.onClickBtnGoOn(node);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGoOn(node: Node) {\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_touch);\r\n        if (val && this.level > parseInt(val)) {\r\n            if (!this.isShowBanner) {\r\n                this.isShowBanner = true;\r\n                tyqSDK.showBannerAd();\r\n                this.scheduleOnce(() => {\r\n                    tyqSDK.hideBannerAd();\r\n                }, 1.5 + Math.random());\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.unscheduleAllCallbacks();\r\n        this.closeLayer();\r\n        if (this.cb) {\r\n            this.cb();\r\n        }\r\n\r\n        if (this.lastBannerShow) {\r\n            tyqSDK.showBannerAd();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n"]}