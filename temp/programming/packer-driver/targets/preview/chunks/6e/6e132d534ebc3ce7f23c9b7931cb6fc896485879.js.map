{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/MainLayer.ts"],"names":["EditBox","Label","Node","sp","Sprite","tween","v3","Vec3","VideoPlayer","view","_decorator","myLog","Channel","tyqAdManager","ChannelFlag","tyqSDK","utilTools","constants","audioManager","designManager","RedPointLogicMgr","mapModel","playerModel","UserData","BaseLayer","TopUILayer","ccclass","property","MainLayer","type","toggles","togglesLock","emailRedPointNode","daySignRedPointNode","dayTaskRedPointNode","vipRedPointNode","duihuanBg","btnShare","videoPlayer","shurukuang","onLoad","getNodeByPath","btnPyramid","getInstance","roleLv","config","qingdianLock","getComponent","color","colors","yin","parseColor","btnDayTask","taksLock","btnGuess","caiquanLock","onClickBtnDuihuan","active","tishi","getChildByName","onClickBtnCloseTuihuan","onClickBtnTuihuan","str","string","strArr","split","length","curPath","index","remoteURL","onEnable","channel","WECHAT_JJWS","WECHAT_MRTGD","getChannel","OPPO_MINI_GAME","onDisable","onDestroy","refreshRedPoint","hasLetterAward","hasDaySignAward","hasDayTaskAward","hasVipAward","start","btnset","btnEmail","node","parent","position","y","x","z","screen1","getVisibleSize","width","height","btnGo","Map","_isShowOpenLevel","getCurMap","initMapLevel","role","delay","call","self","to","scale","arr","propArr","getRowsByType","tableName","CNTM","i","data","award","push","isHaveProp","btnRedBox","removeFromParent","union","repeatForever","ins","setRPointView","checkChapterCanReward","getPatrolState","level","isaction","mapData","getTable","map","setSpriteFrame2","id","bundles","wwqVec","iconIndex","energy","leveldata","getLevelData","getTimeStrChinese","Time","stop","skin","Skeleton","setSkin","set","setSpineData2","monster","animation","loop","handNode","curMap","power","onClickBtnGo","playEffect","createNotice","usePower","topUILayer","showUseAnimal","addDayTaskNum","enterMapWithMapId","onClickBtnMap","closeLayer","openLayer","layers","LevelLayer","onClickBtnChapter","ChapterLayer","chapter","onClickBtnPartol","PatrolLayer","onClickBtnSet","SettingLayer","onClickBtnDayTask","DayTaskLayer","onClickBtnDaySign","DaySignLayer","onClickBtnGuess","GuessGameLayer","onClickBtnPyramid","PyramidDrawLayer","onClickOpenLayer","event","onClickBtnLetter","LetterLayer","onClickBtnEquipCompose","BlessLayer","onClickBtnSkinChange","SkinChangeLayer","onClickBtnVip","VipLayer","onClickBtnShare","ShareLayer","eventSendCustomEvent"],"mappings":"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","sourcesContent":["import { EditBox, Label, Node, sp, Sprite, tween, v3, Vec3, VideoPlayer, view, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { Channel, tyqAdManager } from '../../../tyqSDK/tyqAdManager';\r\nimport { ChannelFlag, tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { utilTools } from '../../../utils/utilTools';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { mapModel } from '../../model/mapModel';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { TopUILayer } from './TopUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MainLayer')\r\nexport class MainLayer extends BaseLayer {\r\n\r\n    toggles: Node[] = [];\r\n    togglesLock = [true, false, false, false, true];\r\n\r\n    @property({ type: Node }) btnRedBox: Node = null;\r\n    @property({ type: Node }) handNode: Node = null;\r\n\r\n    emailRedPointNode: Node;\r\n    daySignRedPointNode: Node;\r\n    dayTaskRedPointNode: Node;\r\n    vipRedPointNode: Node;\r\n    duihuanBg: Node;\r\n\r\n    btnShare: Node;\r\n    videoPlayer: Node;\r\n\r\n    shurukuang: EditBox;\r\n\r\n    onLoad() {\r\n        // this.chooseDesignResolution()\r\n        // let mapData = designManager.getTable(constants.tableName.map)\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + (mapData[curMap].id), null, constants.bundles.wwqVec)\r\n        // this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[curMap].energy\r\n        // let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        // this.getNodeByPath(\"Map/timeLabel\").getComponent(Label).string = \"最高生存时间：\" + utilTools.getTimeStrChinese(leveldata.Time * 1000)\r\n        // RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnMap/icon\"),null, true)\r\n\r\n        this.emailRedPointNode = this.getNodeByPath(\"btnLetter/redPoint\");\r\n        this.daySignRedPointNode = this.getNodeByPath(\"btnsLeft/btnDaySign/redPoint\");\r\n        this.dayTaskRedPointNode = this.getNodeByPath(\"btnsLeft/btnDayTask/redPoint\");\r\n        this.vipRedPointNode = this.getNodeByPath(\"btnsRight/btnVip/redPoint\");\r\n\r\n        this.btnShare = this.getNodeByPath(\"btnsRight/btnShare\");\r\n\r\n        let btnPyramid = this.getNodeByPath(\"btnsLeft/btnPyramid\")\r\n        if (btnPyramid) {\r\n            if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n                btnPyramid.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        let btnDayTask = this.getNodeByPath(\"btnsLeft/btnDayTask\")\r\n        if (btnDayTask) {\r\n            if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n                btnDayTask.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        let btnGuess = this.getNodeByPath(\"btnsLeft/btnGuess\")\r\n        if (btnGuess) {\r\n            if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n                btnGuess.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n            }\r\n        }\r\n\r\n        // this.duihuanBg = this.getNodeByPath(\"patbg1\");\r\n        // this.duihuanBg.active = false\r\n\r\n        // this.videoPlayer = this.getNodeByPath(\"VideoPlayer\");\r\n        // this.videoPlayer.active = false\r\n\r\n       // this.shurukuang = this.duihuanBg.getChildByName(\"EditBox\").getComponent(EditBox)\r\n    }\r\n\r\n    onClickBtnDuihuan() {\r\n        this.duihuanBg.active = true\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n    }\r\n\r\n    onClickBtnCloseTuihuan() {\r\n        this.duihuanBg.active = false\r\n    \r\n    }\r\n    onClickBtnTuihuan() {\r\n        let tishi = this.duihuanBg.getChildByName(\"tishilabel\")\r\n        tishi.active = false\r\n        let str = this.shurukuang.getComponent(EditBox).string\r\n        let strArr = str.split(\"_\")\r\n        if (strArr.length > 1) {\r\n            if (strArr[0] == \"tyq\") {\r\n                let curPath = \"\"\r\n                let index = strArr[1]\r\n                curPath = \"https://oss.game.xmtyq.com/game/video_wxgame/bpxt/tyq_\" + (index) + \".mp4?token=6d4ae1582d1f97a26ccf250d29313750\"\r\n                tishi.active = false\r\n                this.videoPlayer.getComponent(VideoPlayer).remoteURL = curPath\r\n                this.videoPlayer.active = true\r\n            } else {\r\n                tishi.active = true\r\n            }\r\n        } else {\r\n            tishi.active = true\r\n        }\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n        // this.addEventArr([\r\n        //     msgac.mapEnter,\r\n        // ]);\r\n\r\n        if ((tyqSDK.channel == ChannelFlag.WECHAT_JJWS || tyqSDK.channel == ChannelFlag.WECHAT_MRTGD) && tyqAdManager.getChannel() != Channel.OPPO_MINI_GAME) {\r\n            this.btnShare.active = true;\r\n        } else {\r\n            this.btnShare.active = false;\r\n        }\r\n\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    refreshRedPoint() {\r\n        this.emailRedPointNode.active = playerModel.hasLetterAward();\r\n        this.daySignRedPointNode.active = playerModel.hasDaySignAward();\r\n        this.dayTaskRedPointNode.active = UserData.getInstance().roleLv >= designManager.config.taksLock && playerModel.hasDayTaskAward();\r\n        this.vipRedPointNode.active = playerModel.hasVipAward();\r\n    }\r\n\r\n    start() {\r\n        let btnset = this.getNodeByPath(\"btnSet\")\r\n        let btnEmail = this.getNodeByPath(\"btnLetter\")\r\n        let TopUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n\r\n        if (btnset.position.y > TopUILayer.position.y - 84) {\r\n            btnset.position = v3(btnset.position.x, TopUILayer.position.y - 84, btnset.position.z)\r\n            btnEmail.position = v3(btnEmail.position.x, TopUILayer.position.y - 84, btnEmail.position.z)\r\n        }\r\n\r\n        let screen1 = view.getVisibleSize()\r\n        if (screen1.width / screen1.height >= 720 / 1440) {\r\n            let btnGo = this.getNodeByPath(\"btnGo\")\r\n            btnGo.position = new Vec3(btnGo.position.x, -360, btnGo.position.z)\r\n            let Map = this.getNodeByPath(\"Map\")\r\n            Map.position = new Vec3(Map.position.x, 30, Map.position.z)\r\n        }\r\n        if (UserData.getInstance()._isShowOpenLevel && UserData.getInstance().getCurMap() > 1) {\r\n            UserData.getInstance()._isShowOpenLevel = false\r\n            this.initMapLevel(UserData.getInstance().getCurMap() - 1, false)\r\n            let role = this.getNodeByPath(\"Map/role\")\r\n            role.active = false\r\n            tween(role).delay(1).call(function () {\r\n                role.active = true\r\n            }).start()\r\n            let self = this\r\n            tween(this.getNodeByPath(\"Map/btnMap\")).delay(0.35).to(0.35, { scale: v3(0, 0, 0) }).call(function () {\r\n                self.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n            }).to(0.2, { scale: v3(1, 1, 1) }).start()\r\n        } else {\r\n            this.initMapLevel(UserData.getInstance().getCurMap(), true)\r\n        }\r\n\r\n        let arr = []\r\n        let propArr = designManager.getRowsByType(constants.tableName.CNTM, 1)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i].award[0]\r\n            arr.push(data[0])\r\n        }\r\n        if (UserData.getInstance().isHaveProp(arr)) {\r\n            this.btnRedBox.removeFromParent()\r\n        } else {\r\n            tween(this.btnRedBox).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 20, 0) }).to(3, { position: v3(-180, -90, 0) }).to(3, { position: v3(180, 80, 0) }).to(3, { position: v3(-180, -80, 0) }).to(3, { position: v3(180, 20, 0) })\r\n                .to(3, { position: v3(-180, 120, 0) }).to(3, { position: v3(180, 220, 0) }).to(3, { position: v3(-180, 350, 0) }).union().repeatForever().start()\r\n        }\r\n\r\n        // let role = this.getNodeByPath(\"Map/role\")\r\n        // if (UserData.getInstance().getCurMap() == 1) {\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else if (UserData.getInstance().getCurMap() == 2) {\r\n        //     this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n        //         role.getComponent(sp.Skeleton).animation = \"walk\"\r\n        //         role.getComponent(sp.Skeleton).loop = true\r\n        //     })\r\n        //     tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n        // } else {\r\n        //     role.active = false\r\n        // }\r\n        // mapModel.loadMapRes((percent: number) => {\r\n        // }, () => { })\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnChapter\"), null, UserData.getInstance().checkChapterCanReward())\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, UserData.getInstance().getPatrolState() <= 0)\r\n    }\r\n\r\n    initMapLevel(level, isaction) {\r\n\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/map_name\"), \"homeLayer/map_name\" + (mapData[level - 1].id), null, constants.bundles.wwqVec)\r\n\r\n        let iconIndex = (mapData[level - 1].id - 1) % 2 + 1;\r\n        this.setSpriteFrame2(this.getNodeByPath(\"Map/btnMap/icon\"), \"homeLayer/ui_map\" + iconIndex, null, constants.bundles.wwqVec)\r\n\r\n        this.getNodeByPath(\"btnGo/Label\").getComponent(Label).string = \"X\" + mapData[level - 1].energy\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.getNodeByPath(\"Map/timeLabel\").getComponent(Label).string = \"最高生存时间：\" + utilTools.getTimeStrChinese(leveldata.Time * 1000)\r\n\r\n        let role = this.getNodeByPath(\"Map/role\")\r\n        if (isaction) {\r\n\r\n            tween(role).stop()\r\n            let skin = \"skin1\";\r\n            if (level == 3 || level == 4) {\r\n                skin = \"skin2\";\r\n            }\r\n            if (level == 1 || level == 3) {\r\n                role.getComponent(sp.Skeleton).setSkin(skin);\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).to(0.8, { position: v3(90, 0, 0) }).to(0.8, { position: v3(130, 0, 0) }).set({ scale: v3(1.5, 1.5, 0) }).to(0.5, { position: v3(90, 0, 0) }).to(0.8, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else if (level == 2 || level == 4) {\r\n                this.setSpineData2(role, constants.bundles.monster, \"monster22/ncg\", function () {\r\n                    role.getComponent(sp.Skeleton).animation = \"walk\"\r\n                    role.getComponent(sp.Skeleton).loop = true\r\n                    role.getComponent(sp.Skeleton).setSkin(skin);\r\n                })\r\n                tween(role).set({ scale: v3(1.5, 1.5, 0) }).to(2.5, { position: v3(-138, -48, 0) }).set({ scale: v3(-1.5, 1.5, 0) }).to(2.5, { position: v3(90, -48, 0) }).union().repeatForever().start()\r\n            } else {\r\n                role.active = false\r\n            }\r\n        }\r\n\r\n        this.handNode.active = false;\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        if (UserData.getInstance().power >= mapData[curMap].energy) {\r\n            this.handNode.active = true;\r\n        }\r\n    }\r\n\r\n    onClickBtnGo() {\r\n        // let node = (this.getNodeByPath(\"prop_coin1\"))\r\n        // // let node = new Node\r\n        // // node.addComponent(Sprite)\r\n        // let btnGo = this.getNodeByPath(\"ui\")\r\n        // UserData.getInstance().showGetAnimal(btnGo, node, [0, 0], [0, 800])\r\n        // return\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curMap = UserData.getInstance().getCurMap() - 1\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n\r\n        if (UserData.getInstance().power < mapData[curMap].energy) {\r\n            this.createNotice(\"体力不足\")\r\n            return\r\n        }\r\n\r\n        UserData.getInstance().usePower(0 - mapData[curMap].energy)\r\n        let topUILayer = this.node.parent.parent.getChildByName(\"TopUILayer\")\r\n        topUILayer.getComponent(TopUILayer).showUseAnimal(1, 0 - mapData[curMap].energy)\r\n\r\n        playerModel.addDayTaskNum(7, mapData[curMap].energy);\r\n\r\n        mapModel.enterMapWithMapId(UserData.getInstance().getCurMap());\r\n    }\r\n\r\n    onClickBtnMap() {\r\n        myLog.i(\"btnMap\")\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.LevelLayer);\r\n    }\r\n\r\n    onClickBtnChapter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        myLog.i(\"btnMap\")\r\n        this.closeLayer()\r\n        this.openLayer(constants.layers.ChapterLayer, { chapter: 11 });\r\n    }\r\n\r\n    onClickBtnPartol() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.PatrolLayer);\r\n        RedPointLogicMgr.ins().setRPointView(this.getNodeByPath(\"Map/btnPortal\"), null, false)\r\n    }\r\n\r\n    onClickBtnSet() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SettingLayer);\r\n    }\r\n\r\n    onClickBtnDayTask() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.taksLock) {\r\n            this.createNotice(\"角色\" + designManager.config.taksLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.DayTaskLayer);\r\n    }\r\n\r\n    onClickBtnDaySign() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.DaySignLayer);\r\n    }\r\n\r\n    onClickBtnGuess() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.caiquanLock) {\r\n            this.createNotice(\"角色\" + designManager.config.caiquanLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.GuessGameLayer);\r\n    }\r\n\r\n    onClickBtnPyramid() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        if (UserData.getInstance().roleLv < designManager.config.qingdianLock) {\r\n            this.createNotice(\"角色\" + designManager.config.qingdianLock + \"级后解锁\");\r\n            return\r\n        }\r\n        this.openLayer(constants.layers.PyramidDrawLayer);\r\n    }\r\n\r\n    onClickOpenLayer(event, data) {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(data);\r\n    }\r\n\r\n    onClickBtnLetter() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.LetterLayer);\r\n    }\r\n\r\n    onClickBtnEquipCompose() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.BlessLayer);\r\n    }\r\n\r\n    onClickBtnSkinChange() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.SkinChangeLayer);\r\n    }\r\n\r\n    onClickBtnVip() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.VipLayer);\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.openLayer(constants.layers.ShareLayer);\r\n        tyqSDK.eventSendCustomEvent(\"参与活动分享\")\r\n    }\r\n\r\n}\r\n\r\n"]}