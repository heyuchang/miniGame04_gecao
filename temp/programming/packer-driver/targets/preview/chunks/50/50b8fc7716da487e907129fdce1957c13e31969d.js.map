{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/skill/Skill7.ts"],"names":["Component","_decorator","cocosUtil","audioManager","mapModel","physicsGroup","ccclass","property","Skill7","skill","bulletUtil","init","extraObj","lv","row","endCb","isValid","node","bullet","recycleSelf","bulletSystem","addBullet","bulletId","PLAYER_BULLET","playEffect","audio","initBulletScale","initScale","forceDestroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACXC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;wBAEaO,M,WADZF,OAAO,CAAC,QAAD,C,gBAAR,MACaE,MADb,SAC4BR,SAD5B,CACsC;AAAA;AAAA;AAAA,eAElCS,KAFkC;AAAA,eAIlCC,UAJkC;AAAA;;AAMlCC,QAAAA,IAAI,CAACF,KAAD,EAAe;AACf,eAAKA,KAAL,GAAaA,KAAb;AAEA,eAAKC,UAAL,GAAkB,IAAlB;AAEA,cAAIE,QAAQ,GAAG;AACXC,YAAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWK,GAAX,CAAeD,EADR;AAEXE,YAAAA,KAAK,EAAGL,UAAD,IAAqB;AACxB,kBAAI,CAAC;AAAA;AAAA,0CAAUM,OAAV,CAAkB,KAAKC,IAAvB,CAAL,EAAmC;AAC/BP,gBAAAA,UAAU,CAACQ,MAAX,CAAkBC,WAAlB;AACA;AACH;;AACD,mBAAKT,UAAL,GAAkBA,UAAlB;AACH;AARU,WAAf;AAUA;AAAA;AAAA,oCAASU,YAAT,CAAsBC,SAAtB,CAAgC,KAAKZ,KAAL,CAAWK,GAAX,CAAeQ,QAA/C,EAAyD;AAAA;AAAA,4CAAaC,aAAtE,EAAqF,IAArF,EAA2F,IAA3F,EAAiGX,QAAjG;AACA;AAAA;AAAA,4CAAaY,UAAb,CAAwB,KAAKf,KAAL,CAAWK,GAAX,CAAeW,KAAvC;AAEH;;AAEDC,QAAAA,eAAe,GAAG;AACd,cAAI;AAAA;AAAA,sCAAUV,OAAV,CAAkB,KAAKN,UAAvB,CAAJ,EAAwC;AACpC,iBAAKA,UAAL,CAAgBiB,SAAhB;AACH;AACJ;;AAEDC,QAAAA,YAAY,GAAG;AACX,cAAI;AAAA;AAAA,sCAAUZ,OAAV,CAAkB,KAAKN,UAAvB,CAAJ,EAAwC;AACpC,iBAAKA,UAAL,CAAgBQ,MAAhB,CAAuBC,WAAvB;AACH;AACJ;;AApCiC,O","sourcesContent":["import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 力场\r\n@ccclass('Skill7')\r\nexport class Skill7 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    bulletUtil: any;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n        this.bulletUtil = null;\r\n\r\n        let extraObj = {\r\n            lv: this.skill.row.lv,\r\n            endCb: (bulletUtil: any) => {\r\n                if (!cocosUtil.isValid(this.node)) {\r\n                    bulletUtil.bullet.recycleSelf();\r\n                    return;\r\n                }\r\n                this.bulletUtil = bulletUtil;\r\n            }\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, null, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n\r\n    }\r\n\r\n    initBulletScale() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.initScale();\r\n        }\r\n    }\r\n\r\n    forceDestroy() {\r\n        if (cocosUtil.isValid(this.bulletUtil)) {\r\n            this.bulletUtil.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n"]}