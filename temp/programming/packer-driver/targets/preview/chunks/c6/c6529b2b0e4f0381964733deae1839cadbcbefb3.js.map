{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/skill/Skill9.ts"],"names":["Component","_decorator","cocosUtil","audioManager","mapModel","physicsGroup","ccclass","property","Skill9","skill","num","timeCount","init","subNum","updateLogic","dt","row","getAtkCd","direction","getCircleDirectionArr","extraObj","invokeClass","time","getDuration","bulletSystem","addBullet","bulletId","PLAYER_BULLET","playEffect","audio"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACXC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;wBAEaO,M,WADZF,OAAO,CAAC,QAAD,C,gBAAR,MACaE,MADb,SAC4BR,SAD5B,CACsC;AAAA;AAAA;AAAA,eAElCS,KAFkC;AAAA,eAIlCC,GAJkC,GAIpB,CAJoB;AAAA,eAKlCC,SALkC,GAKd,CALc;AAAA;;AAOlCC,QAAAA,IAAI,CAACH,KAAD,EAAe;AACf,eAAKA,KAAL,GAAaA,KAAb;AACH;;AAEDI,QAAAA,MAAM,GAAG;AACL,eAAKH,GAAL;AACH;;AAEDI,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,eAAKJ,SAAL,IAAkBI,EAAlB;;AACA,cAAI,KAAKL,GAAL,IAAY,KAAKD,KAAL,CAAWO,GAAX,CAAeN,GAA/B,EAAoC;AAChC;AACA;AACH;;AACD,cAAI,KAAKC,SAAL,GAAiB,KAAKF,KAAL,CAAWQ,QAAX,EAArB,EAA4C;AACxC;AACH;;AAED,eAAKN,SAAL,GAAiB,CAAjB;AACA,eAAKD,GAAL,GAXoB,CAapB;;AACA,cAAIQ,SAAS,GAAG;AAAA;AAAA,sCAAUC,qBAAV,CAAgC,CAAhC,EAAmC,CAAnC,CAAhB;AACA,cAAIC,QAAQ,GAAG;AACXC,YAAAA,WAAW,EAAE,IADF;AAEXC,YAAAA,IAAI,EAAE,KAAKb,KAAL,CAAWc,WAAX;AAFK,WAAf;AAIA;AAAA;AAAA,oCAASC,YAAT,CAAsBC,SAAtB,CAAgC,KAAKhB,KAAL,CAAWO,GAAX,CAAeU,QAA/C,EAAyD;AAAA;AAAA,4CAAaC,aAAtE,EAAqF,IAArF,EAA2FT,SAA3F,EAAsGE,QAAtG;AACA;AAAA;AAAA,4CAAaQ,UAAb,CAAwB,KAAKnB,KAAL,CAAWO,GAAX,CAAea,KAAvC;AACH;;AApCiC,O","sourcesContent":["import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 钻头\r\n@ccclass('Skill9')\r\nexport class Skill9 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    num: number = 0;\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    subNum() {\r\n        this.num--;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.num >= this.skill.row.num) {\r\n            // 数量已达上限\r\n            return;\r\n        }\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.num++;\r\n\r\n        // 出射方向随机\r\n        let direction = cocosUtil.getCircleDirectionArr(1)[0];\r\n        let extraObj = {\r\n            invokeClass: this,\r\n            time: this.skill.getDuration()\r\n        };\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n"]}