{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/bullet/Bullet1031.ts"],"names":["Component","tween","UITransform","_decorator","cocosUtil","mapModel","HintNames","ccclass","property","bullet1031","bullet","contactNotHide","moveSpeed","yinTimeCount","init","node","by","angle","repeatForever","start","update","dt","pos","getPosition","moveDis","direction","clone","multiplyScalar","add","setPosition","tf","bodyNode","getComponent","extraObj","width","height","hintSystem","addHint","feiBiao","convertToWorldSpace","recycleSelfEnd","isValid","subNum"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;;AAC/BC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U,GAE9B;;4BAEaM,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCT,SADhC,CAC0C;AAAA;AAAA;AAAA,eAEtCU,MAFsC;AAAA,eAGtCC,cAHsC,GAGZ,IAHY;AAAA,eAKtCC,SALsC;AAAA,eAMtCC,YANsC;AAAA;;AAQtCC,QAAAA,IAAI,CAACJ,MAAD,EAAiB;AACjB,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKE,SAAL,GAAiB,IAAjB;AACA,eAAKC,YAAL,GAAoB,CAApB;AAEAZ,UAAAA,KAAK,CAAC,KAAKc,IAAN,CAAL,CAAiBC,EAAjB,CAAoB,GAApB,EAAyB;AAAEC,YAAAA,KAAK,EAAE,CAAC;AAAV,WAAzB,EAA0CC,aAA1C,GAA0DC,KAA1D;AAEH;;AAEDC,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf,cAAIC,GAAG,GAAG,KAAKP,IAAL,CAAUQ,WAAV,EAAV;AACA,eAAKX,SAAL,IAAkB,EAAlB;AACA,cAAIY,OAAO,GAAG,KAAKZ,SAAL,GAAiBS,EAA/B;AACA,cAAII,SAAS,GAAG,KAAKf,MAAL,CAAYe,SAAZ,CAAsBC,KAAtB,GAA8BC,cAA9B,CAA6CH,OAA7C,CAAhB;AACAF,UAAAA,GAAG,CAACM,GAAJ,CAAQH,SAAR;AACA,eAAKV,IAAL,CAAUc,WAAV,CAAsBP,GAAtB;AAEA,eAAKT,YAAL,IAAqBQ,EAArB;;AACA,cAAI,KAAKR,YAAL,GAAoB,GAAxB,EAA6B;AACzB,iBAAKA,YAAL,GAAoB,CAApB;AACA,gBAAIiB,EAAE,GAAG,KAAKpB,MAAL,CAAYqB,QAAZ,CAAqBC,YAArB,CAAkC9B,WAAlC,CAAT;AACA,gBAAI+B,QAAQ,GAAG;AACXC,cAAAA,KAAK,EAAEJ,EAAE,CAACI,KADC;AAEXC,cAAAA,MAAM,EAAEL,EAAE,CAACK;AAFA,aAAf;AAIA;AAAA;AAAA,sCAASC,UAAT,CAAoBC,OAApB,CAA4B;AAAA;AAAA,wCAAUC,OAAtC,EAA+C;AAAA;AAAA,wCAAUC,mBAAV,CAA8B,KAAKxB,IAAnC,CAA/C,EAAyF,KAAKA,IAAL,CAAUE,KAAnG,EAA0GgB,QAA1G;AACH;AACJ;;AAEDO,QAAAA,cAAc,GAAG;AACb;AACA,cAAI;AAAA;AAAA,sCAAUC,OAAV,CAAkB,KAAK/B,MAAL,CAAYuB,QAA9B,CAAJ,EAA6C;AACzC,iBAAKvB,MAAL,CAAYuB,QAAZ,CAAqBS,MAArB;AACH;AACJ;;AA1CqC,O","sourcesContent":["import { Component, tween, UITransform, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-飞镖\r\n@ccclass('bullet1031')\r\nexport class bullet1031 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    moveSpeed: number;\r\n    yinTimeCount: number;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveSpeed = 1200;\r\n        this.yinTimeCount = 0;\r\n\r\n        tween(this.node).by(0.2, { angle: -360 }).repeatForever().start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        this.moveSpeed -= 30;\r\n        let moveDis = this.moveSpeed * dt;\r\n        let direction = this.bullet.direction.clone().multiplyScalar(moveDis);\r\n        pos.add(direction);\r\n        this.node.setPosition(pos);\r\n\r\n        this.yinTimeCount += dt;\r\n        if (this.yinTimeCount > 0.2) {\r\n            this.yinTimeCount = 0;\r\n            let tf = this.bullet.bodyNode.getComponent(UITransform);\r\n            let extraObj = {\r\n                width: tf.width,\r\n                height: tf.height,\r\n            };\r\n            mapModel.hintSystem.addHint(HintNames.feiBiao, cocosUtil.convertToWorldSpace(this.node), this.node.angle, extraObj);\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n"]}