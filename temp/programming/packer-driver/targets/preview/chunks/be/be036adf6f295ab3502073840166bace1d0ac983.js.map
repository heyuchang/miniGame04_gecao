{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/weapon/Weapon8.ts"],"names":["Component","_decorator","cocosUtil","constants","mapModel","physicsGroup","ccclass","property","Weapon8","weapon","weaponId","init","atk","pos","getInfoPosition","num","row","lv","design","maxLv","directionArr","getSectorDirectionArr","direction","extraObj","atkPercentAdd","forEach","dir","bulletSystem","addBullet","bulletId","PLAYER_BULLET","atkByShot"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;;AACjBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;yBAEaO,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BR,SAD7B,CACuC;AAAA;AAAA;AAAA,eAEnCS,MAFmC;AAAA,eAGnCC,QAHmC,GAGxB,KAHwB;AAAA;;AAKnCC,QAAAA,IAAI,CAACF,MAAD,EAAiB;AACjB,eAAKA,MAAL,GAAcA,MAAd;AACH;;AAEDG,QAAAA,GAAG,GAAG;AACF;AACA,cAAIC,GAAG,GAAG,KAAKJ,MAAL,CAAYK,eAAZ,CAA4B,CAA5B,EAA+B,IAA/B,CAAV;AACA,cAAIC,GAAG,GAAG,CAAV;;AACA,cAAI,KAAKN,MAAL,CAAYO,GAAZ,CAAgBC,EAAhB,IAAsB;AAAA;AAAA,sCAAUC,MAAV,CAAiBC,KAA3C,EAAkD;AAC9CJ,YAAAA,GAAG,GAAG,CAAN;AACH;;AACD,cAAIK,YAAY,GAAG;AAAA;AAAA,sCAAUC,qBAAV,CAAgC,KAAKZ,MAAL,CAAYa,SAA5C,EAAuD,EAAvD,EAA2DP,GAA3D,CAAnB;AACA,cAAIQ,QAAa,GAAG,EAApB;AACAA,UAAAA,QAAQ,CAACC,aAAT,GAAyB,KAAKf,MAAL,CAAYe,aAArC;AACAJ,UAAAA,YAAY,CAACK,OAAb,CAAsBC,GAAD,IAAe;AAChC;AAAA;AAAA,sCAASC,YAAT,CAAsBC,SAAtB,CAAgC,KAAKnB,MAAL,CAAYO,GAAZ,CAAgBa,QAAhD,EAA0D;AAAA;AAAA,8CAAaC,aAAvE,EAAsFjB,GAAtF,EAA2Fa,GAA3F,EAAgGH,QAAhG;AACH,WAFD,EAVE,CAcF;;AACA,eAAKd,MAAL,CAAYsB,SAAZ;AACH;;AAzBkC,O","sourcesContent":["import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { constants } from '../../../data/constants';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Weapon } from './Weapon';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 魔法弩\r\n@ccclass('Weapon8')\r\nexport class Weapon8 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10165;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n    }\r\n\r\n    atk() {\r\n        // 发出子弹\r\n        let pos = this.weapon.getInfoPosition(0, true);\r\n        let num = 1;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            num = 3;\r\n        }\r\n        let directionArr = cocosUtil.getSectorDirectionArr(this.weapon.direction, 15, num);\r\n        let extraObj: any = {};\r\n        extraObj.atkPercentAdd = this.weapon.atkPercentAdd;\r\n        directionArr.forEach((dir: Vec3) => {\r\n            mapModel.bulletSystem.addBullet(this.weapon.row.bulletId, physicsGroup.PLAYER_BULLET, pos, dir, extraObj);\r\n        });\r\n\r\n        // 枪口发光和后摇动作\r\n        this.weapon.atkByShot();\r\n    }\r\n\r\n}\r\n\r\n"]}