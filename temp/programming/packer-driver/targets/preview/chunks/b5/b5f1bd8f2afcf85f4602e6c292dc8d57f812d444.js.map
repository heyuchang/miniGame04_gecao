{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/tyqSDK/tyqSDK.ts"],"names":["TyqSDK","Game","game","sys","tyqLayerManager","tyqConstants","GNetConf","EType","Channel","tyqAdManager","tyqSDKConfig","Http","NetworkMgr","TyqSDKAppVersion","ChannelFlag","switch_info","master_switch","openid","_playTime","_gameLevel","item_openId","item_watermark","_watermark","_onlineTime","weixin_ads_data","wxGameIconData","levelCount","timeDiff","channel","shareTime","shareCallback","initGame","WECHAT_MRTGD","setLogOpen","setAppVersion","getChannel","ANDROID_233","init","ANDROID_4399","WECHAT","WECHAT_JJWS","WECHAT_Box4399","VIVO_MINI_GAME","OPPO_MINI_GAME","getUrl","httpUrl","mrtgd_HttpUrl","wsUrl","mrtgd_WsUrl","mrtgd_jjws_HttpUrl","mrtgd_jjws_WsUrl","appId","apiKey","cb","server","localStorage","getItem","initOpenId","initAdIds","httpPost","ret","data","current_time_stamp","getTimeStamp","key","arr","log","i","length","keys","push","jumpIconData","name","appid","imgUrl","login","on","EVENT_HIDE","collectPlayeTime","EVENT_SHOW","dt","Date","getTime","undefined","error","urlQuery","getEnterUrlQuery","obj","ads_id","source_openid","pull_in_ads_id","res","encodeURIComponent","watermark","setItem","share","params","wx","shareAppMessage","query","version","appVersion","getSwitchValue","str","df","getConfigProbability","value","rand","Math","random","nowTime","elapsed","info","duration_time","url","successCb","failCb","nonce_str","randomStr","time_stamp","app_version","xhrPost","wxIconData","wxJumpData","collectClickEventGame","event","weixin_ads_id","event_id","strLen","len","$chars","maxPos","pwd","idx","charAt","floor","isSecond","time","now","openId","randOpenId","s","hexDigits","substr","join","eventLevelStart","level","collectLevelInfo","eventLevelEnd","isWin","eventSendCustomEvent","eventType","eventName","adClickUpload","adType","mode","action","pagePath","status","adShowTypes","rewardedAd","interstitialAd","bannerAndCustomAd","stata","curTime","play_time","game_level","isOpen","isLogOpen","message","optionalParams","console","showBannerAd","forceShow","paramsKeys","tyq_banner_turns","parseInt","hideBannerAd","isForce","isBannerAdShowing","showInterstitialAd","showCustomRectCenterAd","failcb","hideCustomRectCenterAd","showCustomVerticalLeftRightAd","tyq_custom_v_switch","hideCustomVerticalLeftRightAd","showCustomHorizontalTopAd","tyq_custom_h_switch","hideCustomHorizontalTopAd","showCustomAd","flag","type","pos","adSize","adId","rect","customAdSizeObj","horizontal","vertical","gird","hideCustomAd","hideCustomAllAd","setCustomRectAdSize","width","height","setCustomHorizontalAdSize","setCustomVerticalAdSize","setCustomGridAdSize","grid","showRewardedAd","eventNames","rewardedAdStart","rewardedAdSuccess","state","onShowLoadingLayer","enterLoadingLayer","onShowHomeLayer","enterHomeLayer","val","tyq_show_main_layer","addLevelCount","startLevel","tyq_reward_level","tyqSDK","tyq_level_count","onShowSettlementLayer","showMoreGameLayer","closeCb","tyq_more_game_level","openLayer","layers","TyqMoreGameLayer","instance"],"mappings":"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","sourcesContent":["import { Game, game, sys } from \"cc\";\r\nimport { VIVO } from \"cc/env\";\r\nimport { tyqLayerManager } from \"./cocos/manager/tyqLayerManager\";\r\nimport { tyqConstants } from \"./cocos/tyqConstants\";\r\nimport { GNetConf } from \"./network/conf\";\r\nimport { VivoManager } from \"./platform/Vivo\";\r\nimport { EType, IPos } from \"./platform/wechat/WXCustomAd\";\r\nimport { Channel, tyqAdManager } from \"./tyqAdManager\";\r\nimport { tyqSDKConfig } from \"./tyqSDKConfig\";\r\nimport { Http } from \"./utils/weHttp\";\r\nimport { NetworkMgr } from \"./utils/weNetworkMgr\";\r\n\r\nexport interface jumpIconData {\r\n    name: string,\r\n    appid: string,\r\n    imgUrl: string,\r\n    weixin_ads_data: string,\r\n    key: string,\r\n}\r\n\r\nexport enum TyqSDKAppVersion {\r\n    VERSION_1 = 1,\r\n    VERSION_2 = 2\r\n}\r\n\r\nexport enum ChannelFlag {\r\n    // 微信小游戏-末日特工队\r\n    WECHAT_MRTGD = 1,\r\n    // 微信小游戏-机甲舞神\r\n    WECHAT_JJWS = 2,\r\n\r\n    WECHAT_Box4399 = 3,\r\n\r\n    VIVO_MINI_GAME = 4,\r\n\r\n    OPPO_MINI_GAME = 5,\r\n\r\n}\r\n\r\nclass TyqSDK {\r\n    public static readonly instance = new TyqSDK();\r\n\r\n    /**开关对象合集 */\r\n    private switch_info: any = {};\r\n    /**总开关 1是开 0是关*/\r\n    private master_switch: number = 0;\r\n    /**用户唯一openID */\r\n    private openid: string = \"\"\r\n    /**游玩时间 */\r\n    private _playTime: number = 0;\r\n\r\n\r\n    private _gameLevel: number = 0;\r\n    private item_openId = \"tyq_item_openid\";\r\n    private item_watermark = \"tyq_item_watermark_\";\r\n    private _watermark: string = \"\";\r\n    private _onlineTime = 0;\r\n\r\n    public weixin_ads_data: Array<Object>[][] = null;\r\n    public wxGameIconData: Array<jumpIconData> = [];\r\n\r\n    // 完成关卡数累计\r\n    private levelCount: number = 0;\r\n    // 服务器与本地的时间差，单位：秒\r\n    private timeDiff: number = 0;\r\n\r\n    // 打包渠道标识\r\n    public channel;\r\n\r\n    // 开始分享时间点\r\n    private shareTime: Date;\r\n    // 分享结果回调\r\n    private shareCallback: Function;\r\n\r\n    public initGame() {\r\n        this.channel = ChannelFlag.WECHAT_MRTGD;\r\n        this.setLogOpen(true);\r\n        this.setAppVersion(1);\r\n        if (tyqAdManager.getChannel() == Channel.ANDROID_233) {\r\n            this.init(\"TyqApp20230213163724\", \"1iK3I97Mx6VuTjPKgUur1RUeV2eHH3OB\"); //233apk\r\n        } else if (tyqAdManager.getChannel() == Channel.ANDROID_4399) {\r\n            this.init(\"TyqApp20230214154427\", \"o4gt48BCrJHyAxBco6aY6ydxwhPsJUxl\"); //4399apk\r\n        } else if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            switch (this.channel) {\r\n                case ChannelFlag.WECHAT_MRTGD:\r\n                    this.init(\"TyqApp20221110115330\", \"VE3URwtUCEWyoxCdOqxDs8SxBNTnNpm1\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_JJWS:\r\n                    this.init(\"TyqApp20230302154121\", \"J1PRD20Bu8rPTtHj2A64xrTiplCRvqbu\"); // 微信小游戏\r\n                    break;\r\n                case ChannelFlag.WECHAT_Box4399:\r\n                    this.init(\"TyqApp20230214154438\", \"NXdhVUkArhQO3izZAdkMUDeYd4XVNSQl\"); //4399 游戏盒小游戏\r\n                    break;\r\n            }\r\n        }else if(tyqAdManager.getChannel() == Channel.VIVO_MINI_GAME){\r\n            this.init(\"TyqApp20230506150422\", \"RFJowvHuA3CX3ArprdniQo93OPmrN8Sq\"); //vivo小游戏\r\n        }else if(tyqAdManager.getChannel() == Channel.OPPO_MINI_GAME){\r\n            this.init(\"TyqApp20230518113406\", \"Mo9qrwx4GKfZuFPdW5qp8BZLD1qlUA8S\"); //oppo小游戏\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns 返回真实的url\r\n     */\r\n    public getUrl() {\r\n        if (this.channel == ChannelFlag.WECHAT_MRTGD) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_WsUrl\r\n            }\r\n        } else if (this.channel == ChannelFlag.WECHAT_JJWS) {\r\n            return {\r\n                httpUrl: GNetConf.mrtgd_jjws_HttpUrl,\r\n                wsUrl: GNetConf.mrtgd_jjws_WsUrl\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 初始化接口，尽量早调用\r\n     * @param appId 运营后台提供 \r\n     * @param apiKey 运营后台提供 \r\n     * @param cb 初始化结果回调 st:1成功  st:0失败\r\n     */\r\n    public init(appId: string, apiKey: string, cb?: (st: number) => void) {\r\n        tyqSDKConfig.appId = appId;\r\n        tyqSDKConfig.apiKey = apiKey;\r\n\r\n        Http.init(tyqSDKConfig.server, tyqSDKConfig.apiKey);\r\n\r\n        this._watermark = sys.localStorage.getItem(this.item_watermark) || \"\";\r\n        this.openid = this.initOpenId();\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            tyqAdManager.initAdIds();\r\n        }\r\n\r\n        this.httpPost(\"api/v1/switch_info\", null, (ret: any) => {\r\n            if (ret.data) {\r\n                this.timeDiff = ret.data.current_time_stamp - this.getTimeStamp(true);\r\n\r\n                this.switch_info = ret.data.switch_info;\r\n                this.master_switch = ret.data.master_switch;\r\n                if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n                    tyqAdManager.initAdIds();\r\n                }\r\n\r\n\r\n                if (ret.data.weixin_ads_data) {\r\n                    this.weixin_ads_data = ret.data.weixin_ads_data;\r\n                    for (let key in this.weixin_ads_data) {\r\n                        let arr = [];\r\n                        this.log('key', key);\r\n                        if (typeof (key)) {\r\n                            for (let i = 0; i < this.weixin_ads_data[key].length; i++) {\r\n                                arr = [];\r\n                                for (let keys in this.weixin_ads_data[key][i]) {\r\n                                    arr.push(this.weixin_ads_data[key][i][keys]);\r\n                                }\r\n                                var jumpIconData: jumpIconData = {\r\n                                    name: arr[0],\r\n                                    appid: arr[1],\r\n                                    imgUrl: arr[2],\r\n                                    weixin_ads_data: arr[3],\r\n                                    key: key,\r\n                                }\r\n                                this.wxGameIconData.push(jumpIconData);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.login();\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, () => {\r\n            if (cb) {\r\n                cb(0);\r\n            }\r\n        });\r\n\r\n        //开始统计玩家停留时间\r\n        this._onlineTime = this.getTimeStamp();\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            this.collectPlayeTime();\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            this._onlineTime = this.getTimeStamp();\r\n            if (this.shareTime) {\r\n                let dt = new Date().getTime() - this.shareTime.getTime();\r\n                this.shareTime = undefined;\r\n                if (dt >= 3000) {\r\n                    if (this.shareCallback) {\r\n                        this.shareCallback();\r\n                        this.shareCallback = undefined;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 登陆接口，初始化接口回调成功后调用\r\n     */\r\n    private login() {\r\n        if (!this.openid) {\r\n            this.error(\"openId为空\");\r\n            return;\r\n        }\r\n\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n\r\n        let obj: any = {};\r\n        if (urlQuery) {\r\n            if (urlQuery.ads_id) {\r\n                obj.ads_id = urlQuery.ads_id;\r\n            }\r\n            if (urlQuery.source_openid) {\r\n                obj.source_openid = urlQuery.source_openid;\r\n            }\r\n            if (urlQuery.pull_in_ads_id) {\r\n                obj.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n            }\r\n        }\r\n        this.httpPost(\"api/v1/login\", obj, (res: any) => {\r\n            this.log(\"登陆：\" + this.openid);\r\n            if (res.data) {\r\n                this._watermark = encodeURIComponent(res.data.watermark);\r\n                sys.localStorage.setItem(this.item_watermark, this._watermark);\r\n            }\r\n        }, () => {\r\n            this.error(\"登录失败,网络错误\");\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 分享\r\n     * @param params 分享url参数 格式：key1=val1&key2=val2\r\n     * @param cb 有回调，就代表分享成功\r\n     */\r\n    share(params?: string, cb?: Function) {\r\n        if (tyqAdManager.getChannel() == Channel.WECHAT) {\r\n            this.shareTime = new Date();\r\n            this.shareCallback = cb;\r\n            wx.shareAppMessage({\r\n                query: params\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 用于区分审核版和正式版的开关参数 1和2，对应后台版本一和版本二参数设置 默认值：1\r\n     * 注意：该接口要在init接口调用之前调用才有效\r\n     * @param version \r\n     */\r\n    public setAppVersion(version: TyqSDKAppVersion) {\r\n        tyqSDKConfig.appVersion = version;\r\n    }\r\n\r\n    /**\r\n     * 直接获取开关值，优先判断总开关，总开关如果是关的，那将全部返回关闭状态\r\n     */\r\n    public getSwitchValue(str: string, df?: any): any {\r\n        if (this.master_switch == 0) {\r\n            return 0;\r\n        }\r\n        if (!this.switch_info[str]) {//不存在这个开关\r\n            this.log(str + \"开关不存在\");\r\n            return df || 0;\r\n        } else if (this.switch_info[str] == \"0\") {\r\n            return 0;\r\n        } else {\r\n            return this.switch_info[str];\r\n        }\r\n    }\r\n    /**\r\n     * 概率开关值\r\n     * @param str \r\n     * @returns \r\n     */\r\n    public getConfigProbability(str: string) {\r\n        let value = this.getSwitchValue(str);\r\n        if (!value) {\r\n            return false;\r\n        }\r\n        let rand = Math.random();\r\n        if (rand < value) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 收集用户玩游戏停留时间\r\n     */\r\n    private collectPlayeTime() {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n\r\n        var nowTime = this.getTimeStamp();\r\n        let elapsed = nowTime - this._onlineTime;\r\n        this.log(\"上传停留\", elapsed);\r\n        let info = {\r\n            duration_time: elapsed\r\n        }\r\n        this.httpPost(\"api/v1/collect_open_game_play_time\", info);\r\n    }\r\n\r\n    private httpPost(url: string, info: any, successCb?: Function, failCb?: Function) {\r\n        if (!info) {\r\n            info = {};\r\n        }\r\n        // 添加公共参数\r\n        info.appid = tyqSDKConfig.appId;\r\n        info.nonce_str = this.randomStr();\r\n        info.time_stamp = this.getTimeStamp(true) + this.timeDiff;\r\n        info.app_version = tyqSDKConfig.appVersion;\r\n        info.openid = this.openid;\r\n        info.watermark = this._watermark;\r\n\r\n        this.log(\"请求\", url, info);\r\n        NetworkMgr.xhrPost(url, info, (ret: any) => {\r\n            // 成功回调\r\n            this.log(\"请求返回\", url, ret);\r\n            if (successCb) {\r\n                successCb(ret);\r\n            }\r\n        }, () => {\r\n            // 失败回调\r\n            if (failCb) {\r\n                failCb();\r\n            }\r\n        });\r\n    }\r\n\r\n    public wxIconData(): Array<jumpIconData> {\r\n        return this.wxGameIconData;\r\n    }\r\n    public wxJumpData(): Array<Object> {\r\n        return this.weixin_ads_data;\r\n    }\r\n\r\n    /**\r\n     * 收集用户点击跳转信息，关于跳转后台小游戏接口触活量统计\r\n     * @param event 时间名称\r\n     * @param weixin_ads_id 后台所对应图片展示位\r\n     */\r\n    public collectClickEventGame(event: string, weixin_ads_id: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let info = {\r\n            event_id: event,\r\n            weixin_ads_id: weixin_ads_id,\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_jumb_ok_cb\", info);\r\n    }\r\n\r\n    /**\r\n     * 获取随机字符串\r\n    */\r\n    private randomStr(strLen: number = 32) {\r\n        let len = strLen;\r\n        let $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'; /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/\r\n        let maxPos = $chars.length;\r\n        let pwd = '';\r\n        for (let idx = 0; idx < len; idx++) {\r\n            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\r\n        }\r\n        return pwd;\r\n    }\r\n\r\n    /**\r\n     * 获取时间戳\r\n     * @param isSecond true 单位：秒    默认单位：毫秒\r\n     * @returns \r\n     */\r\n    private getTimeStamp(isSecond = false) {\r\n        let time = Date.now();\r\n        if (isSecond) {\r\n            time = Math.floor(time / 1000);\r\n        }\r\n        return time;\r\n    }\r\n\r\n    /**\r\n     * openId初始化\r\n     */\r\n    private initOpenId(): string {\r\n        let openId = sys.localStorage.getItem(this.item_openId);\r\n        if (!openId) {\r\n            openId = this.randOpenId();\r\n            sys.localStorage.setItem(this.item_openId, openId);\r\n            this.log(\"注册：\" + openId);\r\n        }\r\n        this.log(\"openid=\", openId);\r\n\r\n        return openId;\r\n    }\r\n    private randOpenId() {\r\n        var s = [], hexDigits = \"0123456789abcdef\";\r\n        for (var i = 0; i < 40; i++) {\r\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n        }\r\n        s[14] = \"4\";\r\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\r\n        s[8] = s[13] = s[18] = s[23] = s[28] = \"-\";\r\n        return s.join(\"\");\r\n    }\r\n\r\n    /**\r\n     * 埋点事件：某个关卡开始时调用\r\n     * @param level 第几个关卡\r\n     */\r\n    public eventLevelStart(level: number) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(1);\r\n    }\r\n    /**\r\n     * 埋点事件：关卡挑战结束时调用\r\n     * @param level 第几个关卡\r\n     * @param isWin 是否成功\r\n     */\r\n    public eventLevelEnd(level: number, isWin: boolean) {\r\n        this._gameLevel = level;\r\n        this.collectLevelInfo(isWin ? 2 : 3);\r\n    }\r\n    /**\r\n     * 自定义埋点事件\r\n     * @param eventType 事件类型 \r\n     * @param eventName 事件名称\r\n     */\r\n    public eventSendCustomEvent(eventType: string, eventName?: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let name = eventName ? eventType + \"-\" + eventName : eventType;\r\n        this.log(\"%cevent:\" + name, \"color:#FF0000\");\r\n        let info = {\r\n            event_id: name,\r\n        }\r\n        this.httpPost(\"api/v1/collect_click_event\", info);\r\n    }\r\n\r\n    public adClickUpload(adType: string, mode: string, action: number, pagePath: string) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        if (pagePath) {\r\n            pagePath = encodeURIComponent(pagePath);\r\n        }\r\n        this.log(\"广告点击上报：\" + adType, mode, action, pagePath);\r\n\r\n        let status = 0;\r\n        if (adType == tyqSDKConfig.adShowTypes.rewardedAd) {\r\n            status == 1;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.interstitialAd) {\r\n            status = 2;\r\n        } else if (adType == tyqSDKConfig.adShowTypes.bannerAndCustomAd) {\r\n            status = 3;\r\n        }\r\n\r\n        let info: any = {};\r\n        info.status = status;\r\n        let urlQuery = tyqAdManager.getEnterUrlQuery();\r\n        if (urlQuery && urlQuery.pull_in_ads_id) {\r\n            info.pull_in_ads_id = urlQuery.pull_in_ads_id;\r\n        }\r\n        this.httpPost(\"api/v1/collect_weixin_ads_mb_act_info\", info);\r\n    }\r\n\r\n\r\n    /**\r\n     * 收集关卡游玩信息\r\n     * @param stata 1：关卡挑战开始  2：胜利  3：失败\r\n     */\r\n    private collectLevelInfo(stata: number) {\r\n        if (!this.openid) {\r\n            this.error(\"没有openid\");\r\n            return;\r\n        }\r\n        let curTime = this.getTimeStamp(false);\r\n        var play_time = 0;\r\n        if (stata == 1) {\r\n            // 关卡开始，记录下开始时间点\r\n            this._playTime = curTime;\r\n        } else {\r\n            // 关卡结束，计算花费时长\r\n            play_time = curTime - this._playTime;\r\n            this._playTime = 0;\r\n        }\r\n\r\n        let info = {\r\n            game_level: this._gameLevel,\r\n            status: stata,\r\n            play_time: play_time\r\n        }\r\n        this.httpPost(\"api/v1/collect_user_play_game_level\", info);\r\n    }\r\n\r\n    /**\r\n     * 设置SDK输出日志开关，默认是关闭的\r\n     * @param isOpen \r\n     */\r\n    public setLogOpen(isOpen: boolean) {\r\n        tyqSDKConfig.isLogOpen = isOpen;\r\n    }\r\n\r\n    public log(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        if (typeof (message) == \"string\") {\r\n            console.log(\"[TyqSDK]\" + message, ...optionalParams);\r\n        } else {\r\n            console.log(\"[TyqSDK]\", message, ...optionalParams);\r\n        }\r\n    }\r\n    public error(message?: any, ...optionalParams: any[]) {\r\n        if (!tyqSDKConfig.isLogOpen) {\r\n            return;\r\n        }\r\n        console.error(\"[TyqSDK]\" + message, ...optionalParams);\r\n    }\r\n\r\n\r\n    // 广告相关接口===========================================start\r\n    /**\r\n     * 显示底部banner广告，内部有调用计数机制，调用+1，调用hideBannerAd会减1，计数为0才会真正隐藏banner广告\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showBannerAd(forceShow?: boolean) {\r\n        let time = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_banner_turns);\r\n        if (time) {\r\n            tyqAdManager.showBannerAd(parseInt(time));\r\n            return;\r\n        }\r\n        if (forceShow) {\r\n            tyqAdManager.showBannerAd();\r\n            return;\r\n        }\r\n      \r\n    }\r\n    /**\r\n     * 隐藏bannner广告\r\n     * @param isForce 是否强制将计数置为零，并强制隐藏\r\n     */\r\n    public hideBannerAd(isForce?: boolean) {\r\n        tyqAdManager.hideBannerAd(isForce);\r\n    }\r\n    /**\r\n     * banner广告是否正在显示中\r\n     */\r\n    public isBannerAdShowing(): boolean {\r\n        return tyqAdManager.isBannerAdShowing();\r\n    }\r\n\r\n    /**\r\n     * 显示插屏广告\r\n     */\r\n    public showInterstitialAd() {\r\n        tyqAdManager.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生矩阵广告\r\n     */\r\n    public showCustomRectCenterAd(failcb = null) {\r\n        tyqAdManager.showCustomRectCenterAd(failcb);\r\n    }\r\n    /**\r\n     * 隐藏原生矩阵广告\r\n     */\r\n    public hideCustomRectCenterAd() {\r\n        tyqAdManager.hideCustomRectCenterAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生垂直广告，显示在左右两边\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomVerticalLeftRightAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_v_switch)) {\r\n            tyqAdManager.showCustomVerticalLeftRightAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生垂直广告\r\n     */\r\n    public hideCustomVerticalLeftRightAd() {\r\n        tyqAdManager.hideCustomVerticalLeftRightAd();\r\n    }\r\n\r\n    /**\r\n     * 显示原生水平广告，显示在顶部\r\n     * @param forceShow true:表示强制显示，不管后台开关配置如何 \r\n     */\r\n    public showCustomHorizontalTopAd(forceShow?: boolean) {\r\n        if (forceShow || this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_custom_h_switch)) {\r\n            tyqAdManager.showCustomHorizontalTopAd();\r\n        }\r\n    }\r\n    /**\r\n     * 隐藏原生水平广告\r\n     */\r\n    public hideCustomHorizontalTopAd() {\r\n        tyqAdManager.hideCustomHorizontalTopAd();\r\n    }\r\n\r\n    /**\r\n     * 通用显示原生广告接口\r\n     * @param flag 标识 \r\n     * @param type 类型 1矩阵；2横向；3竖向；4单格子\r\n     * @param pos 位置信息\r\n     * @param adSize 尺寸\r\n     * @param adId 广告id\r\n     * @param failcb 失败回调\r\n     */\r\n    public showCustomAd(flag: string, type: EType, pos: IPos, adSize?: { width: number, height: number }, adId?: any, failcb?: Function) {\r\n        if (!adSize) {\r\n            switch (type) {\r\n                case EType.rect:\r\n                    adSize = tyqAdManager.customAdSizeObj.rect;\r\n                    break;\r\n                case EType.horizontal:\r\n                    adSize = tyqAdManager.customAdSizeObj.horizontal;\r\n                    break;\r\n                case EType.vertical:\r\n                    adSize = tyqAdManager.customAdSizeObj.vertical;\r\n                    break;\r\n                default:\r\n                    adSize = tyqAdManager.customAdSizeObj.gird;\r\n                    break;\r\n            }\r\n        }\r\n        tyqAdManager.showCustomAd(flag, type, pos, adSize, adId, failcb);\r\n    }\r\n    /**\r\n     * 根据创建标识隐藏原生广告\r\n     * @param flag \r\n     */\r\n    public hideCustomAd(flag: string) {\r\n        tyqAdManager.hideCustomAd(flag);\r\n    }\r\n\r\n    /**\r\n     * 隐藏所有原生广告\r\n     */\r\n    public hideCustomAllAd() {\r\n        tyqAdManager.hideCustomAllAd();\r\n    }\r\n\r\n    /**\r\n     * 修改通用原生矩阵广告的尺寸\r\n     * 后台默认参数 行数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomRectAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.rect.width = width;\r\n        tyqAdManager.customAdSizeObj.rect.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生水平广告的尺寸\r\n     * 后台默认参数 尺寸：80%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomHorizontalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.horizontal.width = width;\r\n        tyqAdManager.customAdSizeObj.horizontal.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生垂直广告的尺寸\r\n     * 后台默认参数 尺寸：90%  默认数：5\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomVerticalAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.vertical.width = width;\r\n        tyqAdManager.customAdSizeObj.vertical.height = height;\r\n    }\r\n    /**\r\n     * 修改通用原生单个格子广告的尺寸\r\n     * 后台默认参数 单个格子 尺寸：90%\r\n     * @param width \r\n     * @param height \r\n     */\r\n    public setCustomGridAdSize(width: number, height: number) {\r\n        tyqAdManager.customAdSizeObj.grid.width = width;\r\n        tyqAdManager.customAdSizeObj.grid.height = height;\r\n    }\r\n\r\n    /**\r\n     * 显示激励视频广告\r\n     * @param info 观看激励视频位置描述，如果有值，会自动埋点该位置的观看激励视频与观看完激励视频事件\r\n     * @param cb 结果回调，参数st  1成功，发放奖励   其他失败\r\n     */\r\n    public showRewardedAd(info?: string, cb?: (st: number) => void) {\r\n        if (info) {\r\n            this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdStart + info);\r\n        }\r\n        tyqAdManager.showRewardedAd(() => {\r\n            if (info) {\r\n                this.eventSendCustomEvent(tyqSDKConfig.eventNames.rewardedAdSuccess + info);\r\n            }\r\n            if (cb) {\r\n                cb(1);\r\n            }\r\n        }, (state) => {\r\n            if (cb) {\r\n                if(state){\r\n                    cb(state);\r\n                }else{\r\n                    cb(0);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // 广告相关接口===========================================end\r\n    /**\r\n     * 进入加载页，需要调用该接口\r\n     */\r\n    public onShowLoadingLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterLoadingLayer);\r\n    }\r\n\r\n    /**\r\n     * 游戏显示主界面，需要调用该接口\r\n     */\r\n    public onShowHomeLayer() {\r\n        this.eventSendCustomEvent(tyqSDKConfig.eventNames.enterHomeLayer);\r\n\r\n        let val = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_show_main_layer);\r\n        if (!val) {\r\n            return;\r\n        }\r\n        val = parseInt(val);\r\n        if (val == 1) {\r\n            // 显示插屏广告\r\n            this.showInterstitialAd();\r\n        } else if (val == 2) {\r\n            // 显示矩阵广告\r\n            this.showCustomRectCenterAd(null);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 完成某局或者某个关卡，需要调用该接口，不管成功或者失败，都要调用\r\n     * @param level 当前进行到的关卡\r\n     */\r\n    public addLevelCount(level: number) {\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_reward_level);\r\n        if (!startLevel) {\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            return;\r\n        }\r\n\r\n        this.levelCount++;\r\n        let val = tyqSDK.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_level_count);\r\n        if (val) {\r\n            val = parseInt(val);\r\n            if (this.levelCount >= val) {\r\n                this.levelCount = 0;\r\n                this.showRewardedAd();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 游戏显示结算界面，需要调用该接口\r\n     */\r\n    public onShowSettlementLayer() {\r\n        this.showInterstitialAd();\r\n    }\r\n\r\n    /**\r\n     * 在游戏结算界面展示之前，调用该接口，显示SDK的【更多游戏】界面\r\n     * @param level 当前进行到的关卡\r\n     * @param closeCb 更多游戏界面关闭后的回调，继续执行展示游戏结算界面的逻辑\r\n     */\r\n    public showMoreGameLayer(level: number, closeCb: Function) {\r\n        if (tyqAdManager.getChannel() != Channel.WECHAT) {\r\n            return\r\n        }\r\n        let startLevel = this.getSwitchValue(tyqSDKConfig.paramsKeys.tyq_more_game_level);\r\n        if (!startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        startLevel = parseInt(startLevel);\r\n        if (level <= startLevel) {\r\n            closeCb();\r\n            return;\r\n        }\r\n\r\n        let obj: any = {};\r\n        obj.level = level;\r\n        tyqLayerManager.openLayer(tyqConstants.layers.TyqMoreGameLayer, obj, () => {\r\n            closeCb();\r\n        });\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const tyqSDK = TyqSDK.instance;\r\n"]}