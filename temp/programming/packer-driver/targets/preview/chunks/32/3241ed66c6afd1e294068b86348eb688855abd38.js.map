{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/tyqSDK/platform/Vivo.ts"],"names":["vivo","constructor","bannerAd","interstitialAd","nativeAd","videoPosId","bannerPosId","interstitialPosId","nativePosId","systemInfo","qg","getSystemInfoSync","setKeepScreenOn","bol","keepSrceenOn","success","console","log","fail","complete","authorize_code","Promise","resolve","reject","authorize","type","data","code","authorize_token","obj","getProfile","_token","token","exitApplication","cb","vibrateLong","callback","vibrateShort","showRewardVideoAd","next","platformVersionCode","createRewardedVideoAd","videoAd","adObj","isInVideo","callBack","posId","onError","err","errCode","JSON","stringify","onLoad","adshow","show","then","catch","onClose","res","adLoad","load","showBannerAd","doBannerShow","createBannerAd","style","onSize","offLoad","offError","offClose","hideBannerAd","addestroy","destroy","offSize","showInterstitialAd","createInterstitialAd","doShow","adShow","createNativeAd","resS","adList","reportAdShow","adId","clickNativeAd","reportAdClick","desNativeAd","getSetting","cbOK","cbFail","_instance","VivoManager"],"mappings":";;;iBAMMA,I;;;;;;;;;;;AAAAA,MAAAA,I,GAAN,MAAMA,IAAN,CAAW;AAaPC,QAAAA,WAAW,GAAG;AAAA,eATNC,QASM;AAAA,eARNC,cAQM;AAAA,eAPNC,QAOM;AAAA,eALNC,UAKM,GALO,kCAKP;AAAA,eAJNC,WAIM,GAJQ,kCAIR;AAAA,eAHNC,iBAGM,GAHc,kCAGd;AAAA,eAFNC,WAEM,GAFQ,kCAER;AACb,SAdM,CAgBP;;;AACc,YAAVC,UAAU,GAAG;AACb,iBAAOC,EAAE,CAACC,iBAAH,EAAP;AACH,SAnBM,CAoBP;;;AACOC,QAAAA,eAAe,CAACC,GAAD,EAAW;AAC7BH,UAAAA,EAAE,CAACE,eAAH,CAAmB;AACfE,YAAAA,YAAY,EAAED,GADC;AAEfE,YAAAA,OAAO,EAAE,MAAM;AAAEC,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAAyB,aAF3B;AAGfC,YAAAA,IAAI,EAAE,MAAM,CAAG,CAHA;AAIfC,YAAAA,QAAQ,EAAE,MAAM,CAAG;AAJJ,WAAnB;AAMH,SA5BM,CA6BP;;;AACOC,QAAAA,cAAc,GAAG;AACpB,iBAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCb,YAAAA,EAAE,CAACc,SAAH,CAAa;AACTC,cAAAA,IAAI,EAAE,MADG;AAETV,cAAAA,OAAO,EAAE,iBAAUW,IAAV,EAAqB;AAC1BJ,gBAAAA,OAAO,CAACI,IAAD,CAAP;AACH,eAJQ;AAKTR,cAAAA,IAAI,EAAE,cAAUQ,IAAV,EAAqBC,IAArB,EAAgC;AAClCJ,gBAAAA,MAAM,CAACG,IAAD,CAAN;AACH;AAPQ,aAAb;AASH,WAVM,CAAP;AAWH,SA1CM,CA2CP;;;AACOE,QAAAA,eAAe,GAAG;AACrB,iBAAO,IAAIP,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCb,YAAAA,EAAE,CAACc,SAAH,CAAa;AACTC,cAAAA,IAAI,EAAE,OADG;AAETV,cAAAA,OAAO,EAAE,iBAAUc,GAAV,EAAoB;AACzBP,gBAAAA,OAAO,CAACO,GAAD,CAAP;AACH,eAJQ;AAKTX,cAAAA,IAAI,EAAE,cAAUQ,IAAV,EAAqBC,IAArB,EAAgC;AAClCJ,gBAAAA,MAAM,CAACG,IAAD,CAAN;AACH;AAPQ,aAAb;AASH,WAVM,CAAP;AAWH,SAxDM,CAyDP;;;AACOI,QAAAA,UAAU,CAACC,MAAD,EAAc;AAC3B,iBAAO,IAAIV,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCb,YAAAA,EAAE,CAACoB,UAAH,CAAc;AACVE,cAAAA,KAAK,EAAED,MADG;AAEVhB,cAAAA,OAAO,EAAE,iBAAUW,IAAV,EAAqB;AAC1BJ,gBAAAA,OAAO,CAACI,IAAD,CAAP;AACH,eAJS;AAKVR,cAAAA,IAAI,EAAE,cAAUQ,IAAV,EAAqBC,IAArB,EAAgC;AAClCJ,gBAAAA,MAAM,CAACG,IAAD,CAAN;AAEH;AARS,aAAd;AAUH,WAXM,CAAP;AAYH;AACD;AACJ;AACA;AACA;;;AACIO,QAAAA,eAAe,CAACC,EAAD,EAAU;AACrBxB,UAAAA,EAAE,CAACuB,eAAH;AACH;AACD;AACJ;AACA;AACA;;;AACWE,QAAAA,WAAW,CAACC,QAAD,EAA4B;AAC1C1B,UAAAA,EAAE,CAACyB,WAAH;;AACA,cAAIC,QAAJ,EAAc;AACVA,YAAAA,QAAQ;AACX;AAEJ;;AACD;AACJ;AACA;AACA;AACWC,QAAAA,YAAY,CAACH,EAAD,EAAsB;AACrCxB,UAAAA,EAAE,CAAC2B,YAAH;;AACA,cAAIH,EAAJ,EAAQ;AACJA,YAAAA,EAAE;AACL;AACJ;;AAED;AAEA;AACAI,QAAAA,iBAAiB,CAACC,IAAD,EAAY;AACzB,cAAI,KAAK9B,UAAL,CAAgB+B,mBAAhB,GAAsC,IAA1C,EAAgD,OAAOD,IAAI,IAAIA,IAAI,CAAC,KAAD,CAAnB;AAChD,cAAI,CAAC7B,EAAE,CAAC+B,qBAAR,EAA+B,OAAOF,IAAI,IAAIA,IAAI,CAAC,KAAD,CAAnB;;AAC/B,cAAI,KAAKG,OAAT,EAAkB,CACjB,CADD,MACO;AACH,iBAAKA,OAAL,GAAe;AACXC,cAAAA,KAAK,EAAE,IADI;AAEXC,cAAAA,SAAS,EAAE,KAFA;AAGXC,cAAAA,QAAQ,EAAE;AAHC,aAAf;AAKA,iBAAKH,OAAL,CAAaC,KAAb,GAAqBjC,EAAE,CAAC+B,qBAAH,CAAyB;AAC1CK,cAAAA,KAAK,EAAE,KAAKzC;AAD8B,aAAzB,CAArB;AAGA,iBAAKqC,OAAL,CAAaC,KAAb,CAAmBI,OAAnB,CAA4BC,GAAD,IAAc;AACrC,mBAAKN,OAAL,CAAaE,SAAb,GAAyB,KAAzB;AACA,mBAAKF,OAAL,CAAaG,QAAb,IAAyB,KAAKH,OAAL,CAAaG,QAAb,CAAsB,KAAtB,CAAzB,CAFqC,CAGrC;;AAEA7B,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;;AACA,sBAAQ+B,GAAG,CAACC,OAAZ;AACI,qBAAK,CAAC,CAAN;AACIjC,kBAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCiC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAhC;AAGA;;AACJ,qBAAK,CAAC,CAAN;AACIhC,kBAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCiC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAtC;AAGA;;AACJ,qBAAK,KAAL;AACI;AACA;;AACJ;AACIhC,kBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB+B,GAAxB;AAGA;AAlBR;AAoBH,aA1BD;AA2BA,iBAAKN,OAAL,CAAaC,KAAb,CAAmBS,MAAnB,CAA0B,MAAM;AAC5B,kBAAIC,MAAM,GAAG,KAAKX,OAAL,CAAaC,KAAb,CAAmBW,IAAnB,EAAb;AACAD,cAAAA,MAAM,IAAIA,MAAM,CAACE,IAAP,CAAY,MAAM;AAAC;AACzBvC,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EADwB,CAExB;AACA;AACA;;AACA,qBAAKyB,OAAL,CAAaE,SAAb,GAAyB,IAAzB;AACH,eANS,EAMPY,KANO,CAMAR,GAAD,IAAc;AACnBhC,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B+B,GAA1B;AACA,qBAAKN,OAAL,CAAaE,SAAb,GAAyB,KAAzB;AACA,qBAAKF,OAAL,CAAaG,QAAb,IAAyB,KAAKH,OAAL,CAAaG,QAAb,CAAsB,CAAC,CAAvB,CAAzB,CAHmB,CAInB;AACH,eAXS,CAAV;AAYH,aAdD;AAeA,iBAAKH,OAAL,CAAaC,KAAb,CAAmBc,OAAnB,CAA4BC,GAAD,IAAc;AACrC,mBAAKhB,OAAL,CAAaE,SAAb,GAAyB,KAAzB;AACA5B,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwByC,GAAxB;;AACA,kBAAIA,GAAG,IAAIA,GAAG,CAAC,SAAD,CAAd,EAA2B;AACvB,qBAAKhB,OAAL,CAAaG,QAAb,IAAyB,KAAKH,OAAL,CAAaG,QAAb,CAAsB,CAAtB,CAAzB;AACH,eAFD,MAEO;AACH;AACA,qBAAKH,OAAL,CAAaG,QAAb,IAAyB,KAAKH,OAAL,CAAaG,QAAb,CAAsB,CAAtB,CAAzB;AACH,eARoC,CASrC;AACA;AACA;;;AACA,mBAAKH,OAAL,CAAaG,QAAb,GAAwB,IAAxB,CAZqC,CAarC;AACH,aAdD;AAeH;;AACD,eAAKH,OAAL,CAAaE,SAAb,GAAyB,IAAzB;AACA,eAAKF,OAAL,CAAaG,QAAb,GAAwBN,IAAxB;AACA,cAAIoB,MAAM,GAAG,KAAKjB,OAAL,CAAaC,KAAb,CAAmBiB,IAAnB,EAAb,CAzEyB,CAyEc;AACvC;;AACAD,UAAAA,MAAM,IAAIA,MAAM,CAACJ,IAAP,CAAY,MAAM;AACxBvC,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,iBAAKyB,OAAL,CAAaE,SAAb,GAAyB,IAAzB;AACH,WAHS,EAGPY,KAHO,CAGAR,GAAD,IAAc;AACnB,iBAAKN,OAAL,CAAaE,SAAb,GAAyB,KAAzB;AACA5B,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B+B,GAA1B,EAFmB,CAGnB;;AACA,iBAAKN,OAAL,CAAaG,QAAb,IAAyB,KAAKH,OAAL,CAAaG,QAAb,CAAsB,CAAC,CAAvB,CAAzB;AACH,WARS,CAAV;AASH,SA5LM,CA8LP;;;AAEAgB,QAAAA,YAAY,GAAG;AACX,cAAI,KAAKpD,UAAL,CAAgB+B,mBAAhB,GAAsC,IAA1C,EAAgD;AAChD,cAAI,KAAKtC,QAAT,EAAmB;AACnBc,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACA,cAAI6C,YAAY,GAAG,MAAM;AACrB,gBAAIT,MAAM,GAAG,KAAKnD,QAAL,CAAcoD,IAAd,EAAb;AACAD,YAAAA,MAAM,IAAIA,MAAM,CAACE,IAAP,CAAY,MAAM;AACxBvC,cAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,aAFS,EAEPuC,KAFO,CAEAR,GAAD,IAAc;AACnB,sBAAQA,GAAG,CAACrB,IAAZ;AACI,qBAAK,KAAL;AACIX,kBAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AACA;;AACJ,qBAAK,KAAL;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA;;AACJ,qBAAK,KAAL;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA;;AACJ;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAYiC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAZ;AACA;AAbR;AAeH,aAlBS,CAAV;AAmBH,WArBD;;AAsBA,eAAK9C,QAAL,GAAgBQ,EAAE,CAACqD,cAAH,CAAkB;AAC9BjB,YAAAA,KAAK,EAAE,KAAKxC,WADkB;AAE9B0D,YAAAA,KAAK,EAAE;AAFuB,WAAlB,CAAhB;AAKAhD,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B,KAAKf,QAAlC;AACA,eAAKA,QAAL,CAAc+D,MAAd,CAAsBP,GAAD,IAAc;AAC/B1C,YAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+ByC,GAA/B,EAD+B,CAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACH,WATD;AAUA,eAAKxD,QAAL,CAAckD,MAAd,CAAqB,MAAM;AACvB,iBAAKlD,QAAL,CAAcgE,OAAd,IAAyB,KAAKhE,QAAL,CAAcgE,OAAd,EAAzB;AACAlD,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA6C,YAAAA,YAAY;AACf,WAJD;AAKA,eAAK5D,QAAL,CAAc6C,OAAd,CAAuBC,GAAD,IAAc;AAChC,iBAAK9C,QAAL,CAAciE,QAAd,IAA0B,KAAKjE,QAAL,CAAciE,QAAd,EAA1B;AACAnD,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiC+B,GAAjC;AACH,WAHD;AAIA,eAAK9C,QAAL,CAAcuD,OAAd,CAAuBT,GAAD,IAAc;AAChC,iBAAK9C,QAAL,CAAckE,QAAd;AACApD,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC+B,GAAhC;AACH,WAHD;AAIH;;AACDqB,QAAAA,YAAY,GAAG;AACX,cAAI,CAAC,KAAKnE,QAAV,EAAoB;AAChB;AACH;;AACD,cAAIoE,SAAS,GAAG,KAAKpE,QAAL,CAAcqE,OAAd,EAAhB,CAJW,CAKX;;AACAD,UAAAA,SAAS,IAAIA,SAAS,CAACf,IAAV,CAAe,MAAM;AAC9BvC,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,iBAAKf,QAAL,CAAcgE,OAAd;AACA,iBAAKhE,QAAL,CAAciE,QAAd;AACA,iBAAKjE,QAAL,CAAcsE,OAAd;AACH,WALY,EAKVhB,KALU,CAKHR,GAAD,IAAc;AACnBhC,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B+B,GAA5B;AACH,WAPY,CAAb;AAQH,SAtQM,CAwQP;AACA;;;AACAyB,QAAAA,kBAAkB,CAAClC,IAAD,EAAa;AAC3B,cAAI,KAAK9B,UAAL,CAAgB+B,mBAAhB,GAAsC,IAA1C,EAAgD,OAAOD,IAAI,IAAIA,IAAI,CAAC,KAAD,CAAnB;AAChD,cAAI,KAAKpC,cAAT,EAAyB;AACzBa,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,eAAKd,cAAL,GAAsBO,EAAE,CAACgE,oBAAH,CAAwB;AAC1C5B,YAAAA,KAAK,EAAE,KAAKvC;AAD8B,WAAxB,CAAtB;;AAGA,cAAIoE,MAAM,GAAG,MAAM;AACf,gBAAIC,MAAM,GAAG,KAAKzE,cAAL,CAAoBmD,IAApB,EAAb,CADe,CAEf;;AACAsB,YAAAA,MAAM,IAAIA,MAAM,CAACrB,IAAP,CAAY,MAAM;AACxBvC,cAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAsB,cAAAA,IAAI,IAAIA,IAAI,EAAZ;AACH,aAHS,EAGPiB,KAHO,CAGAR,GAAD,IAAc;AACnB,mBAAK7C,cAAL,GAAsB,IAAtB;;AACA,sBAAQ6C,GAAG,CAACrB,IAAZ;AACI,qBAAK,KAAL;AACIX,kBAAAA,OAAO,CAACC,GAAR,CAAY,wCAAZ;AACA;;AACJ,qBAAK,KAAL;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA;;AACJ,qBAAK,KAAL;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA;;AACJ,qBAAK,KAAL;AACI;;AACJ;AACID,kBAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,kBAAAA,OAAO,CAACC,GAAR,CAAY+B,GAAZ;AACA;AAfR;AAiBH,aAtBS,CAAV;AAuBH,WA1BD;;AA2BA,eAAK7C,cAAL,CAAoBiD,MAApB,CAA2B,MAAM;AAC7BpC,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA0D,YAAAA,MAAM;AACT,WAHD,EAGG,MAAM;AACL3D,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA,iBAAKd,cAAL,GAAsB,IAAtB;AACH,WAND;AAOA,eAAKA,cAAL,CAAoB4C,OAApB,CAA6BC,GAAD,IAAc;AACtChC,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B+B,GAA5B;AACA,iBAAK7C,cAAL,GAAsB,IAAtB;AACH,WAHD;AAIA,eAAKA,cAAL,CAAoBsD,OAApB,CAA4B,MAAM;AAC9BzC,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,iBAAKd,cAAL,IAAuB,KAAKA,cAAL,CAAoBiE,QAApB,EAAvB;AACA,iBAAKjE,cAAL,GAAsB,IAAtB;AACH,WAJD;AAKH,SA5TM,CA6TP;AAEA;;;AACA0E,QAAAA,cAAc,CAACtC,IAAD,EAAkBuC,IAAlB,EAAmC;AAC7C,cAAI,KAAKrE,UAAL,CAAgB+B,mBAAhB,GAAsC,IAA1C,EAAgD,OAAOD,IAAI,IAAIA,IAAI,CAAC,KAAD,CAAnB;AAChD,eAAKnC,QAAL,GAAgBM,EAAE,CAACmE,cAAH,CAAkB;AAC9B/B,YAAAA,KAAK,EAAE,KAAKtC;AADkB,WAAlB,CAAhB;AAGAQ,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB,KAAKb,QAA7B;AACA,eAAKA,QAAL,CAAcgD,MAAd,CAAsBM,GAAD,IAAc;AAC/B,gBAAIA,GAAG,IAAIA,GAAG,CAACqB,MAAf,EAAuB;AACnB/D,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoByC,GAApB;AACA1C,cAAAA,OAAO,CAACC,GAAR,CAAYyC,GAAG,CAACqB,MAAhB;AACA/D,cAAAA,OAAO,CAACC,GAAR,CAAYyC,GAAG,CAACqB,MAAJ,CAAW,CAAX,CAAZ;AACAxC,cAAAA,IAAI,IAAIA,IAAI,CAACmB,GAAG,CAACqB,MAAJ,CAAW,CAAX,CAAD,CAAZ;AACH,aALD,MAMK;AACDxC,cAAAA,IAAI,IAAIA,IAAI,CAAC,IAAD,CAAZ;AACH;;AACD,iBAAKyC,YAAL,CAAkBtB,GAAG,CAACqB,MAAJ,CAAW,CAAX,EAAcE,IAAhC;AACH,WAXD;AAYA,eAAK7E,QAAL,CAAc2C,OAAd,CAAuBW,GAAD,IAAc;AAChC1C,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwByC,GAAxB,EADgC,CAEhC;;AACA,gBAAIoB,IAAJ,EAAU;AACNA,cAAAA,IAAI;AACP;AACJ,WAND;AAOA,cAAInB,MAAM,GAAG,KAAKvD,QAAL,CAAcwD,IAAd,EAAb;AACAD,UAAAA,MAAM,IAAIA,MAAM,CAACJ,IAAP,CAAY,MAAM;AACxBvC,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH,WAFS,EAEPuC,KAFO,CAEAR,GAAD,IAAc;AACnBhC,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBiC,IAAI,CAACC,SAAL,CAAeH,GAAf,CAAxB,EADmB,CAEnB;;AACA,gBAAI8B,IAAJ,EAAU;AACNA,cAAAA,IAAI;AACP;AACJ,WARS,CAAV;AASH;AAED;;;AACAI,QAAAA,aAAa,CAACD,IAAD,EAAY;AACrB,cAAI,CAAC,KAAK7E,QAAV,EAAoB;AACpB,eAAKA,QAAL,CAAc+E,aAAd,CAA4B;AACxBF,YAAAA,IAAI,EAAEA;AADkB,WAA5B;AAGH;AAED;;;AACAD,QAAAA,YAAY,CAACC,IAAD,EAAY;AACpB,cAAI,CAAC,KAAK7E,QAAV,EAAoB;AACpB,eAAKA,QAAL,CAAc4E,YAAd,CAA2B;AACvBC,YAAAA,IAAI,EAAEA;AADiB,WAA3B;AAGH;AAED;;;AACAG,QAAAA,WAAW,GAAG;AACVpE,UAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B,KAAKb,QAAhC;AACA,eAAKA,QAAL,CAAcmE,OAAd;AACH,SAzXM,CA4XP;;;AACOc,QAAAA,UAAU,CAACC,IAAD,EAAYC,MAAZ,EAA2B;AAAA,cAAfA,MAAe;AAAfA,YAAAA,MAAe,GAAN,IAAM;AAAA;AAE3C;;AA/XM,O;AAALvF,MAAAA,I,CACqBwF,S,GAAkB,IAAIxF,IAAJ,E;;6BAiYhCyF,W,GAAczF,IAAI,CAACwF,S","sourcesContent":["\r\ninterface tempVideoAd {\r\n    adObj: any\r\n    isInVideo: boolean\r\n    callBack: Function\r\n}\r\nclass vivo {\r\n    public static readonly _instance: vivo = new vivo();\r\n\r\n    private videoAd!: tempVideoAd\r\n    private bannerAd: any\r\n    private interstitialAd: any\r\n    private nativeAd: any\r\n\r\n    private videoPosId = '74668129b4b442539bed19caae5c8d9d';\r\n    private bannerPosId = '6caa9e6062d243e195ca6ca8e9a50a0d';\r\n    private interstitialPosId = '965c0f038e5a4b278940ad5864e1436c';\r\n    private nativePosId = '9b47cc8e3ec04c6b9232da4618439804';\r\n\r\n    constructor() {\r\n    }\r\n\r\n    //获取系统信息的同步版本\r\n    get systemInfo() {\r\n        return qg.getSystemInfoSync();\r\n    }\r\n    //设置屏幕是否常量\r\n    public setKeepScreenOn(bol: any) {\r\n        qg.setKeepScreenOn({\r\n            keepSrceenOn: bol,\r\n            success: () => { console.log('设置屏幕常亮成功') },\r\n            fail: () => { },\r\n            complete: () => { },\r\n        })\r\n    }\r\n    //登录授权\r\n    public authorize_code() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"code\",\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    // 旧版本获取token\r\n    public authorize_token() {\r\n        return new Promise((resolve, reject) => {\r\n            qg.authorize({\r\n                type: \"token\",\r\n                success: function (obj: any) {\r\n                    resolve(obj);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n                }\r\n            })\r\n        })\r\n    }\r\n    // 获取授权信息 \r\n    public getProfile(_token: any) {\r\n        return new Promise((resolve, reject) => {\r\n            qg.getProfile({\r\n                token: _token,\r\n                success: function (data: any) {\r\n                    resolve(data);\r\n                },\r\n                fail: function (data: any, code: any) {\r\n                    reject(data);\r\n\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /*\r\n    *  qg.exitApplication()\r\n    *  退出游戏，同步方法\r\n    */\r\n    exitApplication(cb: any) {\r\n        qg.exitApplication();\r\n    }\r\n    /**\r\n     * 使手机发生较长时间的振动。\r\n     * @param callback 回调 (isSuccess, res)\r\n     */\r\n    public vibrateLong(callback?: Function): void {\r\n        qg.vibrateLong();\r\n        if (callback) {\r\n            callback()\r\n        }\r\n\r\n    };\r\n    /**\r\n     * 使手机发生较短时间的振动\r\n     * \r\n     */\r\n    public vibrateShort(cb?: Function): void {\r\n        qg.vibrateShort();\r\n        if (cb) {\r\n            cb()\r\n        }\r\n    };\r\n\r\n    //=============================广告\r\n\r\n    //播放激励视频\r\n    showRewardVideoAd(next: any) {\r\n        if (this.systemInfo.platformVersionCode < 1041) return next && next(false);\r\n        if (!qg.createRewardedVideoAd) return next && next(false);\r\n        if (this.videoAd) {\r\n        } else {\r\n            this.videoAd = {\r\n                adObj: null,\r\n                isInVideo: false,\r\n                callBack: null!\r\n            }\r\n            this.videoAd.adObj = qg.createRewardedVideoAd({\r\n                posId: this.videoPosId\r\n            });\r\n            this.videoAd.adObj.onError((err: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                this.videoAd.callBack && this.videoAd.callBack(false);\r\n                // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n\r\n                console.log(\"视频广告创建失败\")\r\n                switch (err.errCode) {\r\n                    case -3:\r\n                        console.log(\"激励广告加载失败---调用太频繁\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case -4:\r\n                        console.log(\"激励广告加载失败--- 一分钟内不能重复加载\", JSON.stringify(err));\r\n\r\n\r\n                        break;\r\n                    case 30008:\r\n                        // 当前启动来源不支持激励视频广告，请选择其他激励策略\r\n                        break;\r\n                    default:\r\n                        console.log(\"激励广告展示失败\", err)\r\n\r\n\r\n                        break;\r\n                }\r\n            })\r\n            this.videoAd.adObj.onLoad(() => {\r\n                let adshow = this.videoAd.adObj.show();\r\n                adshow && adshow.then(() => {// 捕捉show失败的错误\r\n                    console.log(\"激励视频广告显示成功\");\r\n                    // if (AudioMgr.isOpen) {\r\n                    //     AudioMgr.pause();\r\n                    // }\r\n                    this.videoAd.isInVideo = true;\r\n                }).catch((err: any) => {\r\n                    console.log(\"激励视频广告显示失败\", err);\r\n                    this.videoAd.isInVideo = false;\r\n                    this.videoAd.callBack && this.videoAd.callBack(-1);\r\n                    // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n                });\r\n            })\r\n            this.videoAd.adObj.onClose((res: any) => {\r\n                this.videoAd.isInVideo = false;\r\n                console.log('onClose!', res)\r\n                if (res && res[\"isEnded\"]) {\r\n                    this.videoAd.callBack && this.videoAd.callBack(1);\r\n                } else {\r\n                    // Emitter.getInstance().emit(\"showADTip\", '提前关闭视频不能得到奖励哦！');\r\n                    this.videoAd.callBack && this.videoAd.callBack(0);\r\n                }\r\n                // if (AudioMgr.isOpen) {\r\n                //     AudioMgr.resume();\r\n                // }\r\n                this.videoAd.callBack = null!;\r\n                // this.rewardedVideoAd.offClose();\r\n            });\r\n        }\r\n        this.videoAd.isInVideo = true;\r\n        this.videoAd.callBack = next;\r\n        let adLoad = this.videoAd.adObj.load();//第一次调用 可能会报-3  广告能正常展示就可以忽略\r\n        // 捕捉load失败的错误\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"激励视频广告加载成功\");\r\n            this.videoAd.isInVideo = true;\r\n        }).catch((err: any) => {\r\n            this.videoAd.isInVideo = false;\r\n            console.log(\"激励视频广告加载失败\", err);\r\n            // Emitter.getInstance().emit(\"showADTip\", '频繁观看广告，请稍后再试!');\r\n            this.videoAd.callBack && this.videoAd.callBack(-1);\r\n        });\r\n    }\r\n\r\n    //------\r\n\r\n    showBannerAd() {\r\n        if (this.systemInfo.platformVersionCode < 1041) return;\r\n        if (this.bannerAd) return;\r\n        console.log('显示banner广告3')\r\n        let doBannerShow = () => {\r\n            let adshow = this.bannerAd.show();\r\n            adshow && adshow.then(() => {\r\n                console.log(\"banner广告展示成功\");\r\n            }).catch((err: any) => {\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"加载广告失败，重新加载广告\")\r\n                        break;\r\n                    default:\r\n                        console.log(\"banner广告展示失败\")\r\n                        console.log(JSON.stringify(err))\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.bannerAd = qg.createBannerAd({\r\n            posId: this.bannerPosId,\r\n            style: {\r\n            }\r\n        });\r\n        console.log('创建banner广告第一步', this.bannerAd)\r\n        this.bannerAd.onSize((res: any) => {\r\n            console.log('banner onResize', res);\r\n            // gl.bannerSize = {\r\n            //     width: res.width,\r\n            //     height: (res.width / 16 * 9),\r\n            //     winHeight: this.systemInfo.screenHeight\r\n            // };\r\n            // this.bannerAd.style.left = (this.systemInfo.screenWidth - res.width) / 2;\r\n            // this.bannerAd.style.top = this.systemInfo.screenHeight - (res.width / 16 * 9);\r\n        })\r\n        this.bannerAd.onLoad(() => {\r\n            this.bannerAd.offLoad && this.bannerAd.offLoad();\r\n            console.log(\"banner 广告加载成功 ...\");\r\n            doBannerShow();\r\n        });\r\n        this.bannerAd.onError((err: any) => {\r\n            this.bannerAd.offError && this.bannerAd.offError();\r\n            console.log(\"banner 广告创建失败 ...\", err);\r\n        });\r\n        this.bannerAd.onClose((err: any) => {\r\n            this.bannerAd.offClose();\r\n            console.log(\"onClose 广告创建 ...\", err);\r\n        });\r\n    }\r\n    hideBannerAd() {\r\n        if (!this.bannerAd) {\r\n            return;\r\n        }\r\n        var addestroy = this.bannerAd.destroy();\r\n        // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n        addestroy && addestroy.then(() => {\r\n            console.log(\"banner广告销毁成功\");\r\n            this.bannerAd.offLoad();\r\n            this.bannerAd.offError();\r\n            this.bannerAd.offSize();\r\n        }).catch((err: any) => {\r\n            console.log(\"banner广告销毁失败\", err);\r\n        });\r\n    }\r\n\r\n    //-------\r\n    //显示插屏广告\r\n    showInterstitialAd(next?: any) {\r\n        if (this.systemInfo.platformVersionCode < 1031) return next && next(false);\r\n        if (this.interstitialAd) return;\r\n        console.log(\"显示插屏广告\");\r\n        this.interstitialAd = qg.createInterstitialAd({\r\n            posId: this.interstitialPosId,\r\n        });\r\n        var doShow = () => {\r\n            let adShow = this.interstitialAd.show();\r\n            // 调用then和catch之前需要对show的结果做下判空处理，防止出错（如果没有判空，在平台版本为1052以及以下的手机上将会出现错误）\r\n            adShow && adShow.then(() => {\r\n                console.log(\"插屏广告展示成功\");\r\n                next && next();\r\n            }).catch((err: any) => {\r\n                this.interstitialAd = null;\r\n                switch (err.code) {\r\n                    case 30003:\r\n                        console.log(\"新用户7天内不能曝光Banner，请将手机时间调整为7天后，退出游戏重新进入\")\r\n                        break;\r\n                    case 30009:\r\n                        console.log(\"10秒内调用广告次数超过1次，10秒后再调用\")\r\n                        break;\r\n                    case 30002:\r\n                        console.log(\"load广告失败，重新加载广告\")\r\n                        break;\r\n                    case 30000:\r\n                        break;\r\n                    default:\r\n                        console.log(\"插屏广告展示失败\")\r\n                        console.log(err)\r\n                        break;\r\n                }\r\n            });\r\n        }\r\n        this.interstitialAd.onLoad(() => {\r\n            console.log('加载插屏广告成功')\r\n            doShow();\r\n        }, () => {\r\n            console.log('加载插屏广告失败')\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onError((err: any) => {\r\n            console.log(\"插屏广告创建失败 ...\", err)\r\n            this.interstitialAd = null;\r\n        })\r\n        this.interstitialAd.onClose(() => {\r\n            console.log(\"插屏 关闭 ...\")\r\n            this.interstitialAd && this.interstitialAd.offClose();\r\n            this.interstitialAd = null;\r\n        })\r\n    }\r\n    //----------\r\n\r\n    //创建原生广告\r\n    createNativeAd(next?: Function, resS?: Function) {\r\n        if (this.systemInfo.platformVersionCode < 1053) return next && next(false);\r\n        this.nativeAd = qg.createNativeAd({\r\n            posId: this.nativePosId\r\n        })\r\n        console.log(\"原生广告原生广告\", this.nativeAd)\r\n        this.nativeAd.onLoad((res: any) => {\r\n            if (res && res.adList) {\r\n                console.log(\"原生广告\", res);\r\n                console.log(res.adList)\r\n                console.log(res.adList[0])\r\n                next && next(res.adList[0]);\r\n            }\r\n            else {\r\n                next && next(null);\r\n            }\r\n            this.reportAdShow(res.adList[0].adId);\r\n        })\r\n        this.nativeAd.onError((res: any) => {\r\n            console.log('原生广告加载失败', res)\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        })\r\n        let adLoad = this.nativeAd.load()\r\n        adLoad && adLoad.then(() => {\r\n            console.log(\"原生广告加载成功\");\r\n        }).catch((err: any) => {\r\n            console.log('原生广告加载失败', JSON.stringify(err));\r\n            // next && next()\r\n            if (resS) {\r\n                resS()\r\n            }\r\n        });\r\n    }\r\n\r\n    /**上报原生点击 */\r\n    clickNativeAd(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdClick({\r\n            adId: adId,\r\n        });\r\n    }\r\n\r\n    /**上报广告曝光 */\r\n    reportAdShow(adId: any) {\r\n        if (!this.nativeAd) return;\r\n        this.nativeAd.reportAdShow({\r\n            adId: adId\r\n        })\r\n    }\r\n\r\n    /**销毁广告组件，释放资源 */\r\n    desNativeAd() {\r\n        console.log(\"销毁广告组件，释放资源\", this.nativeAd);\r\n        this.nativeAd.destroy();\r\n    }\r\n\r\n\r\n    // 检查登录信息 5分钟后token 失效\r\n    public getSetting(cbOK: any, cbFail = null) {\r\n\r\n    }\r\n}\r\n\r\nexport const VivoManager = vivo._instance;"]}