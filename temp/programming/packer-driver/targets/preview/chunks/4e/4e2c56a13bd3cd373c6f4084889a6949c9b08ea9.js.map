{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/monsters/Monster22.ts"],"names":["Component","_decorator","cocosUtil","utilTools","mapModel","physicsGroup","ccclass","property","Monster22","monster","moveStop","bulletId","bulletId2","bulletId3","init","startSkillLogic","scheduleOnce","arr","id","weight","ret","getRowByWeight","Math","random","useSkill1","hp","canFace","animationCtrl","playAnimationOnce","bulletSystem","addBullet","MONSTER_BULLET","convertToWorldSpace","node","useSkill2","getCircleDirectionArr","forArr","direction","selfDead"],"mappings":"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","sourcesContent":["import { Component, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 粘稠怪\r\n@ccclass('Monster22')\r\nexport class Monster22 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    // 光波\r\n    bulletId: number = 1018;\r\n    // 水滴\r\n    bulletId2: number = 1019;\r\n    // 泥浆\r\n    bulletId3: number = 1020;\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    startSkillLogic() {\r\n        this.scheduleOnce(() => {\r\n            let arr: any = [\r\n                { id: 1, weight: 10 },\r\n                { id: 2, weight: 10 },\r\n            ];\r\n\r\n            let ret = utilTools.getRowByWeight(arr);\r\n            if (ret) {\r\n                this[\"useSkill\" + ret.id]();\r\n            } else {\r\n                this.startSkillLogic();\r\n            }\r\n        }, 1.5 + Math.random());\r\n    }\r\n\r\n    useSkill1() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        this.moveStop = true;\r\n        this.monster.canFace = false;\r\n\r\n        this.monster.animationCtrl.playAnimationOnce(\"attack1\", () => {\r\n            this.monster.canFace = true;\r\n            this.moveStop = false;\r\n            this.startSkillLogic();\r\n        });\r\n        this.scheduleOnce(() => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node));\r\n        }, 0.5);\r\n    }\r\n\r\n    useSkill2() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n\r\n        // 一圈水滴\r\n        let arr = cocosUtil.getCircleDirectionArr(8);\r\n        utilTools.forArr(arr, (direction: any) => {\r\n            mapModel.bulletSystem.addBullet(this.bulletId2, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), direction, this.bulletId3);\r\n        });\r\n\r\n        this.startSkillLogic();\r\n    }\r\n\r\n    selfDead() {\r\n        mapModel.bulletSystem.addBullet(this.bulletId3, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.node), null, 2);\r\n    }\r\n\r\n}\r\n\r\n"]}