{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/RewardSkinLayer.ts"],"names":["Button","instantiate","Node","Prefab","Sprite","v3","_decorator","sdkManager","constants","designManager","UserData","PropItemPrefab","BaseUILayer","ccclass","property","RewardSkinLayer","type","onLoad","onDisable","onDestroy","start","initList","itemProp","active","proplayer","removeAllChildren","propArr","getRowsByType","tableName","prop","i","length","data","p1","item","position","addChild","propItem","getComponent","setView","id","Type_UnTouch","Type_HideNum","changeBg","bundles","wwqVec","setScale","addButtonHander","getChildByName","node","getInstance","isHaveProp","grayscale","interactable","onClickVideoGet","event","console","log","self","openAd","st","Id","Num","getRewardProp","openLayer","layers","RewardLayer"],"mappings":"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","sourcesContent":["import { Button, instantiate, Node, Prefab, Sprite, v3, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardSkinLayer')\r\nexport class RewardSkinLayer extends BaseUILayer {\r\n\r\n\r\n    @property(Node) itemProp: Node = null;\r\n    @property(Node) proplayer: Node = null;\r\n\r\n    @property({ type: Prefab }) propItem: Prefab = null;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n  \r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n        this.initList()\r\n        this.itemProp.active = false\r\n    }\r\n\r\n    initList() {\r\n        this.proplayer.removeAllChildren()\r\n        let propArr = designManager.getRowsByType(constants.tableName.prop, 17)\r\n        for (let i = 0; i < propArr.length; i++) {\r\n            let data = propArr[i]\r\n            if (data.p1 == 2) {\r\n                let item = instantiate(this.itemProp)\r\n                item.active = true\r\n                item.position = v3(0, 0, 0)\r\n                this.proplayer.addChild(item)\r\n                let propItem = instantiate(this.propItem)\r\n                propItem.getComponent(PropItemPrefab).setView(data.id, 0, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n                propItem.getComponent(PropItemPrefab).changeBg(\"activityRes/itembg\", constants.bundles.wwqVec)\r\n                propItem.getComponent(PropItemPrefab).setScale(99)\r\n                item.addChild(propItem)\r\n                propItem.position = v3(0, -20, 0)\r\n                this.addButtonHander(item.getChildByName(\"btnGet\"), this.node, \"RewardSkinLayer\", \"onClickVideoGet\", data.id)\r\n                if (UserData.getInstance().isHaveProp(data.id)) {\r\n                    item.getChildByName(\"btnGet\").getComponent(Sprite).grayscale = true\r\n                    item.getChildByName(\"btnGet\").getComponent(Button).interactable = false\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onClickVideoGet(event, data) {\r\n        console.log(\"onClickVideoGet = \", data)\r\n        let self = this\r\n        sdkManager.openAd(\"获取皮肤\", function (st) {\r\n            if (st == 1) {\r\n                let propItem: PropItem = {\r\n                    Id: data,\r\n                    Num: 1\r\n                };\r\n                UserData.getInstance().getRewardProp([propItem])\r\n                self.openLayer(constants.layers.RewardLayer, { propArr: [propItem] });\r\n                self.initList()\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n"]}