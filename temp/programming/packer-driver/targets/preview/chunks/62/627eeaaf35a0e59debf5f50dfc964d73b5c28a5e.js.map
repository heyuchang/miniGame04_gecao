{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/weapon/Weapon5.ts"],"names":["Component","_decorator","cocosUtil","mapModel","HintNames","constants","ccclass","property","Weapon5","weapon","weaponId","init","atk","time","atkDis","row","lv","design","maxLv","ret","atkByFist","scheduleOnce","hintSystem","addHint","hit4","convertToWorldSpace","node","angle","hit6","contactBegin","hit5","targetForceMoveBack"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;;AACjBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;AAEAC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;yBAEaO,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BR,SAD7B,CACuC;AAAA;AAAA;AAAA,eAEnCS,MAFmC;AAAA,eAGnCC,QAHmC,GAGxB,KAHwB;AAAA;;AAKnCC,QAAAA,IAAI,CAACF,MAAD,EAAiB;AACjB,eAAKA,MAAL,GAAcA,MAAd;AAEH;;AAEDG,QAAAA,GAAG,GAAG;AACF,cAAIC,IAAI,GAAG,IAAX;AACA,cAAIC,MAAM,GAAG,GAAb;;AACA,cAAI,KAAKL,MAAL,CAAYM,GAAZ,CAAgBC,EAAhB,IAAsB;AAAA;AAAA,sCAAUC,MAAV,CAAiBC,KAA3C,EAAkD;AAC9CJ,YAAAA,MAAM,GAAG,GAAT;AACH;;AACD,cAAIK,GAAG,GAAG,KAAKV,MAAL,CAAYW,SAAZ,CAAsBN,MAAtB,EAA8BD,IAA9B,CAAV;;AACA,cAAI,CAACM,GAAL,EAAU;AACN,iBAAKE,YAAL,CAAkB,MAAM;AACpB,kBAAI,KAAKZ,MAAL,CAAYM,GAAZ,CAAgBC,EAAhB,IAAsB;AAAA;AAAA,0CAAUC,MAAV,CAAiBC,KAA3C,EAAkD;AAC9C;AAAA;AAAA,0CAASI,UAAT,CAAoBC,OAApB,CAA4B;AAAA;AAAA,4CAAUC,IAAtC,EAA4C;AAAA;AAAA,4CAAUC,mBAAV,CAA8B,KAAKhB,MAAL,CAAYiB,IAA1C,CAA5C,EAA6F,KAAKjB,MAAL,CAAYiB,IAAZ,CAAiBC,KAA9G;AACH,eAFD,MAEO;AACH;AAAA;AAAA,0CAASL,UAAT,CAAoBC,OAApB,CAA4B;AAAA;AAAA,4CAAUK,IAAtC,EAA4C;AAAA;AAAA,4CAAUH,mBAAV,CAA8B,KAAKhB,MAAL,CAAYiB,IAA1C,CAA5C,EAA6F,KAAKjB,MAAL,CAAYiB,IAAZ,CAAiBC,KAA9G;AACH;AACJ,aAND,EAMGd,IAAI,GAAG,CANV;AAOH;AAEJ;;AAEDgB,QAAAA,YAAY,CAACH,IAAD,EAAa;AACrB;AACA;AAAA;AAAA,oCAASJ,UAAT,CAAoBC,OAApB,CAA4B;AAAA;AAAA,sCAAUO,IAAtC,EAA4C;AAAA;AAAA,sCAAUL,mBAAV,CAA8BC,IAA9B,CAA5C;AACA,eAAKjB,MAAL,CAAYsB,mBAAZ,CAAgCL,IAAhC;AACH;;AAjCkC,O","sourcesContent":["import { Component, Node, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Weapon } from './Weapon';\r\nimport { constants } from '../../../data/constants';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 光剑\r\n@ccclass('Weapon5')\r\nexport class Weapon5 extends Component {\r\n\r\n    weapon: Weapon;\r\n    weaponId = 10150;\r\n\r\n    init(weapon: Weapon) {\r\n        this.weapon = weapon;\r\n\r\n    }\r\n\r\n    atk() {\r\n        let time = 0.05;\r\n        let atkDis = 300;\r\n        if (this.weapon.row.lv == constants.design.maxLv) {\r\n            atkDis = 400;\r\n        }\r\n        let ret = this.weapon.atkByFist(atkDis, time);\r\n        if (!ret) {\r\n            this.scheduleOnce(() => {\r\n                if (this.weapon.row.lv == constants.design.maxLv) {\r\n                    mapModel.hintSystem.addHint(HintNames.hit4, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                } else {\r\n                    mapModel.hintSystem.addHint(HintNames.hit6, cocosUtil.convertToWorldSpace(this.weapon.node), this.weapon.node.angle);\r\n                }\r\n            }, time * 2);\r\n        }\r\n\r\n    }\r\n\r\n    contactBegin(node: Node) {\r\n        // 受击特效\r\n        mapModel.hintSystem.addHint(HintNames.hit5, cocosUtil.convertToWorldSpace(node));\r\n        this.weapon.targetForceMoveBack(node);\r\n    }\r\n\r\n}\r\n\r\n"]}