{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/hint/blockArrow.ts"],"names":["Component","tween","Tween","UITransform","v3","_decorator","cocosUtil","mapModel","ccclass","property","blockArrow","hint","monster","outVec1","init","extraObj","duration","dis","tf","bodyNode","getComponent","width","stopAllByTarget","to","call","recycleSelf","start","update","dt","player","node","getPosition","subtract","position","angle","vec2XAngle"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,E,OAAAA,E;AAAUC,MAAAA,U,OAAAA,U;;AAChDC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;4BAGjBK,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCV,SADhC,CAC0C;AAAA;AAAA;AAAA,eAEtCW,IAFsC;AAAA,eAGtCC,OAHsC;AAAA,eAKtCC,OALsC,GAKtBT,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CALoB;AAAA;;AAOtCU,QAAAA,IAAI,CAACH,IAAD,EAAa;AACb,eAAKA,IAAL,GAAYA,IAAZ;AAEA,eAAKC,OAAL,GAAe,KAAKD,IAAL,CAAUI,QAAV,CAAmBH,OAAlC;AACA,cAAII,QAAQ,GAAG,KAAKL,IAAL,CAAUI,QAAV,CAAmBC,QAAlC;AACA,cAAIC,GAAG,GAAG,KAAKN,IAAL,CAAUI,QAAV,CAAmBE,GAA7B;AAEA,cAAIC,EAAE,GAAG,KAAKP,IAAL,CAAUQ,QAAV,CAAmBC,YAAnB,CAAgCjB,WAAhC,CAAT;AACAe,UAAAA,EAAE,CAACG,KAAH,GAAW,GAAX;AAEAnB,UAAAA,KAAK,CAACoB,eAAN,CAAsBJ,EAAtB;AACAjB,UAAAA,KAAK,CAACiB,EAAD,CAAL,CAAUK,EAAV,CAAaP,QAAb,EAAuB;AAAEK,YAAAA,KAAK,EAAEJ;AAAT,WAAvB,EAAuCO,IAAvC,CAA4C,MAAM;AAC9C,iBAAKb,IAAL,CAAUc,WAAV;AACH,WAFD,EAEGC,KAFH;AAIH;;AAEDC,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf;AACA;AAAA;AAAA,oCAASC,MAAT,CAAgBC,IAAhB,CAAqBC,WAArB,CAAiC,KAAKlB,OAAtC,EAA+CmB,QAA/C,CAAwD,KAAKpB,OAAL,CAAakB,IAAb,CAAkBG,QAA1E;AACA,eAAKH,IAAL,CAAUI,KAAV,GAAkB;AAAA;AAAA,sCAAUC,UAAV,CAAqB,KAAKtB,OAA1B,CAAlB,CAHe,CAKf;;AACA,eAAKiB,IAAL,CAAUG,QAAV,GAAqB,KAAKrB,OAAL,CAAakB,IAAb,CAAkBG,QAAvC;AACH;;AA/BqC,O","sourcesContent":["import { Component, tween, Tween, UITransform, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Monster } from '../monsters/Monster';\r\nimport { Hint } from './Hint';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('blockArrow')\r\nexport class blockArrow extends Component {\r\n\r\n    hint: Hint;\r\n    monster: Monster;\r\n\r\n    outVec1: Vec3 = v3(0, 0, 0);\r\n\r\n    init(hint: Hint) {\r\n        this.hint = hint;\r\n\r\n        this.monster = this.hint.extraObj.monster;\r\n        let duration = this.hint.extraObj.duration;\r\n        let dis = this.hint.extraObj.dis;\r\n\r\n        let tf = this.hint.bodyNode.getComponent(UITransform);\r\n        tf.width = 120;\r\n\r\n        Tween.stopAllByTarget(tf);\r\n        tween(tf).to(duration, { width: dis }).call(() => {\r\n            this.hint.recycleSelf();\r\n        }).start();\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        // 角度\r\n        mapModel.player.node.getPosition(this.outVec1).subtract(this.monster.node.position);\r\n        this.node.angle = cocosUtil.vec2XAngle(this.outVec1);\r\n\r\n        // 位置\r\n        this.node.position = this.monster.node.position;\r\n    }\r\n\r\n}\r\n\r\n"]}