{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/skill/Skill5.ts"],"names":["Component","_decorator","audioManager","mapModel","physicsGroup","ccclass","property","Skill5","skill","timeCount","init","updateLogic","dt","getAtkCd","targetNode","mapSystem","getMinDisTargetNode","direction","getPosition","subtract","player","node","bulletSystem","addBullet","row","bulletId","PLAYER_BULLET2","playEffect","audio"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;;AACXC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U,GAE9B;;wBAEaM,M,WADZF,OAAO,CAAC,QAAD,C,gBAAR,MACaE,MADb,SAC4BP,SAD5B,CACsC;AAAA;AAAA;AAAA,eAElCQ,KAFkC;AAAA,eAIlCC,SAJkC,GAId,CAJc;AAAA;;AAMlCC,QAAAA,IAAI,CAACF,KAAD,EAAe;AACf,eAAKA,KAAL,GAAaA,KAAb;AACH;;AAEDG,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,eAAKH,SAAL,IAAkBG,EAAlB;;AACA,cAAI,KAAKH,SAAL,GAAiB,KAAKD,KAAL,CAAWK,QAAX,EAArB,EAA4C;AACxC;AACH;;AAED,cAAIC,UAAU,GAAG;AAAA;AAAA,oCAASC,SAAT,CAAmBC,mBAAnB,EAAjB;;AACA,cAAI,CAACF,UAAL,EAAiB;AACb;AACH;;AAED,eAAKL,SAAL,GAAiB,CAAjB;AACA,cAAIQ,SAAS,GAAGH,UAAU,CAACI,WAAX,GAAyBC,QAAzB,CAAkC;AAAA;AAAA,oCAASC,MAAT,CAAgBC,IAAhB,CAAqBH,WAArB,EAAlC,CAAhB;AAEA;AAAA;AAAA,oCAASI,YAAT,CAAsBC,SAAtB,CAAgC,KAAKf,KAAL,CAAWgB,GAAX,CAAeC,QAA/C,EAAyD;AAAA;AAAA,4CAAaC,cAAtE,EAAsF,IAAtF,EAA4FT,SAA5F;AACA;AAAA;AAAA,4CAAaU,UAAb,CAAwB,KAAKnB,KAAL,CAAWgB,GAAX,CAAeI,KAAvC;AACH;;AA1BiC,O","sourcesContent":["import { Component, _decorator } from 'cc';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 导弹\r\n@ccclass('Skill5')\r\nexport class Skill5 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        let targetNode = mapModel.mapSystem.getMinDisTargetNode();\r\n        if (!targetNode) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        let direction = targetNode.getPosition().subtract(mapModel.player.node.getPosition());\r\n\r\n        mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET2, null, direction);\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n}\r\n\r\n"]}