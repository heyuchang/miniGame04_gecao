{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/bullet/Bullet1011.ts"],"names":["Component","tween","_decorator","cocosUtil","utilTools","mapModel","ccclass","property","bullet1011","bullet","contactNotHide","g","v","vx","vy","init","node","by","angle","repeatForever","start","floatRadian","Math","PI","radian","getFloatValue","cos","sin","update","dt","pos","getPosition","x","y","setPosition","isInScreenVisible","recycleSelf","recycleSelfEnd","isValid","extraObj","subNum"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,U,OAAAA,U;;AAClBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U,GAE9B;;4BAEaM,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCR,SADhC,CAC0C;AAAA;AAAA;AAAA,eAEtCS,MAFsC;AAAA,eAGtCC,cAHsC,GAGZ,IAHY;AAAA,eAMtCC,CANsC,GAM1B,CAAC,GANyB;AAAA,eAQtCC,CARsC,GAQ1B,GAR0B;AAAA,eAUtCC,EAVsC,GAUzB,CAVyB;AAAA,eAWtCC,EAXsC,GAWzB,CAXyB;AAAA;;AAatCC,QAAAA,IAAI,CAACN,MAAD,EAAiB;AACjB,eAAKA,MAAL,GAAcA,MAAd;AAEAR,UAAAA,KAAK,CAAC,KAAKe,IAAN,CAAL,CAAiBC,EAAjB,CAAoB,CAApB,EAAuB;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAvB,EAAuCC,aAAvC,GAAuDC,KAAvD,GAHiB,CAKjB;;AACA,cAAIC,WAAW,GAAGC,IAAI,CAACC,EAAL,GAAU,EAA5B;AACA,cAAIC,MAAM,GAAG;AAAA;AAAA,sCAAUC,aAAV,CAAwBH,IAAI,CAACC,EAAL,GAAU,CAAV,GAAcF,WAAtC,EAAmDC,IAAI,CAACC,EAAL,GAAU,CAAV,GAAcF,WAAjE,CAAb;AAEA,eAAKR,EAAL,GAAU,KAAKD,CAAL,GAASU,IAAI,CAACI,GAAL,CAASF,MAAT,CAAnB;AACA,eAAKV,EAAL,GAAU,KAAKF,CAAL,GAASU,IAAI,CAACK,GAAL,CAASH,MAAT,CAAnB;AAEH;;AAEDI,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf,cAAIC,GAAG,GAAG,KAAKd,IAAL,CAAUe,WAAV,EAAV;AACAD,UAAAA,GAAG,CAACE,CAAJ,IAAS,KAAKnB,EAAL,GAAUgB,EAAnB;AACAC,UAAAA,GAAG,CAACG,CAAJ,IAAS,KAAKnB,EAAL,GAAUe,EAAnB;AACA,eAAKf,EAAL,IAAW,KAAKH,CAAL,GAASkB,EAApB;AACA,eAAKb,IAAL,CAAUkB,WAAV,CAAsBJ,GAAtB;;AACA,cAAI,CAAC;AAAA;AAAA,oCAASK,iBAAT,CAA2B,KAAKnB,IAAhC,CAAL,EAA4C;AACxC,iBAAKP,MAAL,CAAY2B,WAAZ;AACH;AACJ;;AAEDC,QAAAA,cAAc,GAAG;AACb;AACA,cAAI;AAAA;AAAA,sCAAUC,OAAV,CAAkB,KAAK7B,MAAL,CAAY8B,QAA9B,CAAJ,EAA6C;AACzC,iBAAK9B,MAAL,CAAY8B,QAAZ,CAAqBC,MAArB;AACH;AACJ;;AA3CqC,O","sourcesContent":["import { Component, tween, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 技能-锤子\r\n@ccclass('bullet1011')\r\nexport class bullet1011 extends Component {\r\n\r\n    bullet: Bullet;\r\n    contactNotHide: boolean = true;\r\n\r\n    // 重力加速度\r\n    g: number = -800;\r\n    // 初速度\r\n    v: number = 800;\r\n\r\n    vx: number = 0;\r\n    vy: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n\r\n        tween(this.node).by(1, { angle: 360 }).repeatForever().start();\r\n\r\n        // 抛射角度\r\n        let floatRadian = Math.PI / 15;\r\n        let radian = utilTools.getFloatValue(Math.PI / 2 - floatRadian, Math.PI / 2 + floatRadian);\r\n\r\n        this.vx = this.v * Math.cos(radian);\r\n        this.vy = this.v * Math.sin(radian);\r\n\r\n    }\r\n\r\n    update(dt: number) {\r\n        let pos = this.node.getPosition();\r\n        pos.x += this.vx * dt;\r\n        pos.y += this.vy * dt;\r\n        this.vy += this.g * dt;\r\n        this.node.setPosition(pos);\r\n        if (!mapModel.isInScreenVisible(this.node)) {\r\n            this.bullet.recycleSelf();\r\n        }\r\n    }\r\n\r\n    recycleSelfEnd() {\r\n        // 通知上级数量减少了\r\n        if (cocosUtil.isValid(this.bullet.extraObj)) {\r\n            this.bullet.extraObj.subNum();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n"]}