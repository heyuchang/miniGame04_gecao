{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/tyqSDK/platform/wechat/wechat.ts"],"names":["wechat","view","tyqSDK","global","latticeAdunit","iconCount","RIconAduni","adUnitId","_RIconAdunit","LIconAduni","_LIconAdunit","bannerAdUnitId","rewardedVideoAdUnitId","interstitialAdUnitId","bannerSize","size","_bannerSize","width","height","console","log","latticeAdUnitId","_latticeAdUnitId","gameClubSize","_gameClubSize","x","y","icon","userInfoButtonData","data","_userInfoButtonData","url","closeRewardVideoListener","cb","_closeRewardVideoListener","constructor","isWxAuthorize","systemInfo","userInfoButton","bannerAd","rewardedVideoAd","interstitialAd","RiconAD","LiconAD","gridAd","gridAdCunt","GameRecorder","startListener","resumeListener","pauseListener","stopListener","errorListener","abortListener","timeUpdateListener","gameClub","feedbackButton","showListener","hideListener","_bannerAdUnitId","_bannerAdObjList","_bannerShowIndex","_bannerTimer","_bannerAdRefreshTimeOutId","_rewardedVideoAdUnitId","_curRewardVideoAdUnitId","_shareValue","_rewardValue","_interstitialAdUnitId","mainBannerAD","_feedbackButtonData","window","wx","getSystemInfoSync","preLoadAd","createRewardedVideoAd","preLoadBanner","createInterstitialAd","i","length","id","createBanner","push","bannerObj","createBannerAd","adIntervals","style","left","windowWidth","top","windowHeight","onLoad","onError","res","onResize","wetchatLogin","cbOK","cbFail","wccode","wcencrypted","wciv","getLoginData","login","code","encryptedData","iv","getSetting","cbDone","isSupportedAPI","success","authSetting","fail","error","createUserInfoButton","getVisibleSize","type","destroyAuthorizeBtn","destroy","onTapUserInfoButton","onTap","userInfo","cbOk","getWxLoginResult","loginResult","warn","getUserInfo","withCredentials","userResult","Error","wxGetSetting","Promise","resolve","reject","sysInfo","screenWidth","screenHeight","button","text","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","errMsg","hide","show","e","err","shareAppMessage","_title","_imageUrl","_query","title","imageUrl","query","showBannerAd","next","refreshTime","showBannerTurns","times","clearInterval","showBannerNext","setInterval","forEach","ad","catch","hideBannerAd","clearTimeout","destroyBannerAd","isShow","Math","floor","random","showRewardVideoAd","successShowCb","closeListener","isComplete","isEnded","undefined","closeRewardVideo","offClose","offLoad","rewardedVideoAdOnLoadListener","offError","rewardedVideoAdOnErrorListener","load","then","onClose","bind","shareValue","parseInt","rewardValue","isShareBehavior","isRewardBehavior","reportShareBehavior","adunit","sceneID","result","showInterstitialAd","closeCb","onErrorListener","onCloseListener","interstitialAdOnLoadListener","createGameClubButton","pixelRatio","showGameClub","hideGameClub","postMessage","msg","info","message","value","getOpenDataContext","createFeedbackButton","image","onTapFeedbackButton","showFeedbackButton","hideFeedbackButton","getGameRecorder","registerRecordScreenEvent","on","duration","currentTime","startRecordScreen","callback","start","fps","bitrate","gop","pauseRecordScreen","pause","resumeRecordScreen","resume","stopRecordScreen","stop","abortRecordScreen","abort","createGameRecorderShareButton","onShow","callbak","onShowListener","offShow","onHide","onHideListener","offHide","navigateToMiniProgram","_appId","_path","appId","path","envVersion","complete","vibrateLong","vibrateShort","api","showModal","content","exitMiniProgram","showToast","getSystemInfo","aldSendEvent","str","objOrStr","createIconAd","styleItemArray","Array","map","_","appNameHidden","borderWidth","borderColor","createGameIcon","count","starTop","showIconAd","dir","setTimeout","createGridAd","adTheme","gridCount","opacity","showGridAd","hideGridAd","showShareMenu","bool","withShareTicket","menus","_instance","Wechat"],"mappings":"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","sourcesContent":["//import AD from \"../../../AD/AD\";\r\n\r\nimport { view } from \"cc\";\r\nimport { tyqSDK } from \"../../tyqSDK\";\r\n\r\nconst global = {\r\n\t/**临时处理加的 2020-12-29 */\r\n\tlatticeAdunit: null,\r\n\t/**临时处理加的 2020-12-29 */\r\n\ticonCount: null,\r\n}\r\nclass wechat {\r\n\t////////////////////////////\r\n\t// 类成员\r\n\t///////////////////////////\r\n\tpublic static readonly _instance: wechat = new wechat();\r\n\t/**是否授权登录 */\r\n\tpublic isWxAuthorize: boolean = false;\r\n\t/** 系统信息 */\r\n\tprivate systemInfo: wx.types.SystemInfo = null;\r\n\t/** 登录按钮对象 */\r\n\tprivate userInfoButton: UserInfoButton = null;\r\n\t/** banner广告对象 */\r\n\tprivate bannerAd: BannerAd = null;\r\n\t/** 奖励视频广告对象 */\r\n\tprivate rewardedVideoAd: RewardedVideoAd = null;\r\n\t/** 插屏广告对象 */\r\n\tprivate interstitialAd = null;\r\n\t/**推荐位广告对象 */\r\n\tprivate RiconAD: iconAd = null;\r\n\tprivate LiconAD: iconAd = null;\r\n\t/**格子广告对象 */\r\n\tprivate gridAd: gridAd = null;\r\n\t/**格子广告数量 */\r\n\tprivate gridAdCunt: number = null;\r\n\t/** 游戏画面录制对象 */\r\n\tprivate GameRecorder: GameRecorder = null;\r\n\t/** 录屏开始事件 */\r\n\tprivate startListener: Function = null;\r\n\t/** 监听录屏继续事件 */\r\n\tprivate resumeListener: Function = null;\r\n\t/** 录屏暂停事件 */\r\n\tprivate pauseListener: Function = null;\r\n\t/**  录屏结束事件 */\r\n\tprivate stopListener: Function = null;\r\n\t/**  录屏错误事件 */\r\n\tprivate errorListener: Function = null;\r\n\t/** 录屏取消事件 */\r\n\tprivate abortListener: Function = null;\r\n\t/** 录制时间更新事件。在录制过程中触发该事件 */\r\n\tprivate timeUpdateListener: Function = null;\r\n\t/** 游戏圈对象 */\r\n\tprivate gameClub: GameClubButton = null;\r\n\t/** 意见反馈按钮 */\r\n\tprivate feedbackButton: FeedbackButton = null;\r\n\t/** 切换到前台事件 */\r\n\tprivate showListener: Function = null;\r\n\t/** 切换到后台事件 */\r\n\tprivate hideListener: Function = null;\r\n\t/** banner广告id */\r\n\tpublic _bannerAdUnitId = [];\r\n\tprivate _bannerAdObjList: BannerAd[] = [];\r\n\tprivate _bannerShowIndex = 0;\r\n\tprivate _bannerTimer = -1;\r\n\tprivate _bannerAdRefreshTimeOutId: number = 0;\r\n\t/** 奖励视频广告id */\r\n\tpublic _rewardedVideoAdUnitId = [];\r\n\r\n\tpublic _curRewardVideoAdUnitId = \"\"\r\n\tprivate _shareValue: number = 0\r\n\tprivate _rewardValue: number = 1\r\n\r\n\t/** 插屏广告id */\r\n\tpublic _interstitialAdUnitId = [];\r\n\t/**格子广告ID */\r\n\tprivate _latticeAdUnitId = ''\r\n\r\n\t/**推荐位广告，左右 */\r\n\tprivate _RIconAdunit = ''\r\n\tprivate _LIconAdunit = ''\r\n\r\n\t/** 登录按钮信息 */\r\n\tprivate mainBannerAD = null;\r\n\tprivate _userInfoButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** 反馈页面的按钮信息 */\r\n\tprivate _feedbackButtonData = {\r\n\t\twidth: null,\r\n\t\theight: null,\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t\turl: null\r\n\t};\r\n\t/** banner广告的像素大小 */\r\n\tprivate _bannerSize = {\r\n\t\twidth: 600,\r\n\t\theight: 172\r\n\t};\r\n\r\n\tprivate _gameClubSize = {\r\n\t\ticon: '',\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\twidth: 0,\r\n\t\theight: 0\r\n\t};\r\n\tprivate _closeRewardVideoListener: Function = null;\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic set RIconAduni(adUnitId: string) {\r\n\t\tthis._RIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set LIconAduni(adUnitId: string) {\r\n\t\tthis._LIconAdunit = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerAdUnitId(adUnitId: string) {\r\n\t\t// this._bannerAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set rewardedVideoAdUnitId(adUnitId: string) {\r\n\t\t// this._rewardedVideoAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set interstitialAdUnitId(adUnitId: string) {\r\n\t\t// this._interstitialAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set bannerSize(size: any) {\r\n\t\tthis._bannerSize.width = size.width;\r\n\t\tthis._bannerSize.height = size.height;\r\n\t\tconsole.log(\"this._bannerSize = \", this._bannerSize)\r\n\t}\r\n\r\n\tpublic set latticeAdUnitId(adUnitId: string) {\r\n\t\tthis._latticeAdUnitId = adUnitId;\r\n\t}\r\n\r\n\tpublic set gameClubSize(size: any) {\r\n\t\tthis._gameClubSize.x = size.x;\r\n\t\tthis._gameClubSize.y = size.y;\r\n\t\tthis._gameClubSize.width = size.width;\r\n\t\tthis._gameClubSize.height = size.height;\r\n\t\tthis._gameClubSize.icon = size.icon;\r\n\t}\r\n\r\n\tpublic set userInfoButtonData(data: any) {\r\n\t\tthis._userInfoButtonData.width = data.width;\r\n\t\tthis._userInfoButtonData.height = data.height;\r\n\t\tthis._userInfoButtonData.x = data.x;\r\n\t\tthis._userInfoButtonData.y = data.y;\r\n\t\tthis._userInfoButtonData.url = data.url;\r\n\t}\r\n\r\n\tpublic set closeRewardVideoListener(cb: Function) {\r\n\t\tthis._closeRewardVideoListener = cb;\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// get、set访问器\r\n\t///////////////////////////\r\n\tpublic constructor() {\r\n\t\tif (window.wx) {\r\n\t\t\t// this.registerRecordScreenEvent();\r\n\t\t\tthis.getSystemInfoSync();\r\n\t\t}\r\n\t}\r\n\t//预加载所有广告\r\n\tpublic preLoadAd() {\r\n\t\tthis.createRewardedVideoAd();\r\n\t\tthis.preLoadBanner();\r\n\t\tthis.createInterstitialAd();\r\n\t}\r\n\t//预加载所有banner广告\r\n\tpublic preLoadBanner() {\r\n\r\n\t\tfor (let i = 0; i < this._bannerAdUnitId.length; i++) {\r\n\t\t\tlet id = this._bannerAdUnitId[i];\r\n\t\t\tlet bannerAd = this.createBanner(id);\r\n\t\t\tthis._bannerAdObjList.push(bannerAd);\r\n\t\t}\r\n\r\n\t}\r\n\tprivate createBanner(id) {\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\t// let id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tlet bannerObj = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\t// tyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tbannerObj.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功' + id);\r\n\r\n\t\t\t// 移除setTimeout\r\n\t\t\t// if (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t// \tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t// }\r\n\t\t\t// if (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\t// next && next(true);\r\n\t\t});\r\n\t\tbannerObj.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', id, res);\r\n\t\t\t// next && next(false);\r\n\t\t});\r\n\t\tbannerObj.onResize((res: { width: number; height: number }) => {\r\n\t\t\tbannerObj.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tbannerObj.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t\treturn bannerObj;\r\n\t}\r\n\t////////////////////////////\r\n\t// 登录模块\r\n\t///////////////////////////\r\n\t/**\r\n\t * 登陆接口\r\n\t * @param cbOK\r\n\t * @param cbFail\r\n\t */\r\n\tpublic wetchatLogin(cbOK, cbFail): void {\r\n\t\tlet data = {\r\n\t\t\twccode: null,\r\n\t\t\twcencrypted: null,\r\n\t\t\twciv: null,\r\n\t\t\t// userInfo: null\r\n\t\t};\r\n\t\t// 获取玩家数据\r\n\t\tlet getLoginData = () => {\r\n\t\t\tthis.login((code: any) => {\r\n\t\t\t\tdata.wccode = code;\r\n\t\t\t\tif (cbOK)\r\n\t\t\t\t\tcbOK(code);\r\n\t\t\t}, (res: any) => {\r\n\t\t\t\tdata.wcencrypted = res.encryptedData;\r\n\t\t\t\tdata.wciv = res.iv;\r\n\t\t\t\tif (cbFail)\r\n\t\t\t\t\tcbFail(data);\r\n\t\t\t});\r\n\t\t};\r\n\t\tgetLoginData();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户的当前设置。返回值中只会出现小程序已经向用户请求过的权限\r\n\t *\r\n\t * @param cbDone 登陆成功后回调\r\n\t * @param cbFail 登陆失败后回调\r\n\t */\r\n\tpublic getSetting(cbDone, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getSetting)) {\r\n\t\t\twx.getSetting({\r\n\t\t\t\tsuccess: (res: { authSetting: wx.types.AuthSetting }) => {\r\n\t\t\t\t\t// if (res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t// \tif (cbDone)\r\n\t\t\t\t\t// \t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t\t// } else\r\n\t\t\t\t\t// \tif (cbFail) cbFail(\"开关无\");\r\n\t\t\t\t\tcbDone(res.authSetting['scope.userInfo']);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (res) => {\r\n\t\t\t\t\tif (cbFail) cbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.error(\"----> 微信版本不支持getSetting API\");\r\n\t\t\tif (cbFail) cbFail(\"----> 微信版本不支持getSetting API\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建用户登录按钮\r\n\t */\r\n\tpublic createUserInfoButton(x = 0, y = 0, width = view.getVisibleSize().width, height = view.getVisibleSize().height): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t\t\tthis.userInfoButton = wx.createUserInfoButton({\r\n\t\t\t\ttype: 'image',\r\n\t\t\t\t// image: this._userInfoButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\t// left: this.systemInfo.screenWidth * this._userInfoButtonData.x - this._userInfoButtonData.width / 2,\r\n\t\t\t\t\t// top: this.systemInfo.screenHeight * this._userInfoButtonData.y - this._userInfoButtonData.height / 2,\r\n\t\t\t\t\t// width: this._userInfoButtonData.width,\r\n\t\t\t\t\t// height: this._userInfoButtonData.height\r\n\t\t\t\t\tleft: x,\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\twidth: view.getVisibleSize().width,\r\n\t\t\t\t\theight: view.getVisibleSize().height\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t\t}\r\n\t}\r\n\r\n\t// /**\r\n\t//  * 根据node的属性，创建一个授权按钮\r\n\t//  * @param btnNode\r\n\t//  * @param cbOk 成功后回调\r\n\t//  * @param cbFail 失败后回调\r\n\t//  */\r\n\t// public createAuthorizeBtnByNode(btnNode: Node, cbOk?: Function, cbFail?: Function): void {\r\n\t// \tif (!wechat.isSupportedAPI(wx.createUserInfoButton)) {\r\n\t// \t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用授权按钮，请升级到最新微信版本后重试');\r\n\t// \t\treturn;\r\n\t// \t}\r\n\t// \tthis.destroyAuthorizeBtn()\r\n\r\n\t// \tlet btnSize = size(btnNode.width + 10, btnNode.height + 10);\r\n\t// \tlet btnPosI = btnNode.convertToWorldSpaceAR(v2(0, 0));\r\n\t// \tlet frameSize = view.getFrameSize();\r\n\t// \tlet winSize = director.getWinSize();\r\n\t// \t//适配不同机型来创建微信授权按钮\r\n\t// \tlet left = (btnPosI.x - btnSize.width * 0.5) / winSize.width * frameSize.width;\r\n\t// \tlet top = (winSize.height - btnPosI.y - btnSize.height * 0.5) / winSize.height * frameSize.height;\r\n\t// \tlet width = btnSize.width / winSize.width * frameSize.width;\r\n\t// \tlet height = btnSize.height / winSize.height * frameSize.height;\r\n\r\n\t// \tthis.userInfoButton = wx.createUserInfoButton({\r\n\t// \t\ttype: 'text',\r\n\t// \t\ttext: '',\r\n\t// \t\t// type: 'image',\r\n\t// \t\t// image: this._userInfoButtonData.url,\r\n\t// \t\tstyle: {\r\n\t// \t\t\tleft: left,\r\n\t// \t\t\ttop: top,\r\n\t// \t\t\twidth: width,\r\n\t// \t\t\theight: height,\r\n\t// \t\t\t// lineHeight: 0,\r\n\t// \t\t\t// backgroundColor: '',\r\n\t// \t\t\t// color: '#ffffff',\r\n\t// \t\t\t// textAlign: 'center',\r\n\t// \t\t\t// fontSize: 16,\r\n\t// \t\t\t// borderRadius: 4\r\n\t// \t\t}\r\n\t// \t})\r\n\r\n\t// \tthis.onTapUserInfoButton(cbOk, cbFail)\r\n\t// }\r\n\r\n\tpublic destroyAuthorizeBtn(): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.destroy();\r\n\t\t\tthis.userInfoButton = null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * @description 监听用户点击登录按钮的事件\r\n\t */\r\n\tprivate onTapUserInfoButton(cbOK, cbFail): void {\r\n\t\tif (this.userInfoButton) {\r\n\t\t\tthis.userInfoButton.onTap((res: any) => {\r\n\t\t\t\t// 点击登录按钮，用户授权成功\r\n\t\t\t\ttyqSDK.log('onTap', res);\r\n\t\t\t\tif (res.userInfo) {\r\n\t\t\t\t\tthis.destroyAuthorizeBtn();\r\n\t\t\t\t\tif (cbOK)\r\n\t\t\t\t\t\tcbOK(res);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcbFail(res);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail(null);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 登录游戏服务\r\n\t */\r\n\tpublic login(cbOk, cbFail): void {\r\n\t\twx.login({\r\n\t\t\tsuccess: (res: { code: string }) => {\r\n\t\t\t\tcbOk(res.code);\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tcbFail();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * 微信登录，获取 code 和 encryptData(未测试)\r\n\t */\r\n\tpublic getWxLoginResult(cb) {\r\n\t\twx.login({\r\n\t\t\tsuccess(loginResult) {\r\n\t\t\t\tconsole.warn(\"-----微信登录--\", loginResult)\r\n\t\t\t\twx.getUserInfo({\r\n\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t\tsuccess(userResult) {\r\n\t\t\t\t\t\tconsole.warn(\"-----获取用户信息结果--\", userResult)\r\n\t\t\t\t\t\tcb(null, {\r\n\t\t\t\t\t\t\tcode: loginResult.code,\r\n\t\t\t\t\t\t\tencryptedData: userResult.encryptedData,\r\n\t\t\t\t\t\t\tiv: userResult.iv,\r\n\t\t\t\t\t\t\tuserInfo: userResult.userInfo\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.error(\"-----获取用户信息失败--\")\r\n\t\t\t\t\t\tcb(new Error('获取微信用户信息失败，请检查网络状态'), null);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail() {\r\n\t\t\t\tcb(new Error('微信登录失败，请检查网络状态'), null);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\t/** 微信获得设置 */\r\n\tpublic wxGetSetting() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ttry {\r\n\t\t\t\twx.getSetting({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"微信授权信息1\", res);\r\n\t\t\t\t\t\t//是否授权\r\n\t\t\t\t\t\tif (!res.authSetting['scope.userInfo']) {\r\n\t\t\t\t\t\t\tconsole.log(\"未授权----\")\r\n\t\t\t\t\t\t\tlet sysInfo = wx.getSystemInfoSync();\r\n\t\t\t\t\t\t\t// 获取微信界面大小\r\n\t\t\t\t\t\t\tlet screenWidth = sysInfo.screenWidth;\r\n\t\t\t\t\t\t\tlet screenHeight = sysInfo.screenHeight;\r\n\t\t\t\t\t\t\tlet button = wx.createUserInfoButton({\r\n\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\ttext: '',\r\n\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t//   left: screenWidth/2-260/2,\r\n\t\t\t\t\t\t\t\t\t//   top: screenHeight-260,\r\n\t\t\t\t\t\t\t\t\t//   width: 260,\r\n\t\t\t\t\t\t\t\t\t//   height: 60,\r\n\t\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\t\t\t\twidth: screenWidth,\r\n\t\t\t\t\t\t\t\t\theight: screenHeight,\r\n\t\t\t\t\t\t\t\t\tlineHeight: 60,\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0)',\r\n\t\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\t\tfontSize: 24,\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tbutton.onTap((res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"授权结果\", res)\r\n\t\t\t\t\t\t\t\tif (res.errMsg == \"getUserInfo:ok\") {\r\n\t\t\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果1 resolve\", res)\r\n\t\t\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"授权结果2 reject\", res)\r\n\t\t\t\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbutton.hide()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tconsole.log(\"显示授权按钮\", button)\r\n\t\t\t\t\t\t\tbutton.show();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.isWxAuthorize = true\r\n\t\t\t\t\t\t\tconsole.log(\"已经授权了2\")\r\n\t\t\t\t\t\t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(\"微信授权失败处理函数11\");\r\n\t\t\t\t\t\treject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log(\"微信授权异常处理函数11\");\r\n\t\t\t\treject(e);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tconsole.log(\"----微信授权\", res)\r\n\t\t\t// \t  if (res.authSetting['scope.userInfo']==false) {\r\n\t\t\t// \t\twx.authorize({\r\n\t\t\t// \t\t  scope: 'scope.userInfo',\r\n\t\t\t// \t\t  success () {\r\n\t\t\t// \t\t\tconsole.log(\"-----成功\")\r\n\t\t\t// \t\t\twx.getUserInfo({\r\n\t\t\t// \t\t\t\tsuccess: (res: any) => {\r\n\t\t\t// \t\t\t\t\tif (resolve)\r\n\t\t\t// \t\t\t\t\t\tresolve(res);\r\n\t\t\t// \t\t\t\t},\r\n\t\t\t// \t\t\t\tfail: (err) => {\r\n\t\t\t// \t\t\t\t\tif (reject)\r\n\t\t\t// \t\t\t\t\t\treject(err);\r\n\t\t\t// \t\t\t\t}\r\n\t\t\t// \t\t\t});\r\n\t\t\t// \t\t  },\r\n\t\t\t// \t\t  fail(){\r\n\t\t\t// \t\t\tconsole.log(\"-----微信授权失败处理函数11\")\r\n\t\t\t// \t\t\treject(res);\r\n\t\t\t// \t\t  }\r\n\t\t\t// \t\t})\r\n\t\t\t// \t  }else{\r\n\t\t\t// \t\tthis.isWxAuthorize = true\r\n\t\t\t// \t\tconsole.log(\"已经授权了2\")\r\n\t\t\t// \t\t//已经授权了\t\t\t\t\t\t\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t  }\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// })\r\n\r\n\r\n\r\n\t\t\t// wx.getSetting({\r\n\t\t\t// \tsuccess(res) {\r\n\t\t\t// \t\tresolve(res);\r\n\t\t\t// \t},\r\n\t\t\t// \tfail: (err) => {\r\n\t\t\t// \t\tif (reject)\r\n\t\t\t// \t\t\treject(err);\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 获取用户信息\r\n\t */\r\n\tpublic getUserInfo(resolve?, reject?): void {\r\n\t\tthis.getSetting((res: any) => {\r\n\t\t\twx.getUserInfo({\r\n\t\t\t\tsuccess: (res: any) => {\r\n\t\t\t\t\tif (resolve)\r\n\t\t\t\t\t\tresolve(res);\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\tif (reject)\r\n\t\t\t\t\t\treject(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, (res) => {\r\n\t\t\tif (reject) {\r\n\t\t\t\ttyqSDK.log(res);\r\n\t\t\t\treject(\"getsetting 失败\");\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 分享\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 分享，主动拉起转发，进入选择通讯录界面\r\n\t * @param _title\r\n\t * @param _imageUrl\r\n\t * @param _query\r\n\t */\r\n\tpublic shareAppMessage(_title: string, _imageUrl: string, _query: string): void {\r\n\t\twx.shareAppMessage({\r\n\t\t\ttitle: _title,\r\n\t\t\timageUrl: _imageUrl,\r\n\t\t\tquery: _query\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// banner广告\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 显示banner广告\r\n\t   * @param refreshTime 自动刷新时间，默认30秒，必须>=30秒；\r\n\t */\r\n\tpublic showBannerAd(next?, refreshTime: number = 30) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tif (!this.bannerAd) {\r\n\t\t\tthis.createBannerAd(refreshTime, next);\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.bannerAd.show();\r\n\t\t\tnext && next(true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//轮流显示banner\r\n\tpublic showBannerTurns(times: number) {\r\n\t\tif (!wechat.isSupportedAPI(wx.createBannerAd)) return;\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis.showBannerNext();\r\n\r\n\t\tthis._bannerTimer = setInterval(() => {\r\n\t\t\tthis.showBannerNext();\r\n\t\t}, times)\r\n\t}\r\n\r\n\r\n\tprivate showBannerNext() {\r\n\t\tif (this._bannerAdObjList.length <= 0) {\r\n\t\t\tconsole.error('zzzzzzz无banner广告');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t\tthis._bannerAdObjList[this._bannerShowIndex].hide();\r\n\t\tthis._bannerShowIndex++;\r\n\t\tif (this._bannerShowIndex >= this._bannerAdObjList.length) {\r\n\t\t\tthis._bannerShowIndex = 0;\r\n\t\t}\r\n\t\tlet bannerAd = this._bannerAdObjList[this._bannerShowIndex];\r\n\r\n\t\tif (bannerAd) {\r\n\t\t\tbannerAd.show().catch(() => {\r\n\t\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\t\tif (bannerAd) {\r\n\t\t\t\t\tbannerAd.show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet id = this._bannerAdUnitId[this._bannerShowIndex];\r\n\t\t\tbannerAd = this.createBanner(id);\r\n\t\t\tif (bannerAd) {\r\n\t\t\t\tbannerAd.show();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @description 隐藏banner广告\r\n\t */\r\n\tpublic hideBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.hide();\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t\tclearInterval(this._bannerTimer);\r\n\t\tthis._bannerAdObjList.forEach(ad => {\r\n\t\t\tad.hide();\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t* @description 销毁banner广告\r\n\t*/\r\n\tpublic destroyBannerAd() {\r\n\t\tif (this.bannerAd) {\r\n\t\t\tthis.bannerAd.destroy();\r\n\t\t\tthis.bannerAd = null;\r\n\t\t}\r\n\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建banner广告\r\n\t */\r\n\tpublic createBannerAd(refreshTime, next?, isShow = true) {\r\n\t\ttyqSDK.log(\"banner width= \", this._bannerSize.width, this._bannerAdUnitId)\r\n\t\tlet bannerSize = {\r\n\t\t\t// width: this._bannerSize.width / this.systemInfo.pixelRatio,\r\n\t\t\t// height: this._bannerSize.height / this.systemInfo.pixelRatio\r\n\t\t\twidth: this._bannerSize.width * 0.65,\r\n\t\t\theight: this._bannerSize.height * 0.35\r\n\t\t};\r\n\t\tlet id = this._bannerAdUnitId[Math.floor(Math.random() * this._bannerAdUnitId.length)];\r\n\t\tthis.bannerAd = wx.createBannerAd({\r\n\t\t\t// 广告单元 id\r\n\t\t\tadUnitId: id,\r\n\t\t\t// 广告自动刷新的间隔时间，单位为秒，参数值必须大于等于30（该参数不传入时 Banner 广告不会自动刷新）\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this.systemInfo.windowWidth / 2 - bannerSize.width / 2,\r\n\t\t\t\ttop: this.systemInfo.windowHeight - bannerSize.height + this.systemInfo.windowHeight * 0.1,\r\n\t\t\t\theight: bannerSize.height,\r\n\t\t\t\twidth: bannerSize.width\r\n\t\t\t}\r\n\t\t});\r\n\t\ttyqSDK.log('bannerSize: ', bannerSize, ', systemInfo: ', this.systemInfo, ',this.bannerAd.style: ', this.bannerAd.style);\r\n\r\n\t\tthis.bannerAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载成功');\r\n\t\t\t// 移除setTimeout\r\n\t\t\tif (this._bannerAdRefreshTimeOutId != 0) {\r\n\t\t\t\tclearTimeout(this._bannerAdRefreshTimeOutId);\r\n\t\t\t\tthis._bannerAdRefreshTimeOutId = 0;\r\n\t\t\t}\r\n\t\t\tif (isShow) this.bannerAd.show();\r\n\t\t\t// 延时刷新banner\r\n\t\t\t// if (refreshTime > 0) {\r\n\t\t\t// \tthis._bannerAdRefreshTimeOutId = setTimeout(() => {\r\n\t\t\t// \t\tif (this.bannerAd)\r\n\t\t\t// \t\t\tthis.showBannerAd(refreshTime);\r\n\t\t\t// \t}, refreshTime * 1000);\r\n\t\t\t// }\r\n\t\t\tnext && next(true);\r\n\t\t});\r\n\t\tthis.bannerAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, banner广告加载失败：', res);\r\n\t\t\tnext && next(false);\r\n\t\t});\r\n\t\tthis.bannerAd.onResize((res: { width: number; height: number }) => {\r\n\t\t\tthis.bannerAd.style.left = this.systemInfo.windowWidth / 2 - res.width / 2 - 0.1;\r\n\t\t\tthis.bannerAd.style.top = this.systemInfo.windowHeight - res.height + 0.1;\r\n\t\t\t//AD.setErrNodeY(-((this.bannerAd.style.top * winSize.height / this.systemInfo.windowHeight) - winSize.height / 2));\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t////////////////////////////\r\n\t// 奖励广告\r\n\t///////////////////////////\r\n\tpublic showRewardVideoAd(successShowCb?: Function) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.createRewardedVideoAd();\r\n\t\t\tif (!this.rewardedVideoAd) {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频对象为不存在');\r\n\t\t\t\treject();\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tlet closeListener = (res: { isEnded: boolean }) => {\r\n\t\t\t\tlet isComplete: boolean;\r\n\t\t\t\t// 小于 2.1.0 的基础库版本，res 是一个 undefined\r\n\t\t\t\tif (res && res.isEnded || res === undefined) {\r\n\t\t\t\t\tisComplete = true;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tisComplete = false;\r\n\t\t\t\t\tresolve(isComplete);\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeRewardVideo();\r\n\t\t\t\tthis.rewardedVideoAd.offClose(closeListener);\r\n\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\tthis.rewardedVideoAd = null;\r\n\t\t\t\tthis.createRewardedVideoAd();\r\n\t\t\t};\r\n\r\n\t\t\tlet errorListener = (res: { errMsg: string; errCode: number }) => {\r\n\t\t\t\ttyqSDK.log('=====> @framework, 奖励视频发生错误：', res);\r\n\t\t\t\t// 再拉一次视频\r\n\t\t\t\tthis.rewardedVideoAd.load()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\treturn this.rewardedVideoAd.show();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(errorListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offLoad(this.rewardedVideoAdOnLoadListener);\r\n\t\t\t\t\t\tthis.rewardedVideoAd.offError(this.rewardedVideoAdOnErrorListener);\r\n\t\t\t\t\t\treject();\r\n\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\tthis.rewardedVideoAd.onClose(closeListener);\r\n\t\t\tthis.rewardedVideoAd.onError(errorListener);\r\n\r\n\t\t\tthis.rewardedVideoAd.load().then(() => {\r\n\t\t\t\tthis.rewardedVideoAd.show().then(() => {\r\n\t\t\t\t\tif (successShowCb) {\r\n\t\t\t\t\t\tsuccessShowCb();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 创建奖励视频单例（小游戏端是全局单例）\r\n\t */\r\n\tpublic createRewardedVideoAd(): void {\r\n\t\tif (!wx.createRewardedVideoAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用奖励视频功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.rewardedVideoAd) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet id = Math.floor(Math.random() * this._rewardedVideoAdUnitId.length);\r\n\t\tthis.rewardedVideoAd = wx.createRewardedVideoAd({\r\n\t\t\tadUnitId: this._rewardedVideoAdUnitId[id]\r\n\t\t});\r\n\t\tthis._curRewardVideoAdUnitId = this._rewardedVideoAdUnitId[id]\r\n\t\tthis.rewardedVideoAd.onLoad(this.rewardedVideoAdOnLoadListener.bind(this));\r\n\t\tthis.rewardedVideoAd.onError(this.rewardedVideoAdOnErrorListener);\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnErrorListener() {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告失败');\r\n\t}\r\n\r\n\tprivate rewardedVideoAdOnLoadListener(res) {\r\n\t\ttyqSDK.log('=====> @framework, 加载视频广告成功', res);\r\n\t\tif (res) {\r\n\t\t\tif (res.shareValue) {\r\n\t\t\t\tthis._shareValue = parseInt(res.shareValue)\r\n\t\t\t}\r\n\r\n\t\t\tif (res.rewardValue) {\r\n\t\t\t\tthis._rewardValue = parseInt(res.rewardValue)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic isShareBehavior() {\r\n\t\treturn this._shareValue == 1\r\n\t}\r\n\r\n\tpublic isRewardBehavior() {\r\n\t\treturn this._rewardValue == 1\r\n\t}\r\n\r\n\r\n\tpublic reportShareBehavior(data: any) {\r\n\t\tdata.adunit = this._curRewardVideoAdUnitId\r\n\t\tdata.sceneID = 1\r\n\t\tdata.shareValue = this._shareValue\r\n\t\tdata.rewardValue = this._rewardValue\r\n\r\n\t\tconst result = this.rewardedVideoAd.reportShareBehavior(data)\r\n\t\tif (result) {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-成功', data);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework, 视频广告行为上报-失败', data);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate closeRewardVideo(): void {\r\n\t\tif (this._closeRewardVideoListener) {\r\n\t\t\tthis._closeRewardVideoListener();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 插屏广告\r\n\t///////////////////////////\r\n\tpublic showInterstitialAd(closeCb?, successShowCb?: Function): void {\r\n\t\tif (!wx.createInterstitialAd) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用插屏广告功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.createInterstitialAd();\r\n\r\n\t\tlet onErrorListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('=====> @framework,插屏创建失败: ', res);\r\n\t\t\tcloseCb && closeCb();\r\n\t\t};\r\n\t\tthis.interstitialAd.onError(onErrorListener);\r\n\r\n\t\tlet onCloseListener = (res) => {\r\n\t\t\tthis.interstitialAd.offError(onErrorListener);\r\n\t\t\tthis.interstitialAd.offClose(onCloseListener);\r\n\t\t\tthis.interstitialAd.offLoad(this.interstitialAdOnLoadListener);\r\n\t\t\tthis.interstitialAd = null;\r\n\t\t\ttyqSDK.log('----> 插屏 广告关闭')\r\n\t\t\tcloseCb && closeCb();\r\n\t\t\tthis.createInterstitialAd();\r\n\t\t};\r\n\t\tthis.interstitialAd.onClose(onCloseListener);\r\n\r\n\t\tthis.interstitialAd.show().then(() => {\r\n\t\t\ttyqSDK.log(\"----> 成功显示插屏广告\");\r\n\t\t\tif (successShowCb) {\r\n\t\t\t\tsuccessShowCb();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic createInterstitialAd() {\r\n\t\tif (!this.interstitialAd) {\r\n\t\t\tlet id = this._interstitialAdUnitId[Math.floor(Math.random() * this._interstitialAdUnitId.length)];\r\n\t\t\tthis.interstitialAd = wx.createInterstitialAd({\r\n\t\t\t\tadUnitId: id\r\n\t\t\t});\r\n\t\t\tthis.interstitialAd.onLoad(this.interstitialAdOnLoadListener);\r\n\t\t\t// this.interstitialAd.onError(() => {\r\n\t\t\t// \ttyqSDK.log('=====> @framework,插屏创建失败');\r\n\t\t\t// });\r\n\t\t}\r\n\r\n\t}\r\n\tprivate interstitialAdOnLoadListener() {\r\n\t\ttyqSDK.log('=====> @framework,插屏创建成功');\r\n\t}\r\n\t////////////////////////////\r\n\t// 游戏圈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建微信游戏圈\r\n\t */\r\n\tpublic createGameClubButton(): void {\r\n\t\t// 微信圈是用户必要的功能，不需求弹出提示\r\n\t\tif (!wx.createGameClubButton) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用游戏圈功能，请升级到最新微信版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.gameClub) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.gameClub = wx.createGameClubButton({\r\n\t\t\ticon: this._gameClubSize.icon,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: this._gameClubSize.x / this.systemInfo.pixelRatio,\r\n\t\t\t\ttop: this._gameClubSize.y / this.systemInfo.pixelRatio,\r\n\t\t\t\twidth: this._gameClubSize.width,\r\n\t\t\t\theight: this._gameClubSize.height\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.gameClub.hide();\r\n\t\ttyqSDK.log('gameClub', this.gameClub);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示微信游戏圈\r\n\t */\r\n\tpublic showGameClub(): void {\r\n\t\ttyqSDK.log('显示游戏圈：', this.gameClub);\r\n\t\tthis.createGameClubButton();\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.show();\r\n\t\t\ttyqSDK.log('显示游戏圈成功');\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏微信游戏圈\r\n\t */\r\n\tpublic hideGameClub(): void {\r\n\t\tif (this.gameClub) {\r\n\t\t\tthis.gameClub.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 开放数据域\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 向开放数据域发送消息\r\n\t * @param msg 要发送的消息，message 中及嵌套对象中 key 的 value 只能是 primitive value。即 number、string、boolean、null、undefined\r\n\t */\r\n\tpublic postMessage(msg: any, info?: any): void {\r\n\t\tlet data = {\r\n\t\t\tmessage: '',\r\n\t\t\tvalue: info\r\n\t\t}\r\n\t\tdata.message = msg;\r\n\t\tdata.value = info;\r\n\t\ttyqSDK.log('发送信息: ', data);\r\n\t\twx.getOpenDataContext().postMessage(data);\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 意见反馈\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 创建打开意见反馈页面的按钮, 默认使用图片按钮的形式创建\r\n\t */\r\n\tpublic createFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.createFeedbackButton)) {\r\n\t\t\tthis.feedbackButton = wx.createFeedbackButton({\r\n\t\t\t\ttype: 'image', // 按钮的类型.支持text、image\r\n\t\t\t\timage: this._feedbackButtonData.url,\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tleft: this._feedbackButtonData.x, // 左上角横坐标\r\n\t\t\t\t\ttop: this._feedbackButtonData.y, // 左上角纵坐标\r\n\t\t\t\t\twidth: this._feedbackButtonData.width, // 宽度\r\n\t\t\t\t\theight: this._feedbackButtonData.height // 高度\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcbOk(this.feedbackButton);\r\n\t\t} else {\r\n\t\t\ttyqSDK.log('=====> @framework,当前微信版本过低，无法使用反馈按钮，请升级到最新微信版本后重试');\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听意见反馈按钮的点击事件(在创建意见反馈按钮后，立即执行该函数，注册点击事件)，只能使用一次\r\n\t */\r\n\tpublic onTapFeedbackButton(cbOk, cbFail): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.onTap(() => {\r\n\t\t\t\tcbOk();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 显示意见反馈按钮\r\n\t */\r\n\tpublic showFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.show();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 隐藏意见反馈按钮\r\n\t */\r\n\tpublic hideFeedbackButton(): void {\r\n\t\tif (this.feedbackButton) {\r\n\t\t\tthis.feedbackButton.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 录屏\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取全局唯一的游戏画面录制对象\r\n\t */\r\n\tpublic getGameRecorder(cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t\tcbOk();\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic registerRecordScreenEvent(): void {\r\n\t\tif (!wechat.isSupportedAPI(wx.getGameRecorder)) {\r\n\t\t\ttyqSDK.log('=====> @framework,当前客户端版过低，无法使用录制功能，请升级到最新客户端版本后重试');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.GameRecorder = wx.getGameRecorder();\r\n\t\t// 监听录屏继续事件\r\n\t\tthis.GameRecorder.on('start', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.resumeListener) {\r\n\t\t\t\tthis.resumeListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏暂停事件\r\n\t\tthis.GameRecorder.on('pause', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.pauseListener) {\r\n\t\t\t\tthis.pauseListener();\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 监听录屏结束事件。可以通过 onStop 接口监听录屏结束事件，获得录屏地址\r\n\t\tthis.GameRecorder.on('stop', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.stopListener) {\r\n\t\t\t\ttyqSDK.log('视频的时长：', res.duration);\r\n\t\t\t\tthis.stopListener(res.duration);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 监听录屏错误事件\r\n\t\tthis.GameRecorder.on('error', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏错误：', res.error.message, ',code: ', res.error.code);\r\n\t\t\tif (this.errorListener) {\r\n\t\t\t\tthis.errorListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制时间更新事件。在录制过程中触发该事件\r\n\t\tthis.GameRecorder.on('timeUpdate', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\ttyqSDK.log('=====> @framework,录屏到第几秒：', res.currentTime);\r\n\t\t\tif (this.timeUpdateListener) {\r\n\t\t\t\tthis.timeUpdateListener();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 录制取消事件\r\n\t\tthis.GameRecorder.on('abort', (res: { currentTime?: number; error?: { code: number; message: string }; duration?: number }) => {\r\n\t\t\tif (this.abortListener) {\r\n\t\t\t\tthis.abortListener();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t *  @description 开始录屏\r\n\t * @param callback\r\n\t */\r\n\tpublic startRecordScreen(callback?: Function): void {\r\n\t\treturn\r\n\t\tthis.startListener = callback;\r\n\t\tthis.GameRecorder.start({\r\n\t\t\tfps: 24,\r\n\t\t\tduration: 7200,\r\n\t\t\tbitrate: 1000,\r\n\t\t\tgop: 12\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @description 暂停录屏\r\n\t */\r\n\tpublic pauseRecordScreen(callback?: Function): void {\r\n\t\tthis.pauseListener = callback;\r\n\t\tthis.GameRecorder.pause();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 恢复录制游戏画面\r\n\t * @param callback\r\n\t */\r\n\tpublic resumeRecordScreen(callback?: Function): void {\r\n\t\tthis.resumeListener = callback;\r\n\t\tthis.GameRecorder.resume();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 结束录制游戏画面。结束录制后可以发起分享\r\n\t * @param callback\r\n\t */\r\n\tpublic stopRecordScreen(callback?: Function): void {\r\n\t\tthis.stopListener = callback;\r\n\t\tthis.GameRecorder.stop();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 放弃录制游戏画面。此时已经录制的内容会被丢弃\r\n\t * @param callback\r\n\t */\r\n\tpublic abortRecordScreen(callback?: Function): void {\r\n\t\tthis.abortListener = callback;\r\n\t\tthis.GameRecorder.abort();\r\n\t}\r\n\r\n\tpublic createGameRecorderShareButton(): void {\r\n\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 其他能力\r\n\t///////////////////////////\r\n\t/**\r\n\t * 监听小游戏回到前台的事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onShow(callbak): void {\r\n\t\tthis.showListener = callbak;\r\n\t\twx.onShow(this.onShowListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏回到前台的事件\r\n\t */\r\n\tpublic offShow(): void {\r\n\t\twx.offShow(this.onShowListener);\r\n\t}\r\n\r\n\t/**\r\n\t * @description 监听小游戏隐藏到后台事件。锁屏、按 HOME 键退到桌面、显示在聊天顶部等操作会触发此事件\r\n\t * @param callbak\r\n\t */\r\n\tpublic onHide(callbak): void {\r\n\t\tthis.hideListener = callbak;\r\n\t\twx.onHide(this.onHideListener.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * @description 取消监听小游戏隐藏到后台事件\r\n\t */\r\n\tpublic offHide(): void {\r\n\t\tthis.hideListener = null;\r\n\t\twx.offHide(this.onHideListener);\r\n\t}\r\n\r\n\tpublic onShowListener(res): void {\r\n\t\tif (this.showListener) {\r\n\t\t\tthis.showListener(res);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic onHideListener(): void {\r\n\t\tif (this.hideListener) {\r\n\t\t\tthis.hideListener();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description 打开另一个小程序\r\n\t * @param _appId\r\n\t * @param _path\r\n\t */\r\n\tpublic navigateToMiniProgram(_appId: string, _path: string, cbOk, cbFail): void {\r\n\t\tif (wechat.isSupportedAPI(wx.navigateToMiniProgram)) {\r\n\t\t\twx.navigateToMiniProgram({\r\n\t\t\t\tappId: _appId,\r\n\t\t\t\tpath: _path,\r\n\t\t\t\tenvVersion: 'release',\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tcbOk();\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tcbFail();\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tcbFail();\r\n\t\t}\r\n\t}\r\n\r\n\t////////////////////////////\r\n\t// 震动\r\n\t///////////////////////////\r\n\t/**\r\n\t\t * 使手机发生较长时间的振动。\r\n\t\t */\r\n\t/**\r\n\t * 使手机发生较长时间的振动。\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateLong(cb?: Function): void {\r\n\t\tif (cb)\r\n\t\t\tconsole.warn(\"----> vibrateLong 微信可能没有cb\");\r\n\t\twx.vibrateLong();\r\n\t};\r\n\t/**\r\n\t * 使手机发生较短时间的振动\r\n\t * @param cb 回调\r\n\t */\r\n\tpublic vibrateShort(cb?: Function): void {\r\n\t\tconsole.warn(\"----> vibrateShort 微信可能没有cb\");\r\n\t\twx.vibrateShort();\r\n\t};\r\n\t////////////////////////////\r\n\t// 通用\r\n\t///////////////////////////\r\n\t/**\r\n\t * @description 获取系统信息\r\n\t */\r\n\tpublic getSystemInfoSync(): void {\r\n\t\tthis.systemInfo = wx.getSystemInfoSync();\r\n\t}\r\n\r\n\t/**\r\n\t * @description 是否支持改API\r\n\t * @param api\r\n\t */\r\n\tprivate static isSupportedAPI(api: any): boolean {\r\n\t\tif (api) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * 退出小程序\r\n\t * @param cb\r\n\t */\r\n\tpublic exitMiniProgram(cb: any): void {\r\n\t\twx.exitMiniProgram(cb);\r\n\t};\r\n\r\n\t/**\r\n\t * 显示灰色背景的消息提示框\r\n\t * @param title 内容\r\n\t * @param duration 提示框停留时间，单位ms\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic showToast(title: string, duration: number = 3000, callback?: Function): void {\r\n\t\twx.showToast({\r\n\t\t\ttitle: title,\r\n\t\t\tduration: duration,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tif (callback) callback();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * 获取系统信息\r\n\t * @param callback 成功后回调\r\n\t */\r\n\tpublic getSystemInfo(callback?: Function): void {\r\n\t\twx.getSystemInfo({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tif (callback) callback(res);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * 阿拉丁事件\r\n\t * @param str\r\n\t * @param objOrStr {key:string,value:string}\r\n\t */\r\n\tpublic aldSendEvent(str, objOrStr?): void {\r\n\t\ttyqSDK.log('send msg: ', str);\r\n\t\tif (wx.aldSendEvent) {\r\n\t\t\tif (objOrStr)\r\n\t\t\t\twx.aldSendEvent(str);\r\n\t\t\telse\r\n\t\t\t\twx.aldSendEvent(str, objOrStr);\r\n\t\t} else\r\n\t\t\tconsole.error(\"----> 阿拉丁接入失败，请检查game.js\");\r\n\t}\r\n\r\n\t/**\r\n\t * 创建供量主广告实例\r\n\t */\r\n\tpublic createIconAd() {\r\n\r\n\t\tlet styleItemArray = [...Array(global.iconCount + 1).map((_, i) => ({\r\n\t\t\tappNameHidden: false,\r\n\t\t\tcolor: 'white',\r\n\t\t\tsize: 100,\r\n\t\t\tborderWidth: 100,\r\n\t\t\tborderColor: 'white',\r\n\t\t\tleft: 100 * i,\r\n\t\t\ttop: 100,\r\n\t\t}))]\r\n\t\t// 创建推荐位实例，提前初始化\r\n\t\tthis.LiconAD = wx.createGameIcon({\r\n\t\t\tadUnitId: this._LIconAdunit,\r\n\t\t\tcount: global.iconCount,\r\n\t\t\tstyle: styleItemArray\r\n\t\t})\r\n\r\n\t\t// this.RiconAD = wx.createGameIcon({\r\n\t\t// \tadUnitId:this._RIconAdunit,\r\n\t\t// \tcount:global.iconCount,\r\n\t\t// \tstyle:styleItemArray\r\n\t\t// })\r\n\t\tthis.LiconAD.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载失败：', res);\r\n\t\t\t//next && next(false);\r\n\t\t});\r\n\t\tthis.LiconAD.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 小游戏推荐左边icon加载成功');\r\n\t\t})\r\n\t\t// this.RiconAD.onError((res)=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载失败：',res);\r\n\t\t// \t//next && next(false);\r\n\t\t// });\r\n\t\t// this.RiconAD.onLoad(()=>{\r\n\t\t// \ttyqSDK.log('=====> @framework, 小游戏推荐右边icon加载成功');\r\n\t\t// })\r\n\t\tthis.LiconAD.onResize(size => {\r\n\t\t\t//偶数  自适应排位置\r\n\t\t\tvar starTop = 0;\r\n\t\t\tif (global.iconCount % 2 === 0) {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height;\r\n\t\t\t} else {\r\n\t\t\t\tstarTop = this.systemInfo.windowHeight / 2 - global.iconCount / 2 * size[0].height + size[0].height / 2;\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < size.length; i++) {\r\n\t\t\t\tsize[i].left = 10\r\n\t\t\t\tsize[i].top = starTop + (72 * i);\r\n\t\t\t}\r\n\t\t})\r\n\t\t//同一时间只能展示一个，放弃右边的\r\n\t\t// this.RiconAD.onResize(size =>{\r\n\t\t// \t//偶数  自适应排位置\r\n\t\t// \tvar starTop = 0;\r\n\t\t// \tif(global.iconCount%2 === 0){\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height;\r\n\t\t// \t}else{\r\n\t\t// \t\tstarTop = this.systemInfo.windowHeight/2 - global.iconCount/2*size[0].height+size[0].height/2;\r\n\t\t// \t}\r\n\t\t// \tfor (let i = 0; i < size.length; i++) {\r\n\t\t// \t\tsize[i].left = this.systemInfo.windowWidth-10\r\n\t\t// \t\tsize[i].top = starTop + (72*i);\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\t/**\r\n\t * 显示小游戏推荐广告\r\n\t */\r\n\tpublic showIconAd(dir: string) {\r\n\t\tif (dir == 'R') {\r\n\t\t\tif (this.RiconAD) {\r\n\t\t\t\tthis.RiconAD.load().then(() => {\r\n\t\t\t\t\tthis.RiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.LiconAD) {\r\n\t\t\t\tthis.LiconAD.load().then(() => {\r\n\t\t\t\t\tthis.LiconAD.show()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.error(err)\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(this.createIconAd, 1000)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**创建格子广告 */\r\n\tpublic createGridAd(count: number) {\r\n\t\tthis.gridAd = wx.createGridAd({\r\n\t\t\tadUnitId: global.latticeAdunit,\r\n\t\t\tadTheme: 'white',\r\n\t\t\tgridCount: count,\r\n\t\t\tadIntervals: 30,\r\n\t\t\tstyle: {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: this.systemInfo.windowHeight / 2 - 350,\r\n\t\t\t\twidth: 500,\r\n\t\t\t\topacity: 0.8\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.gridAd.onLoad(() => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载成功');\r\n\t\t\tthis.gridAdCunt = count;\r\n\t\t});\r\n\t\tthis.gridAd.onError((res) => {\r\n\t\t\ttyqSDK.log('=====> @framework, 格子广告加载失败：', res);\r\n\t\t});\r\n\t}\r\n\r\n\t/**显示格子广告 */\r\n\tpublic showGridAd(count: number) {\r\n\t\t//数量不一样的时候重新创建格子\r\n\t\tif (count != this.gridAdCunt) {\r\n\t\t\tif (this.gridAd) {\r\n\t\t\t\tthis.gridAd.destroy();\r\n\t\t\t}\r\n\t\t\tthis.createGridAd(count);\r\n\t\t}\r\n\t\tthis.gridAd.show();\r\n\t}\r\n\r\n\t/**隐藏格子广告 */\r\n\tpublic hideGridAd() {\r\n\t\tthis.gridAd.hide();\r\n\t}\r\n\r\n\t/**\r\n\t * 显示转发和分享到朋友圈\r\n\t * @param bool 是否使用带 shareTicket 的转发详情\r\n\t */\r\n\tpublic showShareMenu(bool: boolean = false) {\r\n\t\tif (window.wx) {\r\n\t\t\twx.showShareMenu({\r\n\t\t\t\twithShareTicket: bool,\r\n\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const Wechat = wechat._instance;\r\n"]}