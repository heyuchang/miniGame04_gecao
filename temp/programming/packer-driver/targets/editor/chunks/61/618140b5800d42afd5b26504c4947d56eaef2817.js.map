{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/monsters/Monster12.ts"],"names":["Component","v3","_decorator","cocosUtil","mapModel","physicsGroup","ccclass","property","Monster12","monster","moveStop","bulletId","outVec3","init","id","scheduleOnce","useSkill","Math","random","startSkillLogic","time","hp","p","getInfoPosition","direction","player","node","getPosition","subtract","convertToWorldSpaceWithPos","bulletSystem","addBullet","MONSTER_BULLET"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,E,OAAAA,E;AAAUC,MAAAA,U,OAAAA,U;;AACrBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U,GAE9B;;2BAEaM,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb,SAC+BR,SAD/B,CACyC;AAAA;AAAA;AAAA,eAErCS,OAFqC;AAAA,eAGrCC,QAHqC;AAAA,eAKrCC,QALqC,GAKlB,IALkB;AAAA,eAOrCC,OAPqC,GAOrBX,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAPmB;AAAA;;AASrCY,QAAAA,IAAI,CAACJ,OAAD,EAAmB;AACnB,eAAKA,OAAL,GAAeA,OAAf;AACA,eAAKC,QAAL,GAAgB,KAAhB;;AAEA,cAAI,KAAKD,OAAL,CAAaK,EAAb,IAAmB,EAAvB,EAA2B;AACvB,iBAAKH,QAAL,GAAgB,IAAhB;AACH;;AAED,eAAKI,YAAL,CAAkB,MAAM;AACpB,iBAAKC,QAAL;AACH,WAFD,EAEG,IAAIC,IAAI,CAACC,MAAL,KAAgB,CAFvB;AAGH;;AAEDC,QAAAA,eAAe,GAAG;AACd,cAAIC,IAAI,GAAG,IAAIH,IAAI,CAACC,MAAL,KAAgB,CAA/B;AACA,eAAKH,YAAL,CAAkB,MAAM;AACpB,iBAAKC,QAAL;AACH,WAFD,EAEGI,IAFH;AAGH;;AAEDJ,QAAAA,QAAQ,GAAG;AACP,cAAI,KAAKP,OAAL,CAAaY,EAAb,IAAmB,CAAvB,EAA0B;AACtB;AACH;;AACD,cAAIC,CAAC,GAAG,KAAKb,OAAL,CAAac,eAAb,EAAR;AACA,cAAIC,SAAS,GAAG;AAAA;AAAA,oCAASC,MAAT,CAAgBC,IAAhB,CAAqBC,WAArB,GAAmCC,QAAnC,CAA4CN,CAA5C,CAAhB;AACAA,UAAAA,CAAC,GAAG;AAAA;AAAA,sCAAUO,0BAAV,CAAqC,KAAKH,IAA1C,EAAgDJ,CAAhD,CAAJ;AACA;AAAA;AAAA,oCAASQ,YAAT,CAAsBC,SAAtB,CAAgC,KAAKpB,QAArC,EAA+C;AAAA;AAAA,4CAAaqB,cAA5D,EAA4EV,CAA5E,EAA+EE,SAA/E;AACA,eAAKL,eAAL;AACH;;AAtCoC,O","sourcesContent":["import { Component, v3, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Monster } from './Monster';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 小雷达\r\n@ccclass('Monster12')\r\nexport class Monster12 extends Component {\r\n\r\n    monster: Monster;\r\n    moveStop: boolean;\r\n\r\n    bulletId: number = 1012;\r\n\r\n    outVec3: Vec3 = v3(0, 0, 0);\r\n\r\n    init(monster: Monster) {\r\n        this.monster = monster;\r\n        this.moveStop = false;\r\n\r\n        if (this.monster.id == 18) {\r\n            this.bulletId = 1016;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, 1 + Math.random() * 4);\r\n    }\r\n\r\n    startSkillLogic() {\r\n        let time = 3 + Math.random() * 2;\r\n        this.scheduleOnce(() => {\r\n            this.useSkill();\r\n        }, time);\r\n    }\r\n\r\n    useSkill() {\r\n        if (this.monster.hp <= 0) {\r\n            return;\r\n        }\r\n        let p = this.monster.getInfoPosition();\r\n        let direction = mapModel.player.node.getPosition().subtract(p);\r\n        p = cocosUtil.convertToWorldSpaceWithPos(this.node, p);\r\n        mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n        this.startSkillLogic();\r\n    }\r\n\r\n}\r\n\r\n"]}