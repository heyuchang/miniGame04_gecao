{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/model/UserData.ts"],"names":["UserData","Component","Game","game","instantiate","js","sys","tween","v3","myLog","GLoginState","CronCtr","ServerCtr","cocosUtil","constants","msgac","audioManager","designManager","eventManager","RedPointLogicMgr","RPointMask","playerModel","$localKey","$time","$roleLv","$roleExp","$power","_maxPower","_powerRevoverTime","$powerTime","$baoShi","$optStone","$dayAct","$coin","$mapHand","_attack","_life","$curMap","$openLevel","$levelData","$mapData","$propData","id","num","iswear","$wearProp","$playerData","$patrolStartTime","$patrolRewardProp","$patrolRewardPropArr","$heroSkin","$drawNormalNum","$drawGradeNum","$towerWeaponIdArr","$towerWeaponId","$towerWeaponLvObj","$towerMapIdObj","$pyramidState","$pyramidDrawTime","$friendPassCnt","$videoCalCnt","$freeDraw","_isShowOpenLevel","_drawAllWeight","_drawAllSureWeight","getInstance","_instance","onInit","console","log","GetInstance","dataVersion","serverDataVersion","loginState","loginWithAccount","loadServerData","serverData","load","initEvent","setBaseConfig","afterLoadData","uploadAllRecord","getLocalData","schedule","config","energyMax","energyRecoverTime","updateRoleAtkHp","getPropById","addPropNum","setConfig","basicGem","basicGold","Date","getTime","getHeroSkin","data","getRowById","tableName","prop","p2","heroSkin","skinID","index","length","isHaveProp","havenum","i","roleLv","power","checkPowerTime","towerWeaponAddLv","ret","lv","getWeaponLv","nextRow","weaponOpt","st","row","getPropNumById","propId","propNum","getTowerMapInfo","mapId","info","floor","addTowerMapFloor","nextFloor","towerFloor","time","Math","min","max","getCountTime","usePower","baoshi","useBaoShi","update","send","commonResRefresh","optStone","useOptStone","addDataVersion","dayAct","useDayAct","energy","energyObj","useEnergy","checkAndUseBaoshi","useCoin","cheackAndUseCoin","coin","attack","life","addExp","roleData","getTable","heroLevel","element","exp","atk","hp","propData","suitInfo","getSuitPercentAdd","suitData","getSuitId","atkAdd","hpAdd","suitId","suitNum","suitAttr","suit","effectAtk_5","effectHP_5","effectAtk_3","effectHP_3","weaponOptLvEffect","val","optRow","ceil","getTowerRoleProInfo","isEnter","roleExp","getNextLevelExp","nextdata","setCurMap","mapid","getCurMap","openLevel","level","mapData","playerData","mapHand","wearProp","setWearProp","propdata","wearIndex","setPropWearById","ins","sendValueSettingMsg","RPM_PropWear","unWearProp","autoWearProp","checkWearProp","checkThisPropBestToWear","item","quality","wearpropdata","checkBestPropToWear","value","setPropById","push","blessProp","blessId","getPropId","needNum","RPM_BlessProp","updateDropData","checkPropCanBless","arr","curProp","checkChapterCanReward","leveldata","getLevelData","Time","ReceiveState","isWear","setLevelData","map","Level","type","mapTypes","main","nextId","ld","getPropSort","dataArr","equipSort","a","b","equipDataA","equipDataB","sort","propData1","suit_id","getSuitNum","tobePropItem","propArr","Id","Num","propItem","getRewardProp","addPropByDesign","award","addPropArrByDesign","awardArr","rewardArr","double","e","saveData","checkUseProp","showGetAnimal","parent","node","start","end","getCircleDirectionArr","node1","addChild","layer","set","positon","to","x","y","drawCurvePath","random","stringToArr","str","indexOf","endIndex","newStr","substring","split","on","EVENT_HIDE","resetAccount","now","EVENT_SHOW","gameOnShow","saveDataBefore","obj","createMap","key","localStorage","setItem","JSON","stringify","saveDataAfter","jsonData","mixin","parse","remove","removeItem","clearAccountData","getItem","getDrawItem","drawType","isBichou","extra2","extra1","drawData","getRowsByType","draw","NaN","forEach","weight","extra","parseInt","rand","getCurPatrolData","curTime","getPatrolReward","getPatrolTime","passTime","towerTop","towerExp","getCoin","towerCoin","towerItem","drawCount","j","curr","getPatrolState","getPatrolRewardByTime","setPyramidState"],"mappings":"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","sourcesContent":["import { Component, Game, game, instantiate, js, sys, tween, v3 } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { GLoginState } from \"../../tyqSDK/network/conf\";\r\nimport CronCtr from \"../../tyqSDK/network/CronCtr\";\r\nimport ServerCtr from \"../../tyqSDK/network/ServerCtr\";\r\nimport { cocosUtil } from \"../../utils/cocosUtil\";\r\nimport { constants } from \"../data/constants\";\r\nimport { msgac } from \"../data/msgac\";\r\nimport { audioManager } from \"../manager/audioManager\";\r\nimport { designManager } from \"../manager/designManager\";\r\nimport { eventManager } from \"../manager/eventManager\";\r\nimport { RedPointLogicMgr, RPointMask } from \"../manager/RedPointLogicMgr\";\r\nimport { playerModel } from \"./playerModel\";\r\n\r\n\r\nexport interface LevelDataItem {\r\n    Level: number   //\r\n    Time: number //  最大生存时间 ，单位秒\r\n    ReceiveState: number[] //[0,0,0] //3个级别章节奖励领取状态。0:未领取 1：已领取\r\n}\r\n\r\nexport interface PropItem {\r\n    Id: number\r\n    Num: number\r\n}\r\n\r\nexport class UserData extends Component {\r\n\r\n    private static _instance: UserData = null\r\n\r\n    public $localKey: string = \"UserData\";\r\n    private $time: number = null;\r\n\r\n    /**关卡 */\r\n    private $roleLv: number = 1\r\n\r\n    /**关卡 */\r\n    private $roleExp: number = 1\r\n\r\n    /**体力 */\r\n    private $power: number = 30\r\n\r\n    /**体力上限 */\r\n    private _maxPower: number = 30\r\n\r\n    private _powerRevoverTime = 60\r\n    /**体力倒计时 */\r\n    private $powerTime: number = 0\r\n\r\n    /** 宝石 */\r\n    private $baoShi: number = 1000\r\n\r\n    private $optStone: number = 0;\r\n    private $dayAct: number = 0;\r\n\r\n    /** 金币 */\r\n    private $coin: number = 1000\r\n\r\n    // 小手指引\r\n    private $mapHand: number = 0;\r\n    // 攻击力\r\n    private _attack: number = 0\r\n    // 生命值\r\n    private _life: number = 0\r\n\r\n    private $curMap = 1\r\n\r\n    private $openLevel = 1\r\n\r\n    private $levelData = []\r\n\r\n    private $mapData: any\r\n\r\n    private $propData = [{ id: 301, num: 0, iswear: 0 }]\r\n\r\n    private $wearProp = [0, 0, 0, 0, 0, 0]\r\n\r\n    private $playerData: any = {};\r\n\r\n    private $patrolStartTime = 0\r\n\r\n    private $patrolRewardProp = []\r\n    private $patrolRewardPropArr = []\r\n\r\n    private $heroSkin = 2001\r\n\r\n    public $drawNormalNum = 0\r\n    public $drawGradeNum = 0\r\n\r\n    // 爬塔\r\n    public $towerWeaponIdArr = [10130, 10135, 10140, 10145, 10150, 10155, 10160, 10165];\r\n    public $towerWeaponId = 0;\r\n    public $towerWeaponLvObj = {};\r\n    public $towerMapIdObj = {};\r\n\r\n\r\n    public $pyramidState: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n    public $pyramidDrawTime = 0\r\n\r\n    public $friendPassCnt = 0 //好友通关数\r\n    public $videoCalCnt = 0 //视频累计\r\n\r\n    public $freeDraw = 0\r\n\r\n    public static getInstance() {\r\n        if (this._instance == null) {\r\n            this._instance = new UserData()\r\n            this._instance.onInit()\r\n        }\r\n        return this._instance\r\n    }\r\n\r\n    onInit() {\r\n        //使用服务端数据\r\n        console.log(\"-----比较服务端数据版本号---\", ServerCtr.GetInstance().dataVersion, ServerCtr.GetInstance().serverDataVersion)\r\n        if (ServerCtr.GetInstance().loginState == GLoginState.loginWithAccount) {\r\n            if (ServerCtr.GetInstance().dataVersion < ServerCtr.GetInstance().serverDataVersion) {\r\n                this.loadServerData(ServerCtr.GetInstance().serverData)\r\n            } else {\r\n                this.load();\r\n            }\r\n        } else {\r\n            this.load();\r\n        }\r\n\r\n        // console.error(\"-----跟踪----\")\r\n\r\n        this.$time = 0;\r\n        this.initEvent();\r\n        this.setBaseConfig()\r\n        //   this.$wearProp = [10001, 0, 0, 10003, 0, 0]\r\n        this.afterLoadData();\r\n\r\n\r\n        //上传数据\r\n        if (ServerCtr.GetInstance().dataVersion > ServerCtr.GetInstance().serverDataVersion) {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }\r\n\r\n        this.schedule(() => {\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        }, 300)\r\n\r\n    }\r\n\r\n\r\n    setBaseConfig() {\r\n        this._maxPower = designManager.config.energyMax\r\n        this._powerRevoverTime = designManager.config.energyRecoverTime\r\n        this.updateRoleAtkHp()\r\n    }\r\n\r\n    afterLoadData() {\r\n        if (!this.$towerWeaponId) {\r\n            this.$towerWeaponId = this.$towerWeaponIdArr[0];\r\n        }\r\n        if (this.getPropById(2001) <= 0) {\r\n            this.addPropNum(2001, 1);\r\n        }\r\n    }\r\n\r\n    setConfig() {\r\n        this.$baoShi = designManager.config.basicGem\r\n        this.$coin = designManager.config.basicGold\r\n        this.$propData = [{ id: 301, num: 0, iswear: 0 }]\r\n        this.$wearProp = [0, 0, 0, 0, 0, 0]\r\n        this.$levelData = []\r\n        this.$curMap = 1\r\n        this.$openLevel = 1\r\n        this.$power = designManager.config.energyMax\r\n\r\n        this.$mapData = null\r\n        this.$roleExp = 0\r\n        this.$roleLv = 1\r\n        this.$mapHand = 0;\r\n        this.$patrolRewardProp = []\r\n        this.$patrolRewardPropArr = []\r\n\r\n        this.$patrolStartTime = (new Date()).getTime()\r\n\r\n        this.$drawNormalNum = 0\r\n        this.$drawGradeNum = 0\r\n\r\n        this.$pyramidState = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n\r\n        this.$friendPassCnt = 0;\r\n        this.$videoCalCnt = 0;\r\n    }\r\n\r\n    public getHeroSkin(id: number = 0) {\r\n        if (!id) {\r\n            id = this.$heroSkin;\r\n        }\r\n        let data = designManager.getRowById(constants.tableName.prop, id)\r\n        if (data) {\r\n            return \"skin\" + data.p2\r\n        }\r\n        return \"skin1\"\r\n    }\r\n\r\n    public set heroSkin(skinID) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            if (this.$propData[index].id == skinID && this.$propData[index].num > 0) {\r\n                this.$heroSkin = skinID\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    public get heroSkin() {\r\n        return this.$heroSkin;\r\n    }\r\n\r\n    public isHaveProp(id: number | any[]) {\r\n        if (typeof (id) === \"number\") {\r\n            for (let index = 0; index < this.$propData.length; index++) {\r\n                if (this.$propData[index].id == id && this.$propData[index].num > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        } else {\r\n            let havenum = 0\r\n            for (let i = 0; i < id.length; i++) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    if (this.$propData[index].id == id[i] && this.$propData[index].num > 0) {\r\n                        havenum++\r\n                    }\r\n                }\r\n            }\r\n            if (havenum >= id.length) {\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    public get roleLv() {\r\n        return this.$roleLv;\r\n    }\r\n\r\n    public get power() {\r\n        this.checkPowerTime()\r\n        return this.$power;\r\n    }\r\n\r\n    public towerWeaponAddLv() {\r\n        let ret: any = {};\r\n        let lv = this.getWeaponLv(this.$towerWeaponId);\r\n        let nextRow = designManager.getRowById(constants.tableName.weaponOpt, lv + 1);\r\n        if (!nextRow) {\r\n            // 已满级\r\n            ret.st = 2;\r\n            return ret;\r\n        }\r\n        let row = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        let num = this.getPropNumById(row.propId);\r\n        if (num < row.propNum) {\r\n            // 消耗道具不足\r\n            ret.st = 3;\r\n            ret.propId = row.propId;\r\n            return ret;\r\n        }\r\n\r\n        this.addPropNum(row.propId, -row.propNum);\r\n        this.$towerWeaponLvObj[this.$towerWeaponId] = lv + 1;\r\n\r\n        ret.st = 1;\r\n\r\n        return ret;\r\n\r\n    }\r\n\r\n    public getTowerMapInfo(mapId: number) {\r\n        let info = this.$towerMapIdObj[mapId];\r\n        if (!info) {\r\n            info = {\r\n                floor: 1\r\n            };\r\n        }\r\n\r\n        return info;\r\n    }\r\n    public addTowerMapFloor(mapId: number) {\r\n        let info = this.getTowerMapInfo(mapId);\r\n        let nextFloor = info.floor + 1;\r\n        if (!designManager.getRowById(constants.tableName.towerFloor, nextFloor)) {\r\n            // 已到达最顶层\r\n            return;\r\n        }\r\n        info.floor++;\r\n        this.$towerMapIdObj[mapId] = info;\r\n    }\r\n\r\n    public getWeaponLv(id: number = this.$towerWeaponId) {\r\n        let lv = this.$towerWeaponLvObj[id];\r\n        if (!lv) {\r\n            lv = 1;\r\n        }\r\n\r\n        return lv;\r\n    }\r\n\r\n    public checkPowerTime() {\r\n        if (this.$power < this._maxPower) {\r\n            if (this.$powerTime == 0) {\r\n                this.$powerTime = new Date().getTime()\r\n            } else {\r\n                let time = new Date().getTime() - this.$powerTime\r\n                let num = Math.floor(time / 1000 / this._powerRevoverTime)\r\n                if (num > 0) {\r\n                    this.$power += num\r\n                    this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n                    this.$powerTime = this.$powerTime + num * this._powerRevoverTime * 1000\r\n                }\r\n            }\r\n        } else {\r\n            this.$powerTime = 0\r\n        }\r\n    }\r\n\r\n    public getCountTime() {\r\n        if (this.$power < this._maxPower) {\r\n            return Math.max(0, Math.min(this._powerRevoverTime, this._powerRevoverTime - (new Date().getTime() - this.$powerTime) / 1000))\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public usePower(num) {\r\n        this.$power += num\r\n        this.$power = Math.min(this._maxPower, Math.max(0, this.$power))\r\n        this.checkPowerTime()\r\n    }\r\n\r\n    public get baoshi() {\r\n        return this.$baoShi\r\n    }\r\n\r\n    public useBaoShi(num: number, update = false) {\r\n        this.$baoShi += num;\r\n        this.$baoShi = Math.max(0, this.$baoShi);\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n    }\r\n\r\n    public get optStone() {\r\n        return this.$optStone;\r\n    }\r\n    public useOptStone(num: number) {\r\n        this.$optStone += num;\r\n        this.$optStone = Math.max(0, this.$optStone);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get dayAct() {\r\n        return this.$dayAct;\r\n    }\r\n    public set dayAct(num: number) {\r\n        this.$dayAct = num;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public useDayAct(num: number) {\r\n        this.$dayAct += num;\r\n        this.$dayAct = Math.max(0, this.$dayAct);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get energy() {\r\n        return playerModel.energyObj.num;\r\n    }\r\n    public useEnergy(num: number) {\r\n        playerModel.energyObj.num += num;\r\n        playerModel.energyObj.num = Math.max(0, playerModel.energyObj.num);\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public checkAndUseBaoshi(num: number, update = false) {\r\n        if (this.$baoShi >= num) {\r\n            this.useBaoShi(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public useCoin(num: number, update = false) {\r\n        this.$coin += num\r\n        this.$coin = Math.max(0, this.$coin)\r\n        if (update) {\r\n            eventManager.send(msgac.commonResRefresh)\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public cheackAndUseCoin(num: number, update = false) {\r\n        if (this.$coin >= num) {\r\n            this.useCoin(0 - num, update)\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    public get coin() {\r\n        return this.$coin\r\n    }\r\n\r\n    public get attack() {\r\n        return this._attack\r\n    }\r\n\r\n    public get life() {\r\n        return this._life\r\n    }\r\n\r\n    public addExp(num) {\r\n        this.$roleExp += num\r\n        let roleData = designManager.getTable(constants.tableName.heroLevel)\r\n        for (let index = this.roleLv + 1; index < roleData.length; index++) {\r\n            let element = roleData[index - 1];\r\n            if (this.$roleExp >= element.exp) {\r\n                this.$roleLv = index\r\n                this.updateRoleAtkHp()\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public updateRoleAtkHp() {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv)\r\n        this._attack = roleData.atk\r\n        this._life = roleData.hp\r\n\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            if (this.$wearProp[i] > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, this.$wearProp[i])\r\n                if (propData && propData.atk) {\r\n                    this._attack += propData.atk\r\n                }\r\n                if (propData && propData.hp) {\r\n                    this._life += propData.hp\r\n                }\r\n            }\r\n        }\r\n\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        this._attack *= 1 + suitInfo.atk;\r\n        this._life *= 1 + suitInfo.hp;\r\n        this._attack = Math.floor(this._attack)\r\n        this._life = Math.floor(this._life)\r\n    }\r\n\r\n    public getSuitPercentAdd() {\r\n        let suitData = this.getSuitId()\r\n        let atkAdd = 0;\r\n        let hpAdd = 0;\r\n        if (suitData != 0) {\r\n            let suitId = suitData[0]\r\n            let suitNum = suitData[1]\r\n            let suitAttr = designManager.getRowById(constants.tableName.suit, suitId)\r\n            if (suitNum >= 5) {\r\n                atkAdd = suitAttr.effectAtk_5\r\n                hpAdd = suitAttr.effectHP_5\r\n            } else if (suitNum >= 3) {\r\n                atkAdd = suitAttr.effectAtk_3\r\n                hpAdd = suitAttr.effectHP_3\r\n            }\r\n        }\r\n        let ret = {\r\n            atk: atkAdd / 100,\r\n            hp: hpAdd / 100\r\n        };\r\n\r\n        return ret;\r\n    }\r\n\r\n    public weaponOptLvEffect(val: number, lv: number) {\r\n        let optRow = designManager.getRowById(constants.tableName.weaponOpt, lv);\r\n        if (optRow) {\r\n            val = val * (1 + optRow.atk / 100);\r\n            val = Math.ceil(val);\r\n        }\r\n        return val;\r\n    }\r\n\r\n    public getTowerRoleProInfo(isEnter: boolean = false) {\r\n        let roleData = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv);\r\n\r\n        // 等级加成\r\n        let atk = roleData.atk;\r\n        let hp = roleData.hp;\r\n\r\n        // 装备加成\r\n        for (let i = 0; i < this.$wearProp.length; i++) {\r\n            let id = this.$wearProp[i];\r\n            if (i == 0) {\r\n                id = this.$towerWeaponId;\r\n                if (isEnter) {\r\n                    id = 0;\r\n                }\r\n            }\r\n            if (id > 0) {\r\n                let propData = designManager.getRowById(constants.tableName.prop, id);\r\n                if (propData && propData.atk) {\r\n                    let val = propData.atk;\r\n                    if (i == 0) {\r\n                        let lv = this.getWeaponLv(id);\r\n                        val = this.weaponOptLvEffect(val, lv);\r\n                    }\r\n                    atk += val;\r\n                }\r\n                if (propData && propData.hp) {\r\n                    hp += propData.hp;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 套装加成\r\n        let suitInfo = this.getSuitPercentAdd();\r\n        atk *= 1 + suitInfo.atk;\r\n        hp *= 1 + suitInfo.hp;\r\n\r\n        atk = Math.floor(atk);\r\n        hp = Math.floor(hp);\r\n\r\n        return {\r\n            atk: atk,\r\n            hp: hp\r\n        };\r\n\r\n    }\r\n\r\n    public get roleExp() {\r\n        return this.$roleExp\r\n    }\r\n\r\n    public getNextLevelExp() {\r\n        let nextdata = designManager.getRowById(constants.tableName.heroLevel, this.$roleLv + 1)\r\n        if (nextdata) {\r\n            return nextdata.exp\r\n        }\r\n        return this.$roleExp\r\n    }\r\n\r\n    public setCurMap(mapid) {\r\n        this.$curMap = mapid\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public getCurMap() {\r\n        return this.$curMap\r\n    }\r\n\r\n    public set openLevel(level) {\r\n        this.$openLevel = level\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get openLevel() {\r\n        //return 2\r\n        return this.$openLevel\r\n    }\r\n\r\n    public set mapData(data: any) {\r\n        this.$mapData = data\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    public get mapData() {\r\n        return this.$mapData\r\n    }\r\n\r\n    public set playerData(data: any) {\r\n        this.$playerData = data;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get playerData() {\r\n        return this.$playerData;\r\n    }\r\n\r\n    public set mapHand(st: number) {\r\n        this.$mapHand = st;\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n    public get mapHand() {\r\n        return this.$mapHand;\r\n    }\r\n\r\n    public get wearProp() {\r\n        return this.$wearProp\r\n    }\r\n\r\n    /**\r\n     *  穿戴装备\r\n     * @param propdata cj\r\n     * @returns \r\n     */\r\n    public setWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                return\r\n            } else if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            } else {\r\n                this.setPropWearById(this.$wearProp[propdata.wearIndex - 1], 0)\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            this.updateRoleAtkHp()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 卸下装备\r\n     */\r\n    public unWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n                this.updateRoleAtkHp()\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 自动判断是穿戴 还是 卸下 操作\r\n     * @param propdata \r\n     */\r\n    public autoWearProp(propdata) {\r\n        if (propdata) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == propdata.id) {\r\n                this.$wearProp[propdata.wearIndex - 1] = 0\r\n                this.setPropWearById(propdata.id, 0)\r\n            } else {\r\n                this.$wearProp[propdata.wearIndex - 1] = propdata.id\r\n                this.setPropWearById(propdata.id, 1)\r\n            }\r\n            this.updateRoleAtkHp()\r\n            RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n            ServerCtr.GetInstance().addDataVersion()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否穿戴在身上\r\n     * @param propdata \r\n     * @returns \r\n     */\r\n    public checkWearProp(propdata) {\r\n        if (propdata) {\r\n            return this.$wearProp[propdata.wearIndex - 1] == propdata.id\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前装备是否 比穿戴在身上的 装备更好\r\n     * @param propId \r\n     * @returns \r\n     */\r\n    public checkThisPropBestToWear(propId) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, propId)\r\n        if (propdata.wearIndex > 0) {\r\n            if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n                return true\r\n            }\r\n\r\n            let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n            if (wearpropdata.quality < propdata.quality) {\r\n\r\n                for (let index = 0; index < this.$propData.length; index++) {\r\n                    let item = designManager.getRowById(constants.tableName.prop, this.$propData[index].id);\r\n                    if (item.wearIndex == propdata.wearIndex) {\r\n                        if (propdata.quality < item.quality) {\r\n                            return false\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查是否有可以穿戴的装备\r\n     * @returns \r\n     */\r\n    public checkBestPropToWear() {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, value.id)\r\n            if (propdata.wearIndex > 0) {\r\n                if (this.$wearProp[propdata.wearIndex - 1] == 0) {\r\n                    return true\r\n                }\r\n\r\n                let wearpropdata = designManager.getRowById(constants.tableName.prop, this.$wearProp[propdata.wearIndex - 1])\r\n                if (wearpropdata.quality < propdata.quality) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     *  获得 装备\r\n     * @param id 装备ID\r\n     * @param num 获得数量\r\n     * @returns \r\n     */\r\n    public setPropById(id, num) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.num += num\r\n                return\r\n            }\r\n        }\r\n        this.$propData.push({ id: id, num: num, iswear: 0 })\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 合成装备\r\n     * @param blessId 合成装备ID\r\n     * @param getPropId 获得装备ID\r\n     * @param needNum 需要数量\r\n     */\r\n    public blessProp(blessId, getPropId, needNum) {\r\n        this.setPropById(getPropId, 1)\r\n        this.setPropById(blessId, needNum)\r\n        RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            if (this.$wearProp[index] == blessId) {\r\n                this.$wearProp[index] = getPropId\r\n                this.setPropWearById(getPropId, 1)\r\n                this.setPropWearById(blessId, 0)\r\n                this.updateRoleAtkHp()\r\n            }\r\n        }\r\n        eventManager.send(msgac.updateDropData)\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n    /**\r\n     * 检查 是否有可以合成的装备\r\n     * @returns \r\n     */\r\n    public checkPropCanBless() {\r\n        let arr = this.$propData\r\n        for (let index = 0; index < arr.length; index++) {\r\n            if (arr[index].num >= 3) {\r\n                let curProp = designManager.getRowById(constants.tableName.prop, arr[index].id)\r\n                if (curProp && curProp.blessId && curProp.blessId > 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 检查当前章节是否可以领取宝箱\r\n     */\r\n    public checkChapterCanReward() {\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for (let i = 0; i < 3; i++) {\r\n            if (leveldata.Time >= (i * 5 + 5) * 60) {\r\n                if (leveldata.ReceiveState[i] == 0) {\r\n                    return true\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    public setPropWearById(id, isWear) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                value.iswear = isWear\r\n                return\r\n            }\r\n        }\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n    public _isShowOpenLevel = false\r\n    /**\r\n     * 保存关卡完成情况的数据\r\n     * @param data \r\n     */\r\n    public setLevelData(data: LevelDataItem) {\r\n        let row = designManager.getRowById(constants.tableName.map, data.Level);\r\n        if (row.type != constants.mapTypes.main) {\r\n            return;\r\n        }\r\n        let index = data.Level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n        if (this.$levelData[index] == null) {\r\n            this.$levelData[index] = data\r\n        } else {\r\n            if (data.Time > this.$levelData[index].Time) {\r\n                this.$levelData[index].Time = data.Time\r\n            }\r\n        }\r\n        if (this.$levelData[index].Time >= 15 * 60) {\r\n            if (this.$openLevel <= data.Level) {\r\n                let nextId = this.$openLevel + 1;\r\n                if (designManager.getRowById(constants.tableName.map, nextId)) {\r\n                    this.$openLevel++\r\n                    this.$curMap = this.$openLevel\r\n                    this._isShowOpenLevel = true\r\n                }\r\n                ServerCtr.GetInstance().addDataVersion()\r\n            }\r\n        }\r\n    }\r\n\r\n    public getLevelData(level) {\r\n        let index = level - 1\r\n        if (index < 0) {\r\n            index = 0\r\n        }\r\n\r\n        if (this.$levelData[index]) {\r\n            return this.$levelData[index]\r\n        }\r\n\r\n        let ld: LevelDataItem = {\r\n            Level: level,\r\n            Time: 0,\r\n            ReceiveState: [0, 0, 0],\r\n        }\r\n\r\n        UserData.getInstance().setLevelData(ld)\r\n        return ld\r\n    }\r\n\r\n    public get propData() {\r\n        return this.$propData\r\n    }\r\n\r\n    public getPropSort() {\r\n        let dataArr = [];\r\n        for (let i in this.$propData) {\r\n            let prop = this.$propData[i];\r\n            let row = designManager.getRowById(constants.tableName.prop, prop.id);\r\n            if (row.type == 8 || row.type == 11) {\r\n                dataArr.push(prop);\r\n            }\r\n        }\r\n        let equipSort = (a: { id }, b: { id }) => {\r\n            let equipDataA = designManager.getRowById(constants.tableName.prop, a.id)\r\n            let equipDataB = designManager.getRowById(constants.tableName.prop, b.id)\r\n            return equipDataA.wearIndex - equipDataB.wearIndex;\r\n        }\r\n        dataArr.sort(equipSort);\r\n        return dataArr;\r\n    }\r\n\r\n    public getPropById(id) {\r\n        for (let index = 0; index < this.$propData.length; index++) {\r\n            let value = this.$propData[index];\r\n            if (value.id == id) {\r\n                return value.num\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitId() {\r\n        let suitId = []\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (!suitId[propData1.suit_id]) {\r\n                    suitId[propData1.suit_id] = 0\r\n                }\r\n                suitId[propData1.suit_id]++\r\n            }\r\n        }\r\n        for (let index = 0; index < suitId.length; index++) {\r\n            if (suitId[index] >= 3) {\r\n                return [index, suitId[index]]\r\n            }\r\n        }\r\n        return 0\r\n    }\r\n\r\n    public getSuitNum(propData) {\r\n        let suitId = propData.suit_id\r\n        let num = 0\r\n        for (let index = 0; index < this.$wearProp.length; index++) {\r\n            let element = this.$wearProp[index];\r\n            if (element > 0) {\r\n                let propData1 = designManager.getRowById(constants.tableName.prop, element)\r\n                if (propData1.suit_id == suitId) {\r\n                    num++\r\n                }\r\n            }\r\n        }\r\n        return num\r\n    }\r\n\r\n    public tobePropItem(arr: any[]) {\r\n        let propArr = []\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let prop: PropItem = {\r\n                Id: arr[i][0],\r\n                Num: arr[i][1],\r\n            }\r\n            propArr.push(prop)\r\n        }\r\n        return propArr\r\n    }\r\n\r\n    public getPropNumById(id: number) {\r\n        let num = 0;\r\n        let row = designManager.getRowById(constants.tableName.prop, id);\r\n        switch (row.type) {\r\n            case 1:\r\n                num = this.$coin;\r\n                break;\r\n            case 9:\r\n                num = this.$baoShi;\r\n                break;\r\n            case 10:\r\n                num = this.$roleExp;\r\n                break;\r\n            case 12:\r\n                num = this.$power;\r\n                break;\r\n            case 14:\r\n                num = this.$optStone;\r\n                break;\r\n            case 15:\r\n                num = this.$dayAct;\r\n                break;\r\n            default:\r\n                for (let i in this.$propData) {\r\n                    let prop = this.$propData[i];\r\n                    if (prop.id == id) {\r\n                        num = prop.num;\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return num;\r\n    }\r\n\r\n    /**\r\n     * 获得/扣减道具\r\n     * @param id 道具id \r\n     * @param num 道具数量，负数表示 扣减\r\n     */\r\n    public addPropNum(id: number, num: number) {\r\n        let propItem: PropItem = {\r\n            Id: id,\r\n            Num: num\r\n        };\r\n        this.getRewardProp([propItem]);\r\n\r\n        return propItem;\r\n    }\r\n\r\n    public addPropByDesign(award: any) {\r\n        return this.addPropNum(award[0], award[1]);\r\n    }\r\n\r\n    public addPropArrByDesign(awardArr: any) {\r\n        let arr = [];\r\n        for (let i in awardArr) {\r\n            let award = awardArr[i];\r\n            let propItem: PropItem = {\r\n                Id: award[0],\r\n                Num: award[1]\r\n            };\r\n            arr.push(propItem);\r\n        }\r\n        this.getRewardProp(arr);\r\n\r\n        return arr;\r\n    }\r\n\r\n    /**；領取獎勵 格式 [10001,1];[10002,2];[10003,1] */\r\n    public getRewardProp(rewardArr: PropItem[], double = 1) {\r\n        for (let i = 0; i < rewardArr.length; i++) {\r\n            let dataArr = rewardArr[i];\r\n            let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n            if (!propdata) {\r\n                myLog.e(\"prop is not in design\", propdata);\r\n                continue;\r\n            }\r\n            if (propdata.type == 1) {\r\n                this.useCoin(dataArr.Num * double)\r\n            } else if (propdata.type == 10) {\r\n                this.addExp(dataArr.Num * double)\r\n            } else if (propdata.type == 8 || propdata.type == 11) {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n                RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_BlessProp, false)\r\n\r\n            } else if (propdata.type == 9) {\r\n                this.useBaoShi(dataArr.Num * double)\r\n            } else if (propdata.type == 12) {\r\n                this.usePower(dataArr.Num * double)\r\n            } else if (propdata.type == 14) {\r\n                // 魂晶\r\n                this.useOptStone(dataArr.Num * double);\r\n            } else if (propdata.type == 15) {\r\n                // 日活跃\r\n                this.useDayAct(dataArr.Num * double);\r\n            } else if (propdata.type == 16) {\r\n                // 能量战令\r\n                this.useEnergy(dataArr.Num * double);\r\n            } else {\r\n                this.setPropById(dataArr.Id, dataArr.Num * double)\r\n            }\r\n        }\r\n        eventManager.send(msgac.commonResRefresh)\r\n        this.saveData()\r\n    }\r\n\r\n    /**\r\n     *  使用道具。\r\n     * @param dataArr \r\n     * @returns  true 表示道具充足并使用。false 表示资源不够\r\n     */\r\n    public checkUseProp(dataArr: PropItem) {\r\n        let propdata = designManager.getRowById(constants.tableName.prop, dataArr.Id)\r\n        if (!propdata) {\r\n            myLog.e(\"prop is not in design\", propdata);\r\n            return\r\n        }\r\n\r\n        if (propdata.type == 1) {\r\n            if (this.$coin >= dataArr.Num) {\r\n                this.useCoin(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 9) {\r\n            if (this.$baoShi >= dataArr.Num) {\r\n                this.useBaoShi(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        } else if (propdata.type == 14) {\r\n            if (this.$optStone >= dataArr.Num) {\r\n                this.useOptStone(0 - dataArr.Num)\r\n                return true\r\n            }\r\n            return false\r\n        }\r\n    }\r\n\r\n\r\n    showGetAnimal(parent, node, start, end) {\r\n        let arr = cocosUtil.getCircleDirectionArr(10, 100);\r\n        for (let index = 0; index < 10; index++) {\r\n            let node1 = instantiate(node)\r\n            parent.addChild(node1)\r\n            node1.layer = parent.layer\r\n            tween(node1).set({ positon: v3(start[0], start[1], 0) }).to(0.2, { positon: v3(arr[index].x, arr[index].y, 0) }).to(0.5, { positon: v3(end[0], end[1], 0) }).start()\r\n            cocosUtil.drawCurvePath(node1, [arr[index].x, arr[index].y], [end[0], end[1]], 0.2 + Math.random() * 0.2, 30, 0.1 + index * 0.05)\r\n        }\r\n        return\r\n    }\r\n\r\n    stringToArr(str: string) {\r\n        let index = str.indexOf(\"[\")\r\n        let endIndex = str.indexOf(\"]\")\r\n        let newStr = str.substring(index + 1, endIndex)\r\n        return newStr.split(\",\")\r\n    }\r\n\r\n    /**注冊事件*/\r\n    protected initEvent() {\r\n        game.on(Game.EVENT_HIDE, () => {\r\n            // @ts-ignore\r\n            if (this.resetAccount) {\r\n                return;\r\n            }\r\n            this.$time = Date.now()\r\n            this.saveData()\r\n            CronCtr.getInstance().uploadAllRecord(this.getLocalData())\r\n        });\r\n        game.on(Game.EVENT_SHOW, () => {\r\n            audioManager.gameOnShow();\r\n        });\r\n    }\r\n\r\n    public saveData() {\r\n        eventManager.send(msgac.saveDataBefore);\r\n        let obj = js.createMap(true);;\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n        ServerCtr.GetInstance().addDataVersion()\r\n        eventManager.send(msgac.saveDataAfter);\r\n    }\r\n\r\n    public getLocalData() {\r\n        let obj = js.createMap(true);\r\n        for (let key in this) {\r\n            if (key.indexOf('$') != -1) {\r\n                obj[key] = this[key];\r\n            }\r\n        }\r\n        return {\r\n            \"userData\": JSON.stringify(obj),\r\n            \"version\": ServerCtr.GetInstance().dataVersion,\r\n            \"friendPassCnt\": this.$friendPassCnt, //通关数 好友最大值\r\n            \"videoCalCnt\": this.$videoCalCnt, //累积观看视频数量，累积值\r\n        }\r\n        // sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public loadServerData(jsonData) {\r\n        console.log(\"---------各种问题---\", jsonData)\r\n        ServerCtr.GetInstance().dataVersion = jsonData[\"version\"]\r\n        let obj = jsonData[\"userData\"];\r\n        if (obj) {\r\n            js.mixin(this, JSON.parse(obj));\r\n        }\r\n        sys.localStorage.setItem(this.$localKey, JSON.stringify(obj));\r\n    }\r\n\r\n    public remove() {\r\n        sys.localStorage.removeItem(this.$localKey);\r\n        this.onInit()\r\n        eventManager.send(msgac.commonResRefresh)\r\n    }\r\n\r\n    // 注销账号\r\n    public clearAccountData() {\r\n        ServerCtr.GetInstance().addDataVersion();\r\n        CronCtr.getInstance().uploadAllRecord({ \"version\": ServerCtr.GetInstance().dataVersion + 1 });\r\n        sys.localStorage.removeItem(\"dataVersion\");\r\n        // @ts-ignore\r\n        this.resetAccount = true;\r\n    }\r\n\r\n    public load() {\r\n        let obj = sys.localStorage.getItem(this.$localKey);\r\n        if (obj) {\r\n            js.mixin(this, JSON.parse(obj));\r\n        } else {\r\n            this.setConfig()\r\n        }\r\n    }\r\n\r\n\r\n    private _drawAllWeight = [0, 0, 0]\r\n    private _drawAllSureWeight = [0, 0, 0]\r\n\r\n    /**\r\n     * 获得一次抽卡数据\r\n     */\r\n    public getDrawItem(drawType) {\r\n        let type = 2\r\n        if (drawType == 0) {\r\n            this.$drawNormalNum++\r\n            type = 2\r\n        } else {\r\n            this.$drawGradeNum++\r\n            type = 1\r\n        }\r\n        let isBichou = false\r\n        //  console.log(\"this.$drawGradeNum = \",this.$drawGradeNum)\r\n        //  console.log(\"this.$drawNormalNum = \",this.$drawNormalNum)\r\n\r\n        if (type == 2) {\r\n            if (this.$drawNormalNum >= designManager.config.extra2) {\r\n                //     console.log(\" 普通必抽\")\r\n                isBichou = true\r\n                this.$drawNormalNum = 0\r\n            }\r\n        } else {\r\n            if (this.$drawGradeNum >= designManager.config.extra1) {\r\n                isBichou = true\r\n                // console.log(\" 高级 必抽\")\r\n                this.$drawGradeNum = 0\r\n            }\r\n        }\r\n\r\n\r\n        let drawData = designManager.getRowsByType(constants.tableName.draw, type)\r\n        if (this._drawAllWeight[type] == NaN || this._drawAllWeight[type] <= 0) {\r\n            this._drawAllSureWeight[type] = 0\r\n            drawData.forEach(element => {\r\n                if (type == element.type) {\r\n                    this._drawAllWeight[type] += element.weight\r\n                    if (element.extra != \"\")\r\n                        this._drawAllSureWeight[type] += parseInt(element.extra)\r\n                }\r\n            });\r\n        }\r\n        let item = null\r\n        if (isBichou) {\r\n            let rand = Math.floor(Math.random() * this._drawAllSureWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type && element.extra) {\r\n                    rand -= element.extra\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        // console.log(\" 必抽，\", item)\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            let rand = Math.floor(Math.random() * this._drawAllWeight[type])\r\n            for (let index = 0; index < drawData.length; index++) {\r\n                let element = drawData[index];\r\n                if (type == element.type) {\r\n                    rand -= element.weight\r\n                    if (rand <= 0) {\r\n                        item = element\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // if (item && item.extra && item.extra > 0) {\r\n        //     // if (type == 2) {\r\n        //     //     this.$drawNormalNum = 0\r\n        //     // } else {\r\n        //     //     this.$drawGradeNum = 0\r\n        //     // }\r\n        // }\r\n        if (item == null) {\r\n            console.log(\"item null 没抽中 \")\r\n        }\r\n        return item\r\n    }\r\n\r\n\r\n    /**添加巡逻奖励 */\r\n    public getCurPatrolData() {\r\n        if (this.$patrolStartTime <= 0) {\r\n            this.$patrolStartTime = (new Date()).getTime()\r\n            return\r\n        }\r\n\r\n        let curTime = (new Date()).getTime()\r\n        let rewardArr = this.getPatrolReward()\r\n\r\n        this.$patrolStartTime = curTime\r\n        this.$patrolRewardPropArr = []\r\n        this.$patrolRewardProp = []\r\n\r\n        this.getRewardProp(rewardArr)\r\n        // this.getRewardProp(this.$patrolRewardPropArr)\r\n\r\n    }\r\n\r\n    public getPatrolTime() {\r\n        let curTime = (new Date()).getTime()\r\n        let passTime = Math.min(designManager.config.towerTop * 60, Math.floor((curTime - this.$patrolStartTime) / 1000))\r\n        return passTime\r\n    }\r\n\r\n    public getPatrolReward() {\r\n        let passTime = this.getPatrolTime()\r\n        let towerExp = Math.floor(passTime * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(passTime * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        // let prop: PropItem = {\r\n        //     Id: 101,\r\n        //     Num: getCoin,\r\n        // }\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(passTime / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            if (this.$patrolRewardProp[i] != 1) {\r\n                for (let j = 0; j < towerItem.length; j++) {\r\n                    let curr = Math.random()\r\n                    if (curr < towerItem[j][1] / 10000) {\r\n                        let prop: PropItem = {\r\n                            Id: towerItem[j][0],\r\n                            Num: 1,\r\n                        }\r\n                        myLog.i(\"抽中 \", towerItem[j][0])\r\n                        this.$patrolRewardPropArr.push(prop)\r\n                    } else {\r\n                      //  myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                    }\r\n                }\r\n                this.$patrolRewardProp[i] = 1\r\n            }\r\n        }\r\n        // this.getRewardProp()\r\n        this.$patrolRewardPropArr.forEach(element => {\r\n            rewardArr.push(element)\r\n        });\r\n        return rewardArr\r\n    }\r\n\r\n    public getPatrolState() {\r\n        let passTime = this.getPatrolTime()\r\n        if (passTime < 600) {\r\n            return 600 - passTime\r\n        }\r\n\r\n        return 0\r\n    }\r\n\r\n    public getPatrolRewardByTime(time) {\r\n        let towerExp = Math.floor(time * designManager.config.towerExp / 60)\r\n        let getCoin = Math.floor(time * designManager.config.towerCoin / 60)\r\n\r\n        let rewardArr = []\r\n        rewardArr.push({\r\n            Id: 101,\r\n            Num: getCoin,\r\n        })\r\n\r\n        rewardArr.push({\r\n            Id: 901,\r\n            Num: towerExp,\r\n        })\r\n        let towerItem = designManager.config.towerItem\r\n        // console.log(\"towerItem = \", towerItem)\r\n        let drawCount = Math.floor(time / 600)\r\n        for (let i = 0; i < drawCount; i++) {\r\n            for (let j = 0; j < towerItem.length; j++) {\r\n                let curr = Math.random()\r\n                if (curr < towerItem[j][1] / 10000) {\r\n                    let prop: PropItem = {\r\n                        Id: towerItem[j][0],\r\n                        Num: 1,\r\n                    }\r\n                    myLog.i(\"抽中 \", towerItem[j][0])\r\n                    rewardArr.push(prop)\r\n                } else {\r\n                    //   myLog.i(\"未抽中\", curr, towerItem[j][1] / 10000)\r\n                }\r\n            }\r\n        }\r\n        return rewardArr\r\n    }\r\n\r\n\r\n    public setPyramidState(index) {\r\n        this.$pyramidState[index] = 1\r\n        ServerCtr.GetInstance().addDataVersion()\r\n    }\r\n\r\n\r\n\r\n}"]}