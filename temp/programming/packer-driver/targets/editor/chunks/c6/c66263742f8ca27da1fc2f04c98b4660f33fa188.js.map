{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/LetterLayer.ts"],"names":["find","_decorator","localText","playerModel","UserData","BaseLayer","eventManager","msgac","ccclass","property","LetterLayer","awardArr","onLoad","isShowBannerAd","onEnable","onDisable","onDestroy","initUI","setItemLayer","getNodeByPath","refreshPropItem","bind","isLetterAward","setString","hasGet","get","itemUI","award","setPropItem","getNode","active","processEvent","ac","data","onButtonClick","node","name","onClickBtnGet","createNotice","arr","getInstance","addPropArrByDesign","openAwardGetLayer","send","refreshRedPoint","onClickBg","closeLayer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,I,OAAAA,I;AAAYC,MAAAA,U,OAAAA,U;;AACZC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;6BAGjBS,W,WADZF,OAAO,CAAC,aAAD,C,gBAAR,MACaE,WADb;AAAA;AAAA,kCAC2C;AAAA;AAAA;AAAA,eAEvCC,QAFuC,GAE5B,CAAC,CAAC,GAAD,EAAM,KAAN,CAAD,EAAe,CAAC,GAAD,EAAM,GAAN,CAAf,CAF4B;AAAA;;AAIvCC,QAAAA,MAAM,GAAG;AACL,gBAAMA,MAAN;AACA,eAAKC,cAAL,GAAsB,IAAtB;AACH;;AAEDC,QAAAA,QAAQ,GAAG;AACP,gBAAMA,QAAN;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,eAAKC,YAAL,CAAkB,KAAKC,aAAL,CAAmB,yBAAnB,CAAlB,EAAiE,KAAKR,QAAtE,EAAgF,KAAKS,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAhF;;AAEA,cAAI;AAAA;AAAA,0CAAYC,aAAhB,EAA+B;AAC3B,iBAAKC,SAAL,CAAe,KAAKJ,aAAL,CAAmB,gBAAnB,CAAf,EAAqD;AAAA;AAAA,wCAAUK,MAA/D;AACH,WAFD,MAEO;AACH,iBAAKD,SAAL,CAAe,KAAKJ,aAAL,CAAmB,gBAAnB,CAAf,EAAqD;AAAA;AAAA,wCAAUM,GAA/D;AACH;AACJ;;AAEDL,QAAAA,eAAe,CAACM,MAAD,EAAeC,KAAf,EAA2B;AACtC,eAAKC,WAAL,CAAiBD,KAAK,CAAC,CAAD,CAAtB,EAA2B3B,IAAI,CAAC,MAAD,EAAS0B,MAAT,CAA/B,EAAiDC,KAAK,CAAC,CAAD,CAAtD,EAA2D3B,IAAI,CAAC,IAAD,EAAO0B,MAAP,CAA/D,EAA+E1B,IAAI,CAAC,KAAD,EAAQ0B,MAAR,CAAnF;AAEA,cAAIG,OAAO,GAAG7B,IAAI,CAAC,KAAD,EAAQ0B,MAAR,CAAlB;;AACA,cAAI;AAAA;AAAA,0CAAYJ,aAAhB,EAA+B;AAC3BO,YAAAA,OAAO,CAACC,MAAR,GAAiB,IAAjB;AACH,WAFD,MAEO;AACHD,YAAAA,OAAO,CAACC,MAAR,GAAiB,KAAjB;AACH;AACJ;;AAEDC,QAAAA,YAAY,CAACC,EAAD,EAAUC,IAAV,EAAqB;AAC7B,kBAAQD,EAAR;AACI;AACI;AAFR;AAIH;;AAEDE,QAAAA,aAAa,CAACC,IAAD,EAAaC,IAAb,EAA2B;AACpC,kBAAQA,IAAR;AACI;AACI;AAFR;AAIH;;AAEDC,QAAAA,aAAa,GAAG;AACZ,cAAI;AAAA;AAAA,0CAAYf,aAAhB,EAA+B;AAC3B,iBAAKgB,YAAL,CAAkB;AAAA;AAAA,wCAAUd,MAA5B;AACA;AACH;;AACD;AAAA;AAAA,0CAAYF,aAAZ,GAA4B,CAA5B;AACA,cAAIiB,GAAG,GAAG;AAAA;AAAA,oCAASC,WAAT,GAAuBC,kBAAvB,CAA0C,KAAK9B,QAA/C,CAAV;AACA,eAAK+B,iBAAL,CAAuBH,GAAvB;AACA,eAAKtB,MAAL;AACA;AAAA;AAAA,4CAAa0B,IAAb,CAAkB;AAAA;AAAA,8BAAMC,eAAxB;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,eAAKC,UAAL;AACH;;AAtEsC,O","sourcesContent":["import { find, Node, _decorator } from 'cc';\r\nimport { localText } from '../../data/localText';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { msgac } from '../../data/msgac';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LetterLayer')\r\nexport class LetterLayer extends BaseLayer {\r\n\r\n    awardArr = [[101, 10000], [801, 200]];\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n        this.isShowBannerAd = true\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setItemLayer(this.getNodeByPath(\"ui/awardLayer/itemLayer\"), this.awardArr, this.refreshPropItem.bind(this));\r\n\r\n        if (playerModel.isLetterAward) {\r\n            this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.hasGet);\r\n        } else {\r\n            this.setString(this.getNodeByPath(\"ui/btnGet/text\"), localText.get);\r\n        }\r\n    }\r\n\r\n    refreshPropItem(itemUI: Node, award: any) {\r\n        this.setPropItem(award[0], find(\"icon\", itemUI), award[1], find(\"bg\", itemUI), find(\"num\", itemUI));\r\n\r\n        let getNode = find(\"get\", itemUI);\r\n        if (playerModel.isLetterAward) {\r\n            getNode.active = true;\r\n        } else {\r\n            getNode.active = false;\r\n        }\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickBtnGet() {\r\n        if (playerModel.isLetterAward) {\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n        playerModel.isLetterAward = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(this.awardArr);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n        eventManager.send(msgac.refreshRedPoint);\r\n    }\r\n\r\n    onClickBg() {\r\n        this.closeLayer();\r\n    }\r\n\r\n}\r\n\r\n"]}