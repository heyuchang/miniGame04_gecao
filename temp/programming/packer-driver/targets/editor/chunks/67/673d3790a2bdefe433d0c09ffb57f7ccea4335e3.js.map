{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/ShareLayer.ts"],"names":["director","find","UITransform","v3","_decorator","myLog","GNetCmd","GNetConst","ServerCtr","tyqSDK","cocosUtil","constants","localText","designManager","localStorageManager","playerModel","UserData","BaseLayer","ccclass","property","ShareLayer","tabLayer","tabArr","id","name","choseTabIndex","onLoad","getNodeByPath","tabItem","children","instantiate","parent","chs","forEach","itemUI","index","info","setString","refreshTabLayer","GetInstance","reqGetFriendVal","onEnable","on","GetFriendVal","toString","onMessageEvent","onDisable","onDestroy","initUI","refreshTopLayer","refreshListLayer","value","status","ResSuccess","cmd","remainNum","config","shareDayNum","shareObj","dayNum","shareDayDiamond","arr","getRowsByType","tableName","share","scrollViewSetData","refreshShareItem","bind","row","awardItem","propId","award","propNum","setPropItem","infoLayer1","infoLayer2","infoLayer3","active","nowNum","friendNum","num","wei","friendPassNum","ci","friendAdNum","ge","btnGet","doneNode","idAwardObj","setRenderableColor","colors","white","yin","normalNode","choseNode","textNode","getComponent","width","scale","processEvent","ac","data","onButtonClick","node","onClickTabItem","onClickBtnShare","uid","urlParmas","i","remain","propItem","getInstance","addPropNum","propIds","diamond","openAwardGetLayer","onClickBtnGet","createNotice","hasGet","notGet","format","addPropArrByDesign"],"mappings":"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","sourcesContent":["import { director, find, Node, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { GNetCmd, GNetConst } from '../../../tyqSDK/network/conf';\r\nimport ServerCtr from '../../../tyqSDK/network/ServerCtr';\r\nimport { tyqSDK } from '../../../tyqSDK/tyqSDK';\r\nimport { cocosUtil } from '../../../utils/cocosUtil';\r\nimport { constants } from '../../data/constants';\r\nimport { localText } from '../../data/localText';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { localStorageManager } from '../../manager/localStorageManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShareLayer')\r\nexport class ShareLayer extends BaseLayer {\r\n\r\n    tabLayer: Node;\r\n    tabArr = [\r\n        { id: 1, name: \"邀请好友\" },\r\n        { id: 2, name: \"通关奖励\" },\r\n        { id: 3, name: \"视频好友\" },\r\n    ];\r\n    choseTabIndex = 0;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        let tabLayer = this.getNodeByPath(\"ui/tabLayer\");\r\n        this.tabLayer = tabLayer;\r\n        let tabItem = tabLayer.children[0];\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        cocosUtil.instantiate(tabItem).parent = tabLayer;\r\n        let chs = tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let info = this.tabArr[index];\r\n            this.setString(find(\"text\", itemUI), info.name);\r\n            // @ts-ignore\r\n            itemUI.index = index;\r\n        });\r\n        this.refreshTabLayer();\r\n\r\n        ServerCtr.GetInstance().reqGetFriendVal();\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n\r\n        director.on(GNetCmd.GetFriendVal.toString(), this.onMessageEvent, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.refreshTopLayer();\r\n        this.refreshTabLayer();\r\n        this.refreshListLayer();\r\n    }\r\n\r\n    onMessageEvent(value) {\r\n        if (value.status != GNetConst.ResSuccess) {\r\n            return;\r\n        }\r\n        switch (value.cmd) {\r\n            case GNetCmd.GetFriendVal:\r\n                this.initUI();\r\n                break;\r\n        }\r\n    }\r\n\r\n    refreshTopLayer() {\r\n        let remainNum = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n        if (remainNum < 0) {\r\n            remainNum = 0;\r\n        }\r\n        this.setString(this.getNodeByPath(\"ui/top/hintLayer/day/num\"), remainNum);\r\n        this.setString(this.getNodeByPath(\"ui/top/shareAwardItem/num/val\"), \"x\" + designManager.config.shareDayDiamond);\r\n    }\r\n\r\n    refreshListLayer() {\r\n        let arr = designManager.getRowsByType(constants.tableName.share, this.choseTabIndex + 1);\r\n        this.scrollViewSetData(this.getNodeByPath(\"ui/listbg/list\"), arr, this.refreshShareItem.bind(this));\r\n    }\r\n\r\n    refreshShareItem(itemUI: any, row: any) {\r\n        find(\"awardLayer\", itemUI).children.forEach((awardItem: any, index: number) => {\r\n            let propId = row.award[index][0];\r\n            let propNum = row.award[index][1];\r\n            this.setPropItem(propId, find(\"icon\", awardItem), propNum, find(\"bg\", awardItem), find(\"num/val\", awardItem));\r\n            awardItem.award = row.award[index];\r\n        });\r\n        let infoLayer1 = find(\"infoLayer1\", itemUI);\r\n        let infoLayer2 = find(\"infoLayer2\", itemUI);\r\n        let infoLayer3 = find(\"infoLayer3\", itemUI);\r\n        infoLayer1.active = false;\r\n        infoLayer2.active = false;\r\n        infoLayer3.active = false;\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                infoLayer1.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer1), row.num + localText.wei);\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                infoLayer2.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer2), row.num + localText.ci);\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                infoLayer3.active = true;\r\n                this.setString(find(\"textLayer/val\", infoLayer3), row.num + localText.ge);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        let btnGet = find(\"btnGet\", itemUI);\r\n        let doneNode = find(\"done\", itemUI);\r\n        btnGet.active = false;\r\n        doneNode.active = false;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            doneNode.active = true;\r\n        } else {\r\n            btnGet.active = true;\r\n            // @ts-ignore\r\n            btnGet.row = row;\r\n            if (nowNum >= row.num) {\r\n                // 可领取奖励\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.white, true);\r\n            } else {\r\n                // 还未满足条件\r\n                cocosUtil.setRenderableColor(btnGet, constants.colors.yin, true);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    refreshTabLayer() {\r\n        let chs = this.tabLayer.children;\r\n        chs.forEach((itemUI, index) => {\r\n            let normalNode = find(\"normal\", itemUI);\r\n            let choseNode = find(\"chose\", itemUI);\r\n            let textNode = find(\"text\", itemUI);\r\n            normalNode.active = false;\r\n            choseNode.active = false;\r\n            if (this.choseTabIndex == index) {\r\n                choseNode.active = true;\r\n                itemUI.getComponent(UITransform).width = choseNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1.3, 1.3, 1);\r\n            } else {\r\n                normalNode.active = true;\r\n                itemUI.getComponent(UITransform).width = normalNode.getComponent(UITransform).width;\r\n                textNode.scale = v3(1, 1, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    processEvent(ac: any, data: any) {\r\n        switch (ac) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onButtonClick(node: Node, name: string) {\r\n        switch (name) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClickTabItem(node) {\r\n        this.choseTabIndex = node.index;\r\n        this.initUI();\r\n    }\r\n\r\n    onClickBtnShare() {\r\n        let uid = localStorageManager.uid;\r\n        if (!uid) {\r\n            uid = \"\";\r\n        }\r\n        let urlParmas = \"uid=\" + uid;\r\n        myLog.i(\"开始分享：\" + urlParmas);\r\n        tyqSDK.share(urlParmas, () => {\r\n            // 分享成功\r\n            myLog.i(\"分享结果回调\");\r\n            let remain = designManager.config.shareDayNum - playerModel.shareObj.dayNum;\r\n            if (remain > 0) {\r\n                let propItem = UserData.getInstance().addPropNum(constants.propIds.diamond, designManager.config.shareDayDiamond);\r\n                playerModel.shareObj.dayNum++;\r\n                this.openAwardGetLayer([propItem]);\r\n                this.refreshTopLayer();\r\n            }\r\n        });\r\n    }\r\n\r\n    onClickBtnGet(node: any) {\r\n        let row = node.row;\r\n        if (playerModel.shareObj.idAwardObj[row.id]) {\r\n            this.createNotice(localText.hasGet);\r\n            return;\r\n        }\r\n        let nowNum = 0;\r\n        switch (this.choseTabIndex + 1) {\r\n            case 1:\r\n                nowNum = playerModel.shareObj.friendNum;\r\n                break;\r\n            case 2:\r\n                nowNum = playerModel.shareObj.friendPassNum;\r\n                break;\r\n            case 3:\r\n                nowNum = playerModel.shareObj.friendAdNum;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        if (nowNum < row.num) {\r\n            this.createNotice(localText.notGet.format(nowNum));\r\n            return;\r\n        }\r\n\r\n        playerModel.shareObj.idAwardObj[row.id] = 1;\r\n        let arr = UserData.getInstance().addPropArrByDesign(row.award);\r\n        this.openAwardGetLayer(arr);\r\n        this.initUI();\r\n    }\r\n\r\n}\r\n\r\n"]}