{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/manager/localStorageManager.ts"],"names":["LocalStorageManager","sys","myLog","constants","constructor","uidKey","gameName","openIdKey","instance","_instance","getKey","getGameData","key","data","localStorage","getItem","JSON","parse","setGameData","setItem","stringify","uid","i","openId","localStorageManager"],"mappings":";;;sGAKMA,mB;;;;;;;;;;;;;;;;;AALGC,MAAAA,G,OAAAA,G;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;AAGHH,MAAAA,mB,GAAN,MAAMA,mBAAN,CAA0B;AAGdI,QAAAA,WAAW,GAAG;AAAA,eA8BtBC,MA9BsB,GA8Bb;AAAA;AAAA,sCAAUC,QAAV,GAAqB,MA9BR;AAAA,eAuCtBC,SAvCsB,GAuCV;AAAA;AAAA,sCAAUD,QAAV,GAAqB,SAvCX;AAAG;;AACC,mBAARE,QAAQ,GAAwB;AAC9C,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiB,IAAIT,mBAAJ,EAAjB;AACH;;AACD,iBAAO,KAAKS,SAAZ;AACH;;AAEDC,QAAAA,MAAM,GAAW;AACb,cAAI;AAAA;AAAA,sCAAUJ,QAAd,EAAwB;AACpB,mBAAO;AAAA;AAAA,wCAAUA,QAAV,GAAqB,WAA5B;AACH;;AACD,iBAAO,UAAP;AACH;;AAEDK,QAAAA,WAAW,GAAG;AACV,cAAIC,GAAG,GAAG,KAAKF,MAAL,EAAV;AACA,cAAIG,IAAI,GAAGZ,GAAG,CAACa,YAAJ,CAAiBC,OAAjB,CAAyBH,GAAzB,CAAX;;AACA,cAAIC,IAAJ,EAAU;AACNA,YAAAA,IAAI,GAAGG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;AACA,mBAAOA,IAAP;AACH;;AAED,iBAAO,EAAP;AACH;;AACDK,QAAAA,WAAW,CAACL,IAAD,EAAe;AACtB,cAAID,GAAG,GAAG,KAAKF,MAAL,EAAV;AACAT,UAAAA,GAAG,CAACa,YAAJ,CAAiBK,OAAjB,CAAyBP,GAAzB,EAA8BI,IAAI,CAACI,SAAL,CAAeP,IAAf,CAA9B;AACH;;AAGM,YAAHQ,GAAG,CAACA,GAAD,EAAc;AACjBpB,UAAAA,GAAG,CAACa,YAAJ,CAAiBK,OAAjB,CAAyB,KAAKd,MAA9B,EAAsCgB,GAAG,GAAG,EAA5C;AACA;AAAA;AAAA,8BAAMC,CAAN,CAAQ,WAAWD,GAAnB;AACH;;AACM,YAAHA,GAAG,GAAG;AACN,iBAAOpB,GAAG,CAACa,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKV,MAA9B,CAAP;AACH;;AAGS,YAANkB,MAAM,CAACA,MAAD,EAAiB;AACvBtB,UAAAA,GAAG,CAACa,YAAJ,CAAiBK,OAAjB,CAAyB,KAAKZ,SAA9B,EAAyCgB,MAAM,GAAG,EAAlD;AACA;AAAA;AAAA,8BAAMD,CAAN,CAAQ,cAAcC,MAAtB;AACH;;AACS,YAANA,MAAM,GAAG;AACT,iBAAOtB,GAAG,CAACa,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKR,SAA9B,CAAP;AACH;;AAjDqB,O;AAApBP,MAAAA,mB,CAEaS,S;;qCAmDNe,mB,GAAsBxB,mBAAmB,CAACQ,Q","sourcesContent":["import { sys } from \"cc\";\r\nimport { myLog } from \"../../common/myLog\";\r\nimport { constants } from \"../data/constants\";\r\n\r\n\r\nclass LocalStorageManager {\r\n\r\n    private static _instance: LocalStorageManager;\r\n    private constructor() { };\r\n    public static get instance(): LocalStorageManager {\r\n        if (!this._instance) {\r\n            this._instance = new LocalStorageManager();\r\n        }\r\n        return this._instance;\r\n    };\r\n\r\n    getKey(): string {\r\n        if (constants.gameName) {\r\n            return constants.gameName + \"_gameData\";\r\n        }\r\n        return \"gameData\";\r\n    }\r\n\r\n    getGameData() {\r\n        let key = this.getKey();\r\n        let data = sys.localStorage.getItem(key);\r\n        if (data) {\r\n            data = JSON.parse(data);\r\n            return data;\r\n        }\r\n\r\n        return {};\r\n    }\r\n    setGameData(data: object) {\r\n        let key = this.getKey();\r\n        sys.localStorage.setItem(key, JSON.stringify(data));\r\n    }\r\n\r\n    uidKey = constants.gameName + \"_uid\";\r\n    set uid(uid: string) {\r\n        sys.localStorage.setItem(this.uidKey, uid + \"\");\r\n        myLog.i(\"保存uid:\" + uid);\r\n    }\r\n    get uid() {\r\n        return sys.localStorage.getItem(this.uidKey);\r\n    }\r\n\r\n    openIdKey = constants.gameName + \"_openId\";\r\n    set openId(openId: string) {\r\n        sys.localStorage.setItem(this.openIdKey, openId + \"\");\r\n        myLog.i(\"保存openId：\" + openId);\r\n    }\r\n    get openId() {\r\n        return sys.localStorage.getItem(this.openIdKey);\r\n    }\r\n\r\n}\r\n\r\nexport const localStorageManager = LocalStorageManager.instance;\r\n"]}