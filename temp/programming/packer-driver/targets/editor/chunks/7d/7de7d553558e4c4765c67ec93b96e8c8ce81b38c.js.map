{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/manager/MapWrap.ts"],"names":["MapWrap","js","constructor","array","_objects","_size","createMap","i","length","set","size","objects","clear","has","key","value","get","delete","keys","Object","values","forEach","push","toArray","isNumberKey","rets","parseInt","callBack","result","rforEach"],"mappings":";;;sEAEaA,O;;;;;;;;;AAFJC,MAAAA,E,OAAAA,E;;;;;;;;;yBAEID,O,GAAN,MAAMA,OAAN,CAA2C;AAIjDE,QAAAA,WAAW,CAACC,KAAD,EAAwB;AAAA,eAHzBC,QAGyB;AAAA,eAFzBC,KAEyB,GAFjB,CAEiB;AAClC,eAAKD,QAAL,GAAgBH,EAAE,CAACK,SAAH,CAAa,IAAb,CAAhB;AACA,eAAKD,KAAL,GAAa,CAAb;;AACA,cAAIF,KAAJ,EAAW;AACV,iBAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAAK,CAACK,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACtC,mBAAKE,GAAL,CAASN,KAAK,CAACI,CAAD,CAAL,CAAS,CAAT,CAAT,EAAsBJ,KAAK,CAACI,CAAD,CAAL,CAAS,CAAT,CAAtB;AACA;AACD;AACD;;AAEc,YAAJG,IAAI,CAACA,IAAD,EAAO;AACrB,eAAKL,KAAL,GAAaK,IAAb;AACA;;AAEiB,YAAPC,OAAO,CAACA,OAAD,EAAU;AAC3B,eAAKP,QAAL,GAAgBO,OAAhB;AACA;;AAEc,YAAJD,IAAI,GAAW;AACzB,iBAAO,KAAKL,KAAZ;AACA;;AAEMO,QAAAA,KAAK,GAAS;AACpB,eAAKR,QAAL,GAAgBH,EAAE,CAACK,SAAH,CAAa,IAAb,CAAhB;AACA,eAAKD,KAAL,GAAa,CAAb;AACA;;AAEMQ,QAAAA,GAAG,CAACC,GAAD,EAAkB;AAC3B,iBAAOA,GAAG,IAAW,KAAKV,QAA1B;AACA;;AAEMK,QAAAA,GAAG,CAACK,GAAD,EAASC,KAAT,EAAyB;AAClC,cAAI,CAAC,KAAKF,GAAL,CAASC,GAAT,CAAL,EAAoB;AACnB,iBAAKT,KAAL;AACA;;AACD,eAAKD,QAAL,CAAcU,GAAd,IAAqBC,KAArB;AACA;;AAEMC,QAAAA,GAAG,CAACF,GAAD,EAAY;AACrB,cAAI,CAAC,KAAKD,GAAL,CAASC,GAAT,CAAL,EAAoB,OAAO,IAAP;AACpB,iBAAO,KAAKV,QAAL,CAAcU,GAAd,CAAP;AACA;;AAEMG,QAAAA,MAAM,CAACH,GAAD,EAAe;AAC3B,cAAI,KAAKD,GAAL,CAASC,GAAT,CAAJ,EAAmB;AAClB,mBAAO,KAAKV,QAAL,CAAcU,GAAd,CAAP;AACA,iBAAKT,KAAL;AACA;AACD;;AAEMa,QAAAA,IAAI,GAAQ;AAClB,cAAIA,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAY,KAAKd,QAAjB,CAAX;AACA,iBAAOc,IAAP;AACA;;AAEME,QAAAA,MAAM,GAAW;AACvB,cAAIF,IAAI,GAAG,KAAKA,IAAL,EAAX;AACA,cAAIE,MAAM,GAAG,EAAb;AACAF,UAAAA,IAAI,CAACG,OAAL,CAAaP,GAAG,IAAI;AACnBM,YAAAA,MAAM,CAACE,IAAP,CAAY,KAAKN,GAAL,CAASF,GAAT,CAAZ;AACA,WAFD;AAGA,iBAAOM,MAAP;AACA;;AAEMG,QAAAA,OAAO,CAACC,WAAD,EAAuC;AACpD,cAAIC,IAAI,GAAG,EAAX;AACA,cAAIP,IAAI,GAAG,KAAKA,IAAL,EAAX;AACAA,UAAAA,IAAI,CAACG,OAAL,CAAaP,GAAG,IAAI;AACnBW,YAAAA,IAAI,CAACH,IAAL,CAAU,CAAC,CAACE,WAAD,GAAeV,GAAf,GAAqBY,QAAQ,CAACZ,GAAD,CAA9B,EAA4C,KAAKE,GAAL,CAASF,GAAT,CAA5C,CAAV;AACA,WAFD;AAGA,iBAAOW,IAAP;AACA;;AAEMJ,QAAAA,OAAO,CAAIM,QAAJ,EAA4C;AACzD,cAAIT,IAAI,GAAG,KAAKA,IAAL,EAAX;;AACA,eAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGW,IAAI,CAACV,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AACrC,gBAAIqB,MAAM,GAAGD,QAAQ,CAAC,KAAKvB,QAAL,CAAcc,IAAI,CAACX,CAAD,CAAlB,CAAD,EAAyBW,IAAI,CAACX,CAAD,CAA7B,CAArB;AACA,gBAAI,CAAC,CAACqB,MAAN,EAAc,OAAOA,MAAP;AACd;AACD;;AAEMC,QAAAA,QAAQ,CAAIF,QAAJ,EAA4C;AAC1D,cAAIT,IAAI,GAAG,KAAKA,IAAL,EAAX;;AACA,eAAK,IAAIX,CAAC,GAAGW,IAAI,CAACV,MAAL,GAAc,CAA3B,EAA8BD,CAAC,IAAI,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AAC1C,gBAAIqB,MAAM,GAAGD,QAAQ,CAAC,KAAKvB,QAAL,CAAcc,IAAI,CAACX,CAAD,CAAlB,CAAD,EAAyBW,IAAI,CAACX,CAAD,CAA7B,CAArB;AACA,gBAAI,CAAC,CAACqB,MAAN,EAAc,OAAOA,MAAP;AACd;AACD;;AA3FgD,O","sourcesContent":["import { js } from \"cc\";\r\n\r\nexport class MapWrap<K extends string | number, V>{\r\n\tprotected _objects;\r\n\tprotected _size = 0;\r\n\r\n\tconstructor(array?: Array<[K, V]>) {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t\tif (array) {\r\n\t\t\tfor (let i = 0; i < array.length; i++) {\r\n\t\t\t\tthis.set(array[i][0], array[i][1]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic set size(size) {\r\n\t\tthis._size = size;\r\n\t}\r\n\r\n\tpublic set objects(objects) {\r\n\t\tthis._objects = objects\r\n\t}\r\n\r\n\tpublic get size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic clear(): void {\r\n\t\tthis._objects = js.createMap(true);\r\n\t\tthis._size = 0;\r\n\t}\r\n\r\n\tpublic has(key: K): boolean {\r\n\t\treturn key as any in this._objects;\r\n\t}\r\n\r\n\tpublic set(key: K, value: V): void {\r\n\t\tif (!this.has(key)) {\r\n\t\t\tthis._size++;\r\n\t\t}\r\n\t\tthis._objects[key] = value;\r\n\t}\r\n\r\n\tpublic get(key: K): V {\r\n\t\tif (!this.has(key)) return null;\r\n\t\treturn this._objects[key];\r\n\t}\r\n\r\n\tpublic delete(key: K): void {\r\n\t\tif (this.has(key)) {\r\n\t\t\tdelete this._objects[key];\r\n\t\t\tthis._size--;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic keys(): K[] {\r\n\t\tlet keys = Object.keys(this._objects);\r\n\t\treturn keys as any;\r\n\t}\r\n\r\n\tpublic values<V>(): V[] {\r\n\t\tlet keys = this.keys();\r\n\t\tlet values = [];\r\n\t\tkeys.forEach(key => {\r\n\t\t\tvalues.push(this.get(key));\r\n\t\t})\r\n\t\treturn values;\r\n\t}\r\n\r\n\tpublic toArray(isNumberKey?: boolean): Array<[K, V]> {\r\n\t\tlet rets = [];\r\n\t\tlet keys = this.keys();\r\n\t\tkeys.forEach(key => {\r\n\t\t\trets.push([!isNumberKey ? key : parseInt(key as any), this.get(key)]);\r\n\t\t})\r\n\t\treturn rets;\r\n\t}\r\n\r\n\tpublic forEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = 0; i < keys.length; i++) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic rforEach<T>(callBack: { (value: V, key: K): T }): T {\r\n\t\tlet keys = this.keys();\r\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\r\n\t\t\tlet result = callBack(this._objects[keys[i]], keys[i]);\r\n\t\t\tif (!!result) return result;\r\n\t\t}\r\n\t}\r\n}"]}