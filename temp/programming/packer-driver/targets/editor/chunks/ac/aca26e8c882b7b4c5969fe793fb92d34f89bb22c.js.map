{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/RewardItemLayer.ts"],"names":["Node","_decorator","sdkManager","constants","audioManager","designManager","UserData","PropItemPrefab","BaseUILayer","ccclass","property","RewardItemLayer","type","onLoad","onEnable","id","layerData","propId","num","propItem","getComponent","setView","Type_UnTouch","getRewardProp","playEffect","prop","Id","Num","self","propdata","getRowById","tableName","openAd","name","st","getInstance","closeLayer","onDisable","onDestroy","start"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACNC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,a,iBAAAA,a;;AACUC,MAAAA,Q,iBAAAA,Q;;AACVC,MAAAA,c,iBAAAA,c;;AAEAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;iCAGjBU,e,WADZF,OAAO,CAAC,iBAAD,C,UAIHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEZ;AAAR,OAAD,C,UAERU,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEZ;AAAR,OAAD,C,2BANb,MACaW,eADb;AAAA;AAAA,sCACiD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAQ7CE,QAAAA,MAAM,GAAG;AACL,gBAAMA,MAAN;AACH;;AAEDC,QAAAA,QAAQ,GAAG;AACP,cAAIC,EAAE,GAAG,KAAKC,SAAL,CAAeC,MAAxB;AACA,cAAIC,GAAG,GAAG,KAAKF,SAAL,CAAeE,GAAzB;AAEA,eAAKC,QAAL,CAAcC,YAAd;AAAA;AAAA,gDAA2CC,OAA3C,CAAmDN,EAAnD,EAAuDG,GAAvD,EAA4D;AAAA;AAAA,gDAAeI,YAA3E;AACH;;AAEDC,QAAAA,aAAa,GAAG;AACZ;AAAA;AAAA,4CAAaC,UAAb,CAAwB,UAAxB;AAEA,cAAIC,IAAc,GAAG;AACjBC,YAAAA,EAAE,EAAE,KAAKV,SAAL,CAAeC,MADF;AAEjBU,YAAAA,GAAG,EAAE,KAAKX,SAAL,CAAeE;AAFH,WAArB;AAIA,cAAIU,IAAI,GAAG,IAAX;AACA,cAAIC,QAAQ,GAAG;AAAA;AAAA,8CAAcC,UAAd,CAAyB;AAAA;AAAA,sCAAUC,SAAV,CAAoBN,IAA7C,EAAmD,KAAKT,SAAL,CAAeC,MAAlE,CAAf;AAEA;AAAA;AAAA,wCAAWe,MAAX,CAAkB,SAASH,QAAQ,CAACI,IAApC,EAA2CC,EAAD,IAAgB;AACtD,gBAAIA,EAAE,IAAI,CAAV,EAAa;AACT;AAAA;AAAA,wCAASC,WAAT,GAAuBZ,aAAvB,CAAqC,CAACE,IAAD,CAArC;AACAG,cAAAA,IAAI,CAACQ,UAAL;AACH;AACJ,WALD;AAMH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,KAAK,GAAG,CAEP;;AAEDH,QAAAA,UAAU,GAAG;AACT;AAAA;AAAA,4CAAaZ,UAAb,CAAwB,UAAxB;AACA,gBAAMY,UAAN;AACH;;AApD4C,O;;;;;iBAGF,I;;;;;;;iBAEA,I","sourcesContent":["import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { PropItem, UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\n\r\nimport { BaseUILayer } from './BaseUILayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RewardItemLayer')\r\nexport class RewardItemLayer extends BaseUILayer {\r\n\r\n\r\n    @property({ type: Node }) btnClose: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n\r\n    onLoad() {\r\n        super.onLoad()\r\n    }\r\n\r\n    onEnable() {\r\n        let id = this.layerData.propId\r\n        let num = this.layerData.num\r\n\r\n        this.propItem.getComponent(PropItemPrefab).setView(id, num, PropItemPrefab.Type_UnTouch)\r\n    }\r\n\r\n    getRewardProp() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let prop: PropItem = {\r\n            Id: this.layerData.propId,\r\n            Num: this.layerData.num,\r\n        }\r\n        let self = this\r\n        let propdata = designManager.getRowById(constants.tableName.prop, this.layerData.propId)\r\n\r\n        sdkManager.openAd(\"获得道具\" + propdata.name, (st: number) => {\r\n            if (st == 1) {\r\n                UserData.getInstance().getRewardProp([prop])\r\n                self.closeLayer()\r\n            }\r\n        });\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    closeLayer() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        super.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n"]}