{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/bullet/Bullet9.ts"],"names":["Component","tween","v3","Vec2","_decorator","cocosUtil","utilTools","mapModel","physicsGroup","HintNames","ccclass","property","bullet9","bullet","moveStop","contactNotHide","bulletId","timeCount","init","time","node","setScale","to","scale","start","scheduleOnce","direction","getFacePlayerDirection","normalize","playerPos","player","getPosition","dis","distance","speed","position","call","recycleSelf","p","arr","getCircleDirectionArr","convertToWorldSpaceWithPos","forArr","bulletSystem","addBullet","MONSTER_BULLET","hintSystem","addHint","boom1"],"mappings":"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","sourcesContent":["import { Component, tween, v3, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-大闪电球\r\n@ccclass('bullet9')\r\nexport class bullet9 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean = false;\r\n    contactNotHide: boolean = true;\r\n\r\n    bulletId: number = 1008;\r\n\r\n    timeCount: number = 0;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.timeCount = 0;\r\n\r\n        this.moveStop = true;\r\n\r\n        let time = 0.7;\r\n        this.bullet.node.setScale(v3(0.1, 0.1, 1));\r\n        tween(this.bullet.node).to(time, { scale: v3(1.5, 1.5, 1) }).start();\r\n\r\n        this.scheduleOnce(() => {\r\n            this.bullet.direction = this.bullet.getFacePlayerDirection().normalize();\r\n            let playerPos = mapModel.player.node.getPosition();\r\n            let dis = Vec2.distance(playerPos, this.bullet.node.getPosition());\r\n            let time = dis / this.bullet.speed;\r\n            tween(this.bullet.node).to(time, { position: playerPos }).call(() => {\r\n                this.bullet.recycleSelf();\r\n                // 生成一圈小子弹\r\n                let p = this.bullet.node.getPosition();\r\n                let arr = cocosUtil.getCircleDirectionArr(10);\r\n                p = cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, p);\r\n                utilTools.forArr(arr, (direction: any) => {\r\n                    mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, p, direction);\r\n                });\r\n                // 爆炸特效\r\n                mapModel.hintSystem.addHint(HintNames.boom1, p);\r\n            }).start();\r\n        }, time);\r\n\r\n    }\r\n\r\n}\r\n\r\n"]}