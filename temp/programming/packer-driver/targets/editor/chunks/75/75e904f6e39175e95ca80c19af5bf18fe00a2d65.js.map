{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/prop/Prop201.ts"],"names":["Component","v3","_decorator","myLog","utilTools","constants","designManager","ccclass","property","Prop201","prop","init","num","extraObj","arr","getRowsByType","tableName","propTypes","exp","propRow","forArr","row","p1","p2","e","d","scale","bodyNode","setScale","setSpriteFrame","icon"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,U,OAAAA,U;;AACfC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;yBAEaO,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BT,SAD7B,CACuC;AAAA;AAAA;AAAA,eAEnCU,IAFmC;AAAA;;AAInCC,QAAAA,IAAI,CAACD,IAAD,EAAa;AACb,eAAKA,IAAL,GAAYA,IAAZ;AAEA,cAAIE,GAAG,GAAG,KAAKF,IAAL,CAAUG,QAAV,CAAmBD,GAA7B;AACA,cAAIE,GAAG,GAAG;AAAA;AAAA,8CAAcC,aAAd,CAA4B;AAAA;AAAA,sCAAUC,SAAV,CAAoBN,IAAhD,EAAsD;AAAA;AAAA,sCAAUO,SAAV,CAAoBC,GAA1E,CAAV;AACA,cAAIC,OAAO,GAAG,IAAd;AACA;AAAA;AAAA,sCAAUC,MAAV,CAAiBN,GAAjB,EAAuBO,GAAD,IAAc;AAChC,gBAAIT,GAAG,IAAIS,GAAG,CAACC,EAAX,IAAiBV,GAAG,IAAIS,GAAG,CAACE,EAAhC,EAAoC;AAChCJ,cAAAA,OAAO,GAAGE,GAAV;AACA,qBAAO,IAAP;AACH;AACJ,WALD;;AAMA,cAAI,CAACF,OAAL,EAAc;AACV;AAAA;AAAA,gCAAMK,CAAN,CAAQ,aAAaZ,GAAb,GAAmB,oBAA3B;AACA;AACH,WAfY,CAiBb;;;AACA,cAAIa,CAAC,GAAG,CAACN,OAAO,CAACI,EAAR,GAAaJ,OAAO,CAACG,EAAtB,IAA4B,GAApC;AACA,cAAII,KAAK,GAAG,CAAZ;;AACA,cAAId,GAAG,GAAGO,OAAO,CAACG,EAAd,GAAmBG,CAAvB,EAA0B;AACtBC,YAAAA,KAAK,GAAG,GAAR;AACH;;AACD,eAAKhB,IAAL,CAAUiB,QAAV,CAAmBC,QAAnB,CAA4B3B,EAAE,CAACyB,KAAD,EAAQA,KAAR,EAAe,CAAf,CAA9B;AAEA,eAAKhB,IAAL,CAAUmB,cAAV,CAAyB,KAAKnB,IAAL,CAAUiB,QAAnC,EAA6CR,OAAO,CAACW,IAArD;AAEH;;AA/BkC,O","sourcesContent":["import { Component, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../../common/myLog';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { constants } from '../../../data/constants';\r\nimport { designManager } from '../../../manager/designManager';\r\nimport { Prop } from './Prop';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 经验\r\n@ccclass('Prop201')\r\nexport class Prop201 extends Component {\r\n\r\n    prop: Prop;\r\n\r\n    init(prop: Prop) {\r\n        this.prop = prop;\r\n\r\n        let num = this.prop.extraObj.num;\r\n        let arr = designManager.getRowsByType(constants.tableName.prop, constants.propTypes.exp);\r\n        let propRow = null;\r\n        utilTools.forArr(arr, (row: any) => {\r\n            if (num >= row.p1 && num <= row.p2) {\r\n                propRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (!propRow) {\r\n            myLog.e(\"exp num:\" + num + \" not in prop table\");\r\n            return;\r\n        }\r\n\r\n        // 根据经验值大小显示缩放比\r\n        let d = (propRow.p2 - propRow.p1) * 0.8;\r\n        let scale = 1;\r\n        if (num - propRow.p1 > d) {\r\n            scale = 1.3;\r\n        }\r\n        this.prop.bodyNode.setScale(v3(scale, scale, 1));\r\n\r\n        this.prop.setSpriteFrame(this.prop.bodyNode, propRow.icon);\r\n\r\n    }\r\n\r\n}\r\n\r\n"]}