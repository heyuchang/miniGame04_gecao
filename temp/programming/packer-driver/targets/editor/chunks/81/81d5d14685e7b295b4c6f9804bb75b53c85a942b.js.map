{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/skill/Skill4.ts"],"names":["Component","_decorator","cocosUtil","utilTools","mapModel","physicsGroup","audioManager","ccclass","property","Skill4","skill","timeCount","isShowing","moveDis","init","throwFire","arr","getCircleDirectionArr","row","num","forArr","direction","targetPos","player","node","getPosition","add","multiplyScalar","extraObj","time","getDuration","bulletSystem","addBullet","bulletId","PLAYER_BULLET","playEffect","audio","updateLogic","dt","getAtkCd","scheduleOnce"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,U,OAAAA,U;;AACjBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U,GAE9B;;wBAEaQ,M,WADZF,OAAO,CAAC,QAAD,C,gBAAR,MACaE,MADb,SAC4BT,SAD5B,CACsC;AAAA;AAAA;AAAA,eAElCU,KAFkC;AAAA,eAIlCC,SAJkC,GAId,CAJc;AAAA,eAKlCC,SALkC,GAKb,KALa;AAAA,eAQlCC,OARkC,GAQhB,GARgB;AAAA;;AAUlCC,QAAAA,IAAI,CAACJ,KAAD,EAAe;AACf,eAAKA,KAAL,GAAaA,KAAb;AAEH,SAbiC,CAelC;;;AACAK,QAAAA,SAAS,GAAG;AACR,cAAIC,GAAG,GAAG;AAAA;AAAA,sCAAUC,qBAAV,CAAgC,KAAKP,KAAL,CAAWQ,GAAX,CAAeC,GAA/C,CAAV;AACA;AAAA;AAAA,sCAAUC,MAAV,CAAiBJ,GAAjB,EAAuBK,SAAD,IAAqB;AACvC,gBAAIC,SAAS,GAAG;AAAA;AAAA,sCAASC,MAAT,CAAgBC,IAAhB,CAAqBC,WAArB,GAAmCC,GAAnC,CAAuCL,SAAS,CAACM,cAAV,CAAyB,KAAKd,OAA9B,CAAvC,CAAhB;AACA,gBAAIe,QAAQ,GAAG;AACXN,cAAAA,SAAS,EAAEA,SADA;AAEXO,cAAAA,IAAI,EAAE,KAAKnB,KAAL,CAAWoB,WAAX;AAFK,aAAf;AAIA;AAAA;AAAA,sCAASC,YAAT,CAAsBC,SAAtB,CAAgC,KAAKtB,KAAL,CAAWQ,GAAX,CAAee,QAA/C,EAAyD;AAAA;AAAA,8CAAaC,aAAtE,EAAqF,IAArF,EAA2Fb,SAA3F,EAAsGO,QAAtG;AACH,WAPD;AAQA;AAAA;AAAA,4CAAaO,UAAb,CAAwB,KAAKzB,KAAL,CAAWQ,GAAX,CAAekB,KAAvC;AACH;;AAEDC,QAAAA,WAAW,CAACC,EAAD,EAAa;AACpB,cAAI,KAAK1B,SAAT,EAAoB;AAChB;AACH;;AAED,eAAKD,SAAL,IAAkB2B,EAAlB;;AACA,cAAI,KAAK3B,SAAL,GAAiB,KAAKD,KAAL,CAAW6B,QAAX,EAArB,EAA4C;AACxC;AACH;;AAED,eAAK5B,SAAL,GAAiB,CAAjB;AACA,eAAKC,SAAL,GAAiB,IAAjB;AACA,eAAK4B,YAAL,CAAkB,MAAM;AACpB,iBAAK5B,SAAL,GAAiB,KAAjB;AACH,WAFD,EAEG,KAAKF,KAAL,CAAWoB,WAAX,EAFH;AAIA,eAAKf,SAAL;AACH;;AA9CiC,O","sourcesContent":["import { Component, Vec3, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { utilTools } from '../../../../utils/utilTools';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { Skill } from './Skill';\r\nimport { audioManager } from '../../../manager/audioManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 油桶\r\n@ccclass('Skill4')\r\nexport class Skill4 extends Component {\r\n\r\n    skill: Skill;\r\n\r\n    timeCount: number = 0;\r\n    isShowing: boolean = false;\r\n\r\n    // 油桶扔出距离\r\n    moveDis: number = 200;\r\n\r\n    init(skill: Skill) {\r\n        this.skill = skill;\r\n\r\n    }\r\n\r\n    // 扔出油桶\r\n    throwFire() {\r\n        let arr = cocosUtil.getCircleDirectionArr(this.skill.row.num);\r\n        utilTools.forArr(arr, (direction: Vec3) => {\r\n            let targetPos = mapModel.player.node.getPosition().add(direction.multiplyScalar(this.moveDis));\r\n            let extraObj = {\r\n                targetPos: targetPos,\r\n                time: this.skill.getDuration()\r\n            };\r\n            mapModel.bulletSystem.addBullet(this.skill.row.bulletId, physicsGroup.PLAYER_BULLET, null, direction, extraObj);\r\n        });\r\n        audioManager.playEffect(this.skill.row.audio);\r\n    }\r\n\r\n    updateLogic(dt: number) {\r\n        if (this.isShowing) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount += dt;\r\n        if (this.timeCount < this.skill.getAtkCd()) {\r\n            return;\r\n        }\r\n\r\n        this.timeCount = 0;\r\n        this.isShowing = true;\r\n        this.scheduleOnce(() => {\r\n            this.isShowing = false;\r\n        }, this.skill.getDuration());\r\n\r\n        this.throwFire();\r\n    }\r\n\r\n}\r\n\r\n"]}