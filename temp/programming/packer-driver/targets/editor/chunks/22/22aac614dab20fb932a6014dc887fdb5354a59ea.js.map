{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/BuyLifeLayer.ts"],"names":["_decorator","sdkManager","msgac","designManager","eventManager","playerModel","UserData","BaseLayer","ccclass","property","BuyLifeLayer","diamondNumNode","onLoad","getNodeByPath","isShowBannerAd","onEnable","getInstance","mapData","onDisable","onDestroy","initUI","setString","config","backLifeDiamond","onClickBtnDiamond","useBaoShi","skillLifeNum","closeLayer","send","mapRefreshSkill","onClickBtnAd","openAd","st","layerCb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAeA,MAAAA,U,OAAAA,U;;AACNC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;8BAGjBU,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,kCAC4C;AAAA;AAAA;AAAA,eAExCC,cAFwC;AAAA;;AAIxCC,QAAAA,MAAM,GAAG;AACL,gBAAMA,MAAN;AAEA,eAAKD,cAAL,GAAsB,KAAKE,aAAL,CAAmB,6BAAnB,CAAtB;AACA,eAAKC,cAAL,GAAsB,IAAtB;AAEH;;AAEDC,QAAAA,QAAQ,GAAG;AACP,gBAAMA,QAAN;AAEA;AAAA;AAAA,oCAASC,WAAT,GAAuBC,OAAvB,GAAiC,IAAjC;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,gBAAMA,SAAN;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,eAAKC,SAAL,CAAe,KAAKV,cAApB,EAAoC,MAAM;AAAA;AAAA,8CAAcW,MAAd,CAAqBC,eAA/D;AACH;;AAEDC,QAAAA,iBAAiB,GAAG;AAChB;AAAA;AAAA,oCAASR,WAAT,GAAuBS,SAAvB,CAAiC,CAAC;AAAA;AAAA,8CAAcH,MAAd,CAAqBC,eAAvD;AACA;AAAA;AAAA,0CAAYG,YAAZ;AACA,eAAKC,UAAL;AACA;AAAA;AAAA,4CAAaC,IAAb,CAAkB;AAAA;AAAA,8BAAMC,eAAxB;AACH;;AAEDC,QAAAA,YAAY,GAAG;AACX;AAAA;AAAA,wCAAWC,MAAX,CAAkB,MAAlB,EAA2BC,EAAD,IAAgB;AACtC,gBAAIA,EAAE,IAAI,CAAV,EAAa;AACT;AAAA;AAAA,8CAAYN,YAAZ;AACA,mBAAKC,UAAL;AACA;AAAA;AAAA,gDAAaC,IAAb,CAAkB;AAAA;AAAA,kCAAMC,eAAxB;AACH;AACJ,WAND;AAOH;;AAEDF,QAAAA,UAAU,GAAG;AACT,gBAAMA,UAAN;;AACA,cAAI,KAAKM,OAAT,EAAkB;AACd,iBAAKA,OAAL;AACH;AACJ;;AApDuC,O","sourcesContent":["import { Node, _decorator } from 'cc';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { msgac } from '../../data/msgac';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { playerModel } from '../../model/playerModel';\r\nimport { UserData } from '../../model/UserData';\r\nimport { BaseLayer } from '../base/BaseLayer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BuyLifeLayer')\r\nexport class BuyLifeLayer extends BaseLayer {\r\n\r\n    diamondNumNode: Node;\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        this.diamondNumNode = this.getNodeByPath(\"ui/btns/btnDiamond/info/num\");\r\n        this.isShowBannerAd = true;\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        super.onEnable();\r\n\r\n        UserData.getInstance().mapData = null;\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n    initUI() {\r\n        this.setString(this.diamondNumNode, \"x\" + designManager.config.backLifeDiamond);\r\n    }\r\n\r\n    onClickBtnDiamond() {\r\n        UserData.getInstance().useBaoShi(-designManager.config.backLifeDiamond);\r\n        playerModel.skillLifeNum++;\r\n        this.closeLayer();\r\n        eventManager.send(msgac.mapRefreshSkill);\r\n    }\r\n\r\n    onClickBtnAd() {\r\n        sdkManager.openAd(\"购买复活\", (st: number) => {\r\n            if (st == 1) {\r\n                playerModel.skillLifeNum++;\r\n                this.closeLayer();\r\n                eventManager.send(msgac.mapRefreshSkill);\r\n            }\r\n        });\r\n    }\r\n\r\n    closeLayer() {\r\n        super.closeLayer();\r\n        if (this.layerCb) {\r\n            this.layerCb();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n"]}