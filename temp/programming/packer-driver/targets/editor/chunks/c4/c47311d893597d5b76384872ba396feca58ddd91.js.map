{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/ChapterLayer.ts"],"names":["_decorator","Node","instantiate","Label","PageView","Sprite","v3","Prefab","Button","myLog","sdkManager","constants","audioManager","designManager","RedPointLogicMgr","UserData","PropItemPrefab","BaseUILayer","ccclass","property","ChapterLayer","type","tooltip","_curPageId","_curOpenLevel","_curRewardList","_curIndex","onLoad","mapData","getTable","tableName","map","curMap","getInstance","getCurMap","setSpriteFrame2","mapName","id","bundles","wwqVec","index","item","mapItem","pageContent","addChild","getChildByName","getComponent","string","start","leveldata","getLevelData","i","Time","ReceiveState","mapPage","scrollToPage","setPage","children","length","element","active","scale","tishiLabel","tishiLabel2","updateBtnState","rewardLayer","removeAllChildren","rewardItem","position","setView","btn1","interactable","btn2","color","colors","yin","parseColor","ins","setRPointView","white","scrowPage","event","_curPageIdx","onGetReward","playEffect","curRewardArr","tobePropItem","getRewardProp","showGetReward","setLevelData","onGetRewardDouble","openAd","st","onDisable","onDestroy","backHome","openLayer","layers","HomeLayer","closeLayer"],"mappings":"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","sourcesContent":["import { _decorator, Node, instantiate, Label, PageView, Sprite, Layout, v3, Prefab, Button } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { RedPointLogicMgr, RPointMask } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ChapterLayer')\r\nexport class ChapterLayer extends BaseUILayer {\r\n    @property({ type: Node, tooltip: \"地图名字\" }) mapName: Node = null;\r\n    @property({ type: Node, tooltip: \"地图节点\" }) mapItem: Node = null;\r\n    @property({ type: Node, tooltip: \"pageView\" }) pageContent: Node = null;\r\n    @property({ type: Node, tooltip: \"选择按钮\" }) selectBtn: Node = null;\r\n\r\n    @property({ type: Node, tooltip: \"地图详情\" }) rewardLayer: Node = null;\r\n\r\n    @property({ type: PageView, tooltip: \"地图\" }) mapPage: PageView = null;\r\n\r\n    @property({ type: Prefab, tooltip: \"奖励节点\" }) rewardItem: Prefab = null;\r\n\r\n    @property({ type: Label, tooltip: \"提示1\" }) tishiLabel: Label = null;\r\n    @property({ type: Label, tooltip: \"提示2\" }) tishiLabel2: Label = null;\r\n\r\n    @property({ type: Node, tooltip: \"单倍奖励\" }) btn1: Node = null;\r\n    @property({ type: Node, tooltip: \"双倍奖励\" }) btn2: Node = null;\r\n\r\n\r\n    _curPageId = 0\r\n    _curOpenLevel = 1\r\n    _curRewardList = []\r\n    _curIndex = 0\r\n\r\n    onLoad() {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        let curMap = UserData.getInstance().getCurMap()\r\n        this._curOpenLevel = curMap\r\n        this.setSpriteFrame2(this.mapName, \"homeLayer/map_name\" + (mapData[curMap - 1].id), null, constants.bundles.wwqVec)\r\n        for (let index = 0; index < 3; index++) {\r\n            let item = instantiate(this.mapItem)\r\n            this.pageContent.addChild(item)\r\n            item.getChildByName(\"timeLabel\").getComponent(Label).string = (index * 5 + 5) + \"分钟\"\r\n            item.getChildByName(\"chapterNum\").getComponent(Label).string = \"第\" + curMap + \"章\"\r\n        }\r\n    }\r\n\r\n    start() {\r\n        // let curMap = UserData.getInstance().getCurMap() - 1\r\n        // // this.setPage(curMap)\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        for(let i = 0; i < 3;i++)\r\n        if (leveldata.Time >= (this._curIndex * 5 + 5) * 60) {\r\n            if (leveldata.ReceiveState[i] == 0) {\r\n                this.mapPage.scrollToPage(i)\r\n                this.setPage(i)\r\n                return\r\n            }\r\n        }\r\n\r\n        this.mapPage.scrollToPage(0)\r\n        this.setPage(0)\r\n    }\r\n\r\n    setPage(index) {\r\n        let mapData = designManager.getTable(constants.tableName.map)\r\n        let curMap = UserData.getInstance().getCurMap()\r\n        let children = this.pageContent.children\r\n        for (let i = 0; i < children.length; i++) {\r\n            let element = children[i];\r\n            element.getChildByName(\"light\").active = i == index\r\n            if (i == index) {\r\n                element.scale = v3(1, 1, 1)\r\n            } else {\r\n                element.scale = v3(0.8, 0.8, 1)\r\n            }\r\n        }\r\n\r\n        this.tishiLabel.string = \"生存超过\" + (index * 5 + 5) + \"分钟\"\r\n        this.tishiLabel2.string = \"生存超过\" + (index * 5 + 5) + \"分钟才可领取\"\r\n\r\n        this._curIndex = index\r\n        this._curRewardList = mapData[curMap - 1][\"reward\" + (index + 1)]\r\n\r\n        //  this._curRewardList.push([204,1000])\r\n        this.updateBtnState()\r\n        this.rewardLayer.removeAllChildren()\r\n        for (let i = 0; i < this._curRewardList.length; i++) {\r\n            let element = this._curRewardList[i];\r\n            //  let dataArr = this.stringToArr(element)\r\n            let item = instantiate(this.rewardItem)\r\n            item.position = v3(0, 0, 0)\r\n            this.rewardLayer.addChild(item)\r\n            item.getComponent(PropItemPrefab).setView(element[0], element[1])\r\n        }\r\n    }\r\n\r\n    updateBtnState() {\r\n        let leveldata = UserData.getInstance().getLevelData(UserData.getInstance().getCurMap())\r\n        this.btn1.getComponent(Button).interactable = false\r\n        this.btn2.getComponent(Button).interactable = false\r\n\r\n        this.btn2.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n        this.btn1.getComponent(Sprite).color = constants.colors.yin.parseColor()\r\n        RedPointLogicMgr.ins().setRPointView(this.btn1,null,false)\r\n        if (leveldata.Time >= (this._curIndex * 5 + 5) * 60) {\r\n            if (leveldata.ReceiveState[this._curIndex] == 0) {\r\n                this.btn1.getComponent(Button).interactable = true\r\n                this.btn1.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n                this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n                RedPointLogicMgr.ins().setRPointView(this.btn1,null,true)\r\n            } else {\r\n                this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"已领取\"\r\n            }\r\n            if (leveldata.ReceiveState[this._curIndex] < 2) {\r\n                this.btn2.getComponent(Button).interactable = true\r\n                this.btn2.getComponent(Sprite).color = constants.colors.white.parseColor()\r\n            }\r\n        } else {\r\n            this.btn1.getChildByName(\"Label\").getComponent(Label).string = \"领 取\"\r\n        }\r\n    }\r\n\r\n    scrowPage(event) {\r\n        myLog.i(\"event \", event)\r\n        this.setPage(event._curPageIdx)\r\n    }\r\n\r\n    onGetReward() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n        UserData.getInstance().getRewardProp(curRewardArr, 1)\r\n        this.showGetReward(curRewardArr)\r\n        let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n        leveldata.ReceiveState[this._curIndex] = 1\r\n        UserData.getInstance().setLevelData(leveldata)\r\n        this.updateBtnState()\r\n     //   RedPointLogicMgr.ins().sendValueSettingMsg(RPointMask.RPM_PropWear, false)\r\n    }\r\n\r\n    onGetRewardDouble() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        sdkManager.openAd(\"章节宝箱双倍领取\" + (this._curIndex * 5 + 5) + \"分钟\", (st: number) => {\r\n            if (st == 1) {\r\n                let curRewardArr = UserData.getInstance().tobePropItem(this._curRewardList)\r\n\r\n                UserData.getInstance().getRewardProp(curRewardArr, 2)\r\n                this.showGetReward(curRewardArr)\r\n\r\n                let leveldata = UserData.getInstance().getLevelData(this._curOpenLevel)\r\n                leveldata.ReceiveState[this._curIndex] = 2\r\n                UserData.getInstance().setLevelData(leveldata)\r\n                this.updateBtnState()\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    onDisable() {\r\n    }\r\n\r\n    onDestroy() {\r\n    }\r\n\r\n    backHome() {\r\n        audioManager.playEffect(\"btnClick\")\r\n        myLog.i(\"backHome\")\r\n        this.openLayer(constants.layers.HomeLayer);\r\n        this.closeLayer()\r\n    }\r\n\r\n}\r\n\r\n"]}