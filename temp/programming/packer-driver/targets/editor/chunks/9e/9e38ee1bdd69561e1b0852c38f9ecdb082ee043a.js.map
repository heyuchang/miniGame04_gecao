{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/item/bullet/Bullet13.ts"],"names":["Component","tween","Vec2","_decorator","cocosUtil","mapModel","physicsGroup","HintNames","ccclass","property","bullet13","bullet","moveStop","bulletId","init","node","angle","targetPos","extraObj","dis","distance","getPosition","time","speed","by","start","to","position","call","recycleSelf","bulletSystem","addBullet","MONSTER_BULLET","convertToWorldSpace","hintSystem","addHint","convertToWorldSpaceWithPos"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,U,OAAAA,U;;AACxBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U,GAE9B;;0BAEaO,Q,WADZF,OAAO,CAAC,UAAD,C,gBAAR,MACaE,QADb,SAC8BV,SAD9B,CACwC;AAAA;AAAA;AAAA,eAEpCW,MAFoC;AAAA,eAGpCC,QAHoC;AAAA,eAMpCC,QANoC,GAMjB,IANiB;AAAA;;AAQpCC,QAAAA,IAAI,CAACH,MAAD,EAAiB;AACjB,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKC,QAAL,GAAgB,IAAhB;AAEA,eAAKD,MAAL,CAAYI,IAAZ,CAAiBC,KAAjB,GAAyB,CAAzB;AAEA,cAAIC,SAAS,GAAG,KAAKN,MAAL,CAAYO,QAA5B;AACA,cAAIC,GAAG,GAAGjB,IAAI,CAACkB,QAAL,CAAc,KAAKT,MAAL,CAAYI,IAAZ,CAAiBM,WAAjB,EAAd,EAA8CJ,SAA9C,CAAV;AACA,cAAIK,IAAI,GAAGH,GAAG,GAAG,KAAKR,MAAL,CAAYY,KAA7B;AAEAtB,UAAAA,KAAK,CAAC,KAAKU,MAAL,CAAYI,IAAb,CAAL,CAAwBS,EAAxB,CAA2BF,IAA3B,EAAiC;AAAEN,YAAAA,KAAK,EAAE;AAAT,WAAjC,EAAiDS,KAAjD;AACAxB,UAAAA,KAAK,CAAC,KAAKU,MAAL,CAAYI,IAAb,CAAL,CAAwBW,EAAxB,CAA2BJ,IAA3B,EAAiC;AAAEK,YAAAA,QAAQ,EAAEV;AAAZ,WAAjC,EAA0DW,IAA1D,CAA+D,MAAM;AACjE,iBAAKjB,MAAL,CAAYkB,WAAZ;AACA;AAAA;AAAA,sCAASC,YAAT,CAAsBC,SAAtB,CAAgC,KAAKlB,QAArC,EAA+C;AAAA;AAAA,8CAAamB,cAA5D,EAA4E;AAAA;AAAA,wCAAUC,mBAAV,CAA8B,KAAKtB,MAAL,CAAYI,IAA1C,CAA5E;AACH,WAHD,EAGGU,KAHH;AAKA;AAAA;AAAA,oCAASS,UAAT,CAAoBC,OAApB,CAA4B;AAAA;AAAA,sCAAUlB,SAAtC,EAAiD;AAAA;AAAA,sCAAUmB,0BAAV,CAAqC,KAAKzB,MAAL,CAAYI,IAAjD,EAAuDE,SAAvD,CAAjD,EAAoH,CAApH,EAAuHK,IAAvH;AAEH;;AA1BmC,O","sourcesContent":["import { Component, tween, Vec2, _decorator } from 'cc';\r\nimport { cocosUtil } from '../../../../utils/cocosUtil';\r\nimport { mapModel } from '../../../model/mapModel';\r\nimport { physicsGroup } from '../../../other/physicsGroup';\r\nimport { HintNames } from '../hint/Hint';\r\nimport { Bullet } from './Bullet';\r\nconst { ccclass, property } = _decorator;\r\n\r\n// 蝎子-静态扳手\r\n@ccclass('bullet13')\r\nexport class bullet13 extends Component {\r\n\r\n    bullet: Bullet;\r\n    moveStop: boolean;\r\n\r\n    // 电极扳手\r\n    bulletId: number = 1010;\r\n\r\n    init(bullet: Bullet) {\r\n        this.bullet = bullet;\r\n        this.moveStop = true;\r\n\r\n        this.bullet.node.angle = 0;\r\n\r\n        let targetPos = this.bullet.extraObj;\r\n        let dis = Vec2.distance(this.bullet.node.getPosition(), targetPos);\r\n        let time = dis / this.bullet.speed;\r\n\r\n        tween(this.bullet.node).by(time, { angle: 360 }).start();\r\n        tween(this.bullet.node).to(time, { position: targetPos }).call(() => {\r\n            this.bullet.recycleSelf();\r\n            mapModel.bulletSystem.addBullet(this.bulletId, physicsGroup.MONSTER_BULLET, cocosUtil.convertToWorldSpace(this.bullet.node));\r\n        }).start();\r\n\r\n        mapModel.hintSystem.addHint(HintNames.targetPos, cocosUtil.convertToWorldSpaceWithPos(this.bullet.node, targetPos), 0, time);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n"]}