{"version":3,"sources":["file:///G:/cocos/%E6%9C%AB%E6%97%A5%E7%89%B9%E5%B7%A5%E9%98%9F/assets/scripts/game/compoment/layer/ShopLayer.ts"],"names":["Button","instantiate","Label","Node","PageView","sp","UITransform","v3","_decorator","sdkManager","constants","msgac","audioManager","designManager","eventManager","RedPointLogicMgr","UserData","PropItemPrefab","BaseUILayer","playerModel","ccclass","property","ShopLayer","type","tooltip","Skeleton","_mangheType","_curState","_isDrawIng","gaojiProp","_rewardArr","onLoad","onEnable","mangItem","active","num1","string","config","extra2","getInstance","$drawNormalNum","num2","extra1","$drawGradeNum","ins","setRPointView","btnManghe","setSpriteFrame2","bundles","wwqVec","pageView","getComponent","scrollToPage","mangheSpine","animation","timeScale","btnSure","self","callfun","animalFinish","setCompleteListener","arr","arr1","i","length","propItem","layer1","addChild","position","setView","Type_UnTouch","Type_HideNum","setScale","layer2","onClickChangeManghe","start","console","log","layerData","initVideoBtn","taskGo","$freeDraw","taskDoge","btnVideo","getChildByName","tenCard","btnSingle","onceCard","baoshi","tenCard2","onceCard2","coin","onOnceCard","playEffect","removeAllChildren","isEnougth","checkAndUseBaoshi","cheackAndUseCoin","obj","hide","send","homeHideMenu","showChouAnimale","cancelButtonTouch","item","getDrawItem","propData","getRowById","tableName","prop","award","quality","push","Id","Num","toast","onTenCard","width","height","getReward","openAd","state","getCurrentPageIndex","updatebtnState","setAnimation","aniName","loop","uiNode","checkShowGaoji","shift","id","Type_BigIcon","getRewardProp","openLayer","layers","RewardLayer","propArr","addDayTaskNum","drawFinish","onBtnClickSure","interactable","onDisable","onDestroy","closeLayer"],"mappings":"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","sourcesContent":["import { Button, instantiate, Label, Node, PageView, sp, UITransform, v3, _decorator } from 'cc';\r\nimport { myLog } from '../../../common/myLog';\r\nimport { sdkManager } from '../../../sdk/sdkManager';\r\nimport { constants } from '../../data/constants';\r\nimport { msgac } from '../../data/msgac';\r\nimport { audioManager } from '../../manager/audioManager';\r\nimport { designManager } from '../../manager/designManager';\r\nimport { eventManager } from '../../manager/eventManager';\r\nimport { RedPointLogicMgr } from '../../manager/RedPointLogicMgr';\r\nimport { UserData } from '../../model/UserData';\r\nimport { PropItemPrefab } from '../item/PropItemPrefab';\r\nimport { BaseUILayer } from './BaseUILayer';\r\nimport { playerModel } from '../../model/playerModel';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ShopLayer')\r\nexport class ShopLayer extends BaseUILayer {\r\n\r\n    @property({ type: Node, tooltip: \"道具节点\" }) mangItem: Node = null;\r\n    @property({ type: Node, tooltip: \"宣传页\" }) pageView: Node = null;\r\n\r\n    @property({ type: sp.Skeleton, tooltip: \"\" }) mangheSpine: sp.Skeleton = null;\r\n\r\n    @property({ type: Node }) btnManghe: Node = null;\r\n\r\n    @property({ type: Node }) uiNode: Node = null;\r\n    @property({ type: Node }) btnSure: Node = null;\r\n\r\n    @property({ type: Node }) propItem: Node = null;\r\n\r\n    @property({ type: Node }) btnVideo: Node = null;\r\n    @property({ type: Node }) btnSingle: Node = null;\r\n\r\n\r\n    @property({ type: Label }) num1: Label = null;\r\n    @property({ type: Label }) num2: Label = null;\r\n\r\n    @property({ type: Node }) layer1: Node = null;\r\n    @property({ type: Node }) layer2: Node = null;\r\n\r\n\r\n    _mangheType = 0\r\n    _curState = 0\r\n\r\n    _isDrawIng = false\r\n\r\n    gaojiProp = []\r\n    _rewardArr = []\r\n\r\n\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    onEnable() {\r\n        // for (let index = 0; index < 12; index++) {\r\n        //     let item = instantiate(this.mangItem)\r\n        //     this.listLayer.addChild(item)\r\n        // }\r\n\r\n\r\n        this.mangItem.active = false\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n\r\n        RedPointLogicMgr.ins().setRPointView(this.btnManghe, null, true)\r\n        this.setSpriteFrame2(this.btnManghe, \"shopLayer/mangheNormal\", null, constants.bundles.wwqVec)\r\n        this.pageView.getComponent(PageView).scrollToPage(0, 0)\r\n        this._mangheType = 0\r\n        this.mangheSpine.animation = \"purple1\"\r\n        this.mangheSpine.timeScale = 1\r\n        this.btnSure.active = false\r\n        let self = this\r\n        let callfun = function () {\r\n            self.animalFinish()\r\n        }\r\n        this.mangheSpine.setCompleteListener(callfun)\r\n\r\n        let arr = [10082, 10113, 10010]\r\n        let arr1 = [10066, 10155, 10118]\r\n\r\n        for (let i = 0; i < arr.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer1.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            let propItem = instantiate(self.propItem)\r\n            this.layer2.addChild(propItem)\r\n            propItem.position = v3(0, 0, 0)\r\n            propItem.getComponent(PropItemPrefab).setView(arr1[i], 1, PropItemPrefab.Type_UnTouch | PropItemPrefab.Type_HideNum)\r\n            propItem.getComponent(PropItemPrefab).setScale(100)\r\n        }\r\n\r\n        this.onClickChangeManghe()\r\n\r\n    }\r\n\r\n    start() {\r\n        console.log(\"layerData = \", this.layerData)\r\n        this.initVideoBtn()\r\n\r\n    }\r\n\r\n    initVideoBtn() {\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            this.btnVideo.getChildByName(\"ui_video\").active = false\r\n            this.btnVideo.getChildByName(\"Layout\").active = false\r\n            this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, 0, 0)\r\n            return\r\n        }\r\n\r\n        if (this._mangheType == 1) {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_diamond2\")\r\n\r\n            if (UserData.getInstance().baoshi >= designManager.config.tenCard) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(20, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        } else {\r\n            this.btnVideo.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.tenCard2 + \"\"\r\n            this.btnSingle.getChildByName(\"Layout\").getChildByName(\"zsLabel\").getComponent(Label).string = designManager.config.onceCard2 + \"\"\r\n            this.setSpriteFrame2(this.btnSingle.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n            this.setSpriteFrame2(this.btnVideo.getChildByName(\"Layout\").getChildByName(\"prop_zs\"), \"prop/prop_coin1\")\r\n\r\n            if (UserData.getInstance().coin >= designManager.config.tenCard2) {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(0, -10, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = false\r\n                this.btnVideo.getChildByName(\"Layout\").active = true\r\n            } else {\r\n                this.btnVideo.getChildByName(\"videoLabel\").position = v3(20, 0, 0)\r\n                this.btnVideo.getChildByName(\"ui_video\").active = true\r\n                this.btnVideo.getChildByName(\"Layout\").active = false\r\n            }\r\n        }\r\n    }\r\n\r\n    onOnceCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        let isEnougth = false\r\n        if (this._mangheType == 1) {\r\n            isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.onceCard, true)\r\n        } else {\r\n            isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.onceCard2, true)\r\n        }\r\n\r\n        if (isEnougth) {\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            this.showChouAnimale()\r\n            this.cancelButtonTouch(false)\r\n            this._isDrawIng = true\r\n            this.gaojiProp = []\r\n            this._rewardArr = []\r\n            let item = UserData.getInstance().getDrawItem(this._mangheType)\r\n\r\n            let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n            if (propData.quality >= 4) {\r\n                this.gaojiProp.push(propData)\r\n            }\r\n            this._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n            this.initVideoBtn()\r\n            // if (item) {\r\n            //     arr.push(item)\r\n            //     this.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n            // }\r\n        } else {\r\n            this.toast(this._mangheType == 1 ? \"钻石不足\" : \"金币不足\")\r\n        }\r\n    }\r\n\r\n    onTenCard() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        this.mangItem.active = false\r\n\r\n        let self = this\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 540\r\n        this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 200\r\n        let getReward = function () {\r\n            self.showChouAnimale()\r\n            let obj: any = {};\r\n            obj.hide = true;\r\n\r\n            self.cancelButtonTouch(false)\r\n            self._isDrawIng = true\r\n            self.gaojiProp = []\r\n            self._rewardArr = []\r\n            eventManager.send(msgac.homeHideMenu, obj);\r\n            for (let i = 0; i < 10; i++) {\r\n                let item = UserData.getInstance().getDrawItem(self._mangheType)\r\n                if (item) {\r\n                    // let propItem = instantiate(self.propItem)\r\n                    // self.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    // propItem.getComponent(PropItemPrefab).setView(item.award[0], item.award[2], PropItemPrefab.Type_UnTouch)\r\n                    // propItem.getComponent(PropItemPrefab).setScale(100)\r\n\r\n                    let propData = designManager.getRowById(constants.tableName.prop, item.award[0])\r\n                    if (propData.quality >= 4) {\r\n                        self.gaojiProp.push(propData)\r\n                    }\r\n                    self._rewardArr.push({ Id: item.award[0], Num: 1 })\r\n                }\r\n            }\r\n            self.initVideoBtn()\r\n            //    self.openLayer(constants.layers.RewardLayer, { propArr: arr })\r\n        }\r\n        let isEnougth = false\r\n\r\n        if (this.layerData.taskGo && UserData.getInstance().$freeDraw < designManager.config.taskDoge) {\r\n            isEnougth = true\r\n            UserData.getInstance().$freeDraw  ++\r\n        }else{\r\n            if (this._mangheType == 1) {\r\n                isEnougth = UserData.getInstance().checkAndUseBaoshi(designManager.config.tenCard, true)\r\n            } else {\r\n                isEnougth = UserData.getInstance().cheackAndUseCoin(designManager.config.tenCard2, true)\r\n            }\r\n        }\r\n        if (isEnougth) {\r\n            getReward && getReward()\r\n\r\n        } else {\r\n            sdkManager.openAd(this._mangheType == 1 ? \"盲盒高级抽奖\" : \"盲盒普通抽奖\", (state) => {\r\n                if (state == 1) {\r\n                    getReward && getReward()\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    onClickChangeManghe() {\r\n        audioManager.playEffect(\"btnClick\")\r\n\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 0) {\r\n            this.pageView.getComponent(PageView).scrollToPage(1, 0.2)\r\n        } else {\r\n            this.pageView.getComponent(PageView).scrollToPage(0, 0.2)\r\n        }\r\n        this.updatebtnState()\r\n    }\r\n\r\n    updatebtnState() {\r\n        if (this._isDrawIng) {\r\n            return\r\n        }\r\n        if (this.pageView.getComponent(PageView).getCurrentPageIndex() == 1) {\r\n            this._mangheType = 1\r\n            this.setSpriteFrame2(this.btnManghe, \"shopLayer/manggaoji\", null, constants.bundles.wwqVec)\r\n            this.mangheSpine.setAnimation(0, \"qiehuan1\", false)\r\n\r\n            this.mangheSpine.timeScale = 1\r\n        } else {\r\n            this.mangheSpine.setAnimation(0, \"qiehuan2\", false)\r\n            this.mangheSpine.timeScale = 1\r\n            this._mangheType = 0\r\n            this.setSpriteFrame2(this.btnManghe, \"shopLayer/mangheNormal\", null, constants.bundles.wwqVec)\r\n        }\r\n        this.initVideoBtn()\r\n    }\r\n\r\n    showChouAnimale() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"2\", false)\r\n\r\n        // this.mangheSpine.animation = aniName + \"2\"\r\n        this.mangheSpine.timeScale = 1\r\n        this._curState = 2\r\n    }\r\n\r\n    animalFinish() {\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.loop = false\r\n\r\n        if (this._curState == 2) {\r\n            this.uiNode.active = false\r\n            this.mangheSpine.timeScale = 1\r\n            this.mangheSpine.setAnimation(0, \"bai3\", false)\r\n            this._curState = 3\r\n        } else if (this._curState == 3) {\r\n            this.checkShowGaoji()\r\n            // this.mangheSpine.animation = aniName + \"4\"\r\n            // this.btnSure.active = true\r\n            this.mangItem.active = true\r\n            // this._curState = 4\r\n        } else if (this._curState == 4) {\r\n            // this.mangheSpine.animation = this.mangheSpine.animation\r\n        }\r\n    }\r\n\r\n    checkShowGaoji() {\r\n\r\n        if (this.gaojiProp.length > 0) {\r\n            let propData = this.gaojiProp.shift()\r\n            if (propData) {\r\n                if (propData.quality >= 4) {\r\n                    this.mangheSpine.setAnimation(0, propData.quality == 4 ? \"purple4\" : \"yellow4\", true)\r\n                    this.mangheSpine.timeScale = 1\r\n                    this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n                    let propItem = instantiate(this.propItem)\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).width = 300\r\n                    this.mangItem.getChildByName(\"Layout\").getComponent(UITransform).height = 300\r\n                    this.mangItem.getChildByName(\"Layout\").addChild(propItem)\r\n                    propItem.getComponent(PropItemPrefab).setView(propData.id, 1, PropItemPrefab.Type_BigIcon)\r\n                    propItem.getComponent(PropItemPrefab).setScale(300)\r\n                    this.btnSure.active = true\r\n                    this._curState = 4\r\n                    return\r\n                }\r\n            }\r\n        }\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n\r\n        this.mangheSpine.timeScale = 1\r\n        this.mangItem.active = false\r\n        this.mangItem.getChildByName(\"Layout\").removeAllChildren()\r\n        UserData.getInstance().getRewardProp(this._rewardArr)\r\n        this.openLayer(constants.layers.RewardLayer, { propArr: this._rewardArr })\r\n\r\n        playerModel.addDayTaskNum(3, this._rewardArr.length);\r\n\r\n        this.drawFinish()\r\n        this._curState = 5\r\n\r\n    }\r\n\r\n    onBtnClickSure() {\r\n\r\n        audioManager.playEffect(\"btnClick\")\r\n        this.checkShowGaoji()\r\n        this.mangItem.active = true\r\n        return\r\n\r\n    }\r\n\r\n    drawFinish() {\r\n        this.num1.string = (designManager.config.extra2 - UserData.getInstance().$drawNormalNum) + \"\"\r\n        this.num2.string = (designManager.config.extra1 - UserData.getInstance().$drawGradeNum) + \"\"\r\n        this.uiNode.active = true\r\n        this.btnSure.active = false\r\n        this.mangItem.active = false\r\n        eventManager.send(msgac.homeHideMenu, { hide: false });\r\n\r\n        let aniName = \"purple\"\r\n        if (this._mangheType == 1) {\r\n            aniName = \"yellow\"\r\n        }\r\n        this._curState = 0\r\n        this.mangheSpine.setAnimation(0, aniName + \"1\", false)\r\n        this.cancelButtonTouch(true)\r\n        this._isDrawIng = false\r\n    }\r\n\r\n    cancelButtonTouch(state) {\r\n        this.btnSingle.getComponent(Button).interactable = state\r\n        this.btnVideo.getComponent(Button).interactable = state\r\n        this.btnManghe.getComponent(Button).interactable = state\r\n    }\r\n\r\n    onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    onDestroy() {\r\n        super.onDestroy();\r\n    }\r\n\r\n\r\n\r\n    closeLayer() {\r\n        super.closeLayer()\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n"]}